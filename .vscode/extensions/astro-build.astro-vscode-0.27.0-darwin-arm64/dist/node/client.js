"use strict";var Vm=Object.create;var ys=Object.defineProperty;var Gm=Object.getOwnPropertyDescriptor;var Bm=Object.getOwnPropertyNames;var Xm=Object.getPrototypeOf,Qm=Object.prototype.hasOwnProperty;var Jm=(t,e)=>()=>(t&&(e=t(t=0)),e);var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Xo=(t,e)=>{for(var n in e)ys(t,n,{get:e[n],enumerable:!0})},pf=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Bm(e))!Qm.call(t,i)&&i!==n&&ys(t,i,{get:()=>e[i],enumerable:!(r=Gm(e,i))||r.enumerable});return t};var Er=(t,e,n)=>(n=t!=null?Vm(Xm(t)):{},pf(e||!t||!t.__esModule?ys(n,"default",{value:t,enumerable:!0}):n,t)),Cs=t=>pf(ys({},"__esModule",{value:!0}),t);var Nt=w(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.asPromise=ke.thenable=ke.typedArray=ke.stringArray=ke.array=ke.func=ke.error=ke.number=ke.string=ke.boolean=void 0;function Ym(t){return t===!0||t===!1}ke.boolean=Ym;function gf(t){return typeof t=="string"||t instanceof String}ke.string=gf;function Zm(t){return typeof t=="number"||t instanceof Number}ke.number=Zm;function ev(t){return t instanceof Error}ke.error=ev;function mf(t){return typeof t=="function"}ke.func=mf;function vf(t){return Array.isArray(t)}ke.array=vf;function tv(t){return vf(t)&&t.every(e=>gf(e))}ke.stringArray=tv;function nv(t,e){return Array.isArray(t)&&t.every(e)}ke.typedArray=nv;function yf(t){return t&&mf(t.then)}ke.thenable=yf;function rv(t){return t instanceof Promise?t:yf(t)?new Promise((e,n)=>{t.then(r=>e(r),r=>n(r))}):Promise.resolve(t)}ke.asPromise=rv});var Dn=w(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});var Qo;function Jo(){if(Qo===void 0)throw new Error("No runtime abstraction layer installed");return Qo}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Qo=n}t.install=e})(Jo||(Jo={}));Yo.default=Jo});var Zo=w(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.Disposable=void 0;var iv;(function(t){function e(n){return{dispose:n}}t.create=e})(iv=pi.Disposable||(pi.Disposable={}))});var Cf=w(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.AbstractMessageBuffer=void 0;var sv=13,ov=10,av=`\r
`,ea=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];r=0;t:for(;r<u.length;){switch(u[r]){case sv:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case ov:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}i+=u.byteLength,n++}if(e!==4)return;let s=this._read(i+r),o=new Map,a=this.toString(s,"ascii").split(av);if(a.length<2)return o;for(let u=0;u<a.length-2;u++){let l=a[u],h=l.indexOf(":");if(h===-1)throw new Error("Message header must separate key and value using :");let g=l.substr(0,h),p=l.substr(h+1).trim();o.set(g,p)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);n.set(o,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else n.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return n}};_s.AbstractMessageBuffer=ea});var Rf=w(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});var cv=Dn(),_f=require("util"),Zn=Zo(),uv=Cf(),kr=class extends uv.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return kr.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new _f.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};kr.emptyBuffer=Buffer.allocUnsafe(0);var ta=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Zn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Zn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Zn.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Zn.Disposable.create(()=>this.stream.off("data",e))}},na=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Zn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Zn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Zn.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let s=o=>{o==null?r():i(o)};typeof e=="string"?this.stream.write(e,n,s):this.stream.write(e,s)})}end(){this.stream.end()}},Df=Object.freeze({messageBuffer:Object.freeze({create:t=>new kr(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new _f.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new ta(t),asWritableStream:t=>new na(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:()=>clearImmediate(n)}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:()=>clearInterval(r)}}})});function ra(){return Df}(function(t){function e(){cv.default.install(Df)}t.install=e})(ra||(ra={}));ia.default=ra});var Or=w(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.stringArray=it.array=it.func=it.error=it.number=it.string=it.boolean=void 0;function lv(t){return t===!0||t===!1}it.boolean=lv;function bf(t){return typeof t=="string"||t instanceof String}it.string=bf;function dv(t){return typeof t=="number"||t instanceof Number}it.number=dv;function fv(t){return t instanceof Error}it.error=fv;function hv(t){return typeof t=="function"}it.func=hv;function wf(t){return Array.isArray(t)}it.array=wf;function pv(t){return wf(t)&&t.every(e=>bf(e))}it.stringArray=pv});var Pa=w($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.Message=$.NotificationType9=$.NotificationType8=$.NotificationType7=$.NotificationType6=$.NotificationType5=$.NotificationType4=$.NotificationType3=$.NotificationType2=$.NotificationType1=$.NotificationType0=$.NotificationType=$.RequestType9=$.RequestType8=$.RequestType7=$.RequestType6=$.RequestType5=$.RequestType4=$.RequestType3=$.RequestType2=$.RequestType1=$.RequestType=$.RequestType0=$.AbstractMessageSignature=$.ParameterStructures=$.ResponseError=$.ErrorCodes=void 0;var er=Or(),Sf;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Sf=$.ErrorCodes||($.ErrorCodes={}));var gi=class extends Error{constructor(e,n,r){super(n),this.code=er.number(e)?e:Sf.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,gi.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};$.ResponseError=gi;var Ke=class{constructor(e){this.kind=e}static is(e){return e===Ke.auto||e===Ke.byName||e===Ke.byPosition}toString(){return this.kind}};$.ParameterStructures=Ke;Ke.auto=new Ke("auto");Ke.byPosition=new Ke("byPosition");Ke.byName=new Ke("byName");var Ce=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return Ke.auto}};$.AbstractMessageSignature=Ce;var sa=class extends Ce{constructor(e){super(e,0)}};$.RequestType0=sa;var oa=class extends Ce{constructor(e,n=Ke.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};$.RequestType=oa;var aa=class extends Ce{constructor(e,n=Ke.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};$.RequestType1=aa;var ca=class extends Ce{constructor(e){super(e,2)}};$.RequestType2=ca;var ua=class extends Ce{constructor(e){super(e,3)}};$.RequestType3=ua;var la=class extends Ce{constructor(e){super(e,4)}};$.RequestType4=la;var da=class extends Ce{constructor(e){super(e,5)}};$.RequestType5=da;var fa=class extends Ce{constructor(e){super(e,6)}};$.RequestType6=fa;var ha=class extends Ce{constructor(e){super(e,7)}};$.RequestType7=ha;var pa=class extends Ce{constructor(e){super(e,8)}};$.RequestType8=pa;var ga=class extends Ce{constructor(e){super(e,9)}};$.RequestType9=ga;var ma=class extends Ce{constructor(e,n=Ke.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};$.NotificationType=ma;var va=class extends Ce{constructor(e){super(e,0)}};$.NotificationType0=va;var ya=class extends Ce{constructor(e,n=Ke.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};$.NotificationType1=ya;var Ca=class extends Ce{constructor(e){super(e,2)}};$.NotificationType2=Ca;var _a=class extends Ce{constructor(e){super(e,3)}};$.NotificationType3=_a;var Da=class extends Ce{constructor(e){super(e,4)}};$.NotificationType4=Da;var Ra=class extends Ce{constructor(e){super(e,5)}};$.NotificationType5=Ra;var ba=class extends Ce{constructor(e){super(e,6)}};$.NotificationType6=ba;var wa=class extends Ce{constructor(e){super(e,7)}};$.NotificationType7=wa;var Sa=class extends Ce{constructor(e){super(e,8)}};$.NotificationType8=Sa;var Ta=class extends Ce{constructor(e){super(e,9)}};$.NotificationType9=Ta;var gv;(function(t){function e(i){let s=i;return s&&er.string(s.method)&&(er.string(s.id)||er.number(s.id))}t.isRequest=e;function n(i){let s=i;return s&&er.string(s.method)&&i.id===void 0}t.isNotification=n;function r(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(er.string(s.id)||er.number(s.id)||s.id===null)}t.isResponse=r})(gv=$.Message||($.Message={}))});var qa=w(Rn=>{"use strict";var Tf;Object.defineProperty(Rn,"__esModule",{value:!0});Rn.LRUCache=Rn.LinkedMap=Rn.Touch=void 0;var ft;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(ft=Rn.Touch||(Rn.Touch={}));var Ds=class{constructor(){this[Tf]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=ft.None){let r=this._map.get(e);if(!!r)return n!==ft.None&&this.touch(r,n),r.value}set(e,n,r=ft.None){let i=this._map.get(e);if(i)i.value=n,r!==ft.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case ft.None:this.addItemLast(i);break;case ft.First:this.addItemFirst(i);break;case ft.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(Tf=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==ft.First&&n!==ft.Last)){if(n===ft.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===ft.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};Rn.LinkedMap=Ds;var xa=class extends Ds{constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=ft.AsNew){return super.get(e,n)}peek(e){return super.get(e,ft.None)}set(e,n){return super.set(e,n,ft.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Rn.LRUCache=xa});var Fr=w(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.Emitter=tr.Event=void 0;var mv=Dn(),vv;(function(t){let e={dispose(){}};t.None=function(){return e}})(vv=tr.Event||(tr.Event={}));var Ea=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=r.length;s<o;s++)try{n.push(r[s].apply(i[s],e))}catch(a){(0,mv.default)().console.error(a)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Ir=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new Ea),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,n),i.dispose=Ir._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};tr.Emitter=Ir;Ir._noop=function(){}});var Fa=w(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.CancellationTokenSource=nr.CancellationToken=void 0;var yv=Dn(),Cv=Or(),ka=Fr(),Oa;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ka.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ka.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||Cv.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(Oa=nr.CancellationToken||(nr.CancellationToken={}));var _v=Object.freeze(function(t,e){let n=(0,yv.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),Rs=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?_v:(this._emitter||(this._emitter=new ka.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Ia=class{get token(){return this._token||(this._token=new Rs),this._token}cancel(){this._token?this._token.cancel():this._token=Oa.Cancelled}dispose(){this._token?this._token instanceof Rs&&this._token.dispose():this._token=Oa.None}};nr.CancellationTokenSource=Ia});var Pf=w(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.ReadableStreamMessageReader=bn.AbstractMessageReader=bn.MessageReader=void 0;var La=Dn(),Nr=Or(),Na=Fr(),Dv;(function(t){function e(n){let r=n;return r&&Nr.func(r.listen)&&Nr.func(r.dispose)&&Nr.func(r.onError)&&Nr.func(r.onClose)&&Nr.func(r.onPartialMessage)}t.is=e})(Dv=bn.MessageReader||(bn.MessageReader={}));var bs=class{constructor(){this.errorEmitter=new Na.Emitter,this.closeEmitter=new Na.Emitter,this.partialMessageEmitter=new Na.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Nr.string(e.message)?e.message:"unknown"}`)}};bn.AbstractMessageReader=bs;var Ma;(function(t){function e(n){let r,i,s,o=new Map,a,u=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(s=n.contentDecoder,o.set(s.name,s)),n.contentDecoders!==void 0)for(let l of n.contentDecoders)o.set(l.name,l);if(n.contentTypeDecoder!==void 0&&(a=n.contentTypeDecoder,u.set(a.name,a)),n.contentTypeDecoders!==void 0)for(let l of n.contentTypeDecoders)u.set(l.name,l)}return a===void 0&&(a=(0,La.default)().applicationJson.decoder,u.set(a.name,a)),{charset:r,contentDecoder:s,contentDecoders:o,contentTypeDecoder:a,contentTypeDecoders:u}}t.fromOptions=e})(Ma||(Ma={}));var Aa=class extends bs{constructor(e,n){super(),this.readable=e,this.options=Ma.fromOptions(n),this.buffer=(0,La.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let o=parseInt(s);if(isNaN(o))throw new Error("Content-Length value must be a number.");this.nextMessageLength=o}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(n):r=Promise.resolve(n),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,La.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};bn.ReadableStreamMessageReader=Aa});var xf=w(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.Semaphore=void 0;var Rv=Dn(),ja=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Rv.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};ws.Semaphore=ja});var Of=w(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.WriteableStreamMessageWriter=wn.AbstractMessageWriter=wn.MessageWriter=void 0;var qf=Dn(),mi=Or(),bv=xf(),Ef=Fr(),wv="Content-Length: ",kf=`\r
`,Sv;(function(t){function e(n){let r=n;return r&&mi.func(r.dispose)&&mi.func(r.onClose)&&mi.func(r.onError)&&mi.func(r.write)}t.is=e})(Sv=wn.MessageWriter||(wn.MessageWriter={}));var Ss=class{constructor(){this.errorEmitter=new Ef.Emitter,this.closeEmitter=new Ef.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${mi.string(e.message)?e.message:"unknown"}`)}};wn.AbstractMessageWriter=Ss;var $a;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,qf.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,qf.default)().applicationJson.encoder}}t.fromOptions=e})($a||($a={}));var Ha=class extends Ss{constructor(e,n){super(),this.writable=e,this.options=$a.fromOptions(n),this.errorCount=0,this.writeSemaphore=new bv.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(wv,r.byteLength.toString(),kf),i.push(kf),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};wn.WriteableStreamMessageWriter=Ha});var Af=w(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.createMessageConnection=W.ConnectionOptions=W.CancellationStrategy=W.CancellationSenderStrategy=W.CancellationReceiverStrategy=W.ConnectionStrategy=W.ConnectionError=W.ConnectionErrors=W.LogTraceNotification=W.SetTraceNotification=W.TraceFormat=W.TraceValues=W.Trace=W.NullLogger=W.ProgressType=W.ProgressToken=void 0;var If=Dn(),We=Or(),U=Pa(),Ff=qa(),vi=Fr(),Wa=Fa(),Ci;(function(t){t.type=new U.NotificationType("$/cancelRequest")})(Ci||(Ci={}));var Nf;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}t.is=e})(Nf=W.ProgressToken||(W.ProgressToken={}));var yi;(function(t){t.type=new U.NotificationType("$/progress")})(yi||(yi={}));var Ua=class{constructor(){}};W.ProgressType=Ua;var za;(function(t){function e(n){return We.func(n)}t.is=e})(za||(za={}));W.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var he;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(he=W.Trace||(W.Trace={}));var Tv;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Tv=W.TraceValues||(W.TraceValues={}));(function(t){function e(r){if(!We.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(he=W.Trace||(W.Trace={}));var Bt;(function(t){t.Text="text",t.JSON="json"})(Bt=W.TraceFormat||(W.TraceFormat={}));(function(t){function e(n){return We.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(Bt=W.TraceFormat||(W.TraceFormat={}));var Lf;(function(t){t.type=new U.NotificationType("$/setTrace")})(Lf=W.SetTraceNotification||(W.SetTraceNotification={}));var Ka;(function(t){t.type=new U.NotificationType("$/logTrace")})(Ka=W.LogTraceNotification||(W.LogTraceNotification={}));var Ts;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(Ts=W.ConnectionErrors||(W.ConnectionErrors={}));var Mn=class extends Error{constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,Mn.prototype)}};W.ConnectionError=Mn;var Mf;(function(t){function e(n){let r=n;return r&&We.func(r.cancelUndispatched)}t.is=e})(Mf=W.ConnectionStrategy||(W.ConnectionStrategy={}));var Va;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new Wa.CancellationTokenSource}});function e(n){let r=n;return r&&We.func(r.createCancellationTokenSource)}t.is=e})(Va=W.CancellationReceiverStrategy||(W.CancellationReceiverStrategy={}));var Ga;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Ci.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&We.func(r.sendCancellation)&&We.func(r.cleanup)}t.is=e})(Ga=W.CancellationSenderStrategy||(W.CancellationSenderStrategy={}));var Ba;(function(t){t.Message=Object.freeze({receiver:Va.Message,sender:Ga.Message});function e(n){let r=n;return r&&Va.is(r.receiver)&&Ga.is(r.sender)}t.is=e})(Ba=W.CancellationStrategy||(W.CancellationStrategy={}));var Pv;(function(t){function e(n){let r=n;return r&&(Ba.is(r.cancellationStrategy)||Mf.is(r.connectionStrategy))}t.is=e})(Pv=W.ConnectionOptions||(W.ConnectionOptions={}));var Xt;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Xt||(Xt={}));function xv(t,e,n,r){let i=n!==void 0?n:W.NullLogger,s=0,o=0,a=0,u="2.0",l,h=new Map,g,p=new Map,y=new Map,m,D=new Ff.LinkedMap,b=new Map,T=new Set,q=new Map,E=he.Off,I=Bt.Text,K,Ne=Xt.New,De=new vi.Emitter,Ct=new vi.Emitter,rt=new vi.Emitter,Tt=new vi.Emitter,an=new vi.Emitter,Ut=r&&r.cancellationStrategy?r.cancellationStrategy:Ba.Message;function Ot(v){if(v===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+v.toString()}function cn(v){return v===null?"res-unknown-"+(++a).toString():"res-"+v.toString()}function _t(){return"not-"+(++o).toString()}function Dt(v,P){U.Message.isRequest(P)?v.set(Ot(P.id),P):U.Message.isResponse(P)?v.set(cn(P.id),P):v.set(_t(),P)}function Gn(v){}function Ee(){return Ne===Xt.Listening}function ut(){return Ne===Xt.Closed}function lt(){return Ne===Xt.Disposed}function un(){(Ne===Xt.New||Ne===Xt.Listening)&&(Ne=Xt.Closed,Ct.fire(void 0))}function dt(v){De.fire([v,void 0,void 0])}function li(v){De.fire(v)}t.onClose(un),t.onError(dt),e.onClose(un),e.onError(li);function wr(){m||D.size===0||(m=(0,If.default)().timer.setImmediate(()=>{m=void 0,Sr()}))}function Sr(){if(D.size===0)return;let v=D.shift();try{U.Message.isRequest(v)?Xn(v):U.Message.isNotification(v)?Tr(v):U.Message.isResponse(v)?di(v):Pr(v)}finally{wr()}}let Bn=v=>{try{if(U.Message.isNotification(v)&&v.method===Ci.type.method){let P=v.params.id,O=Ot(P),M=D.get(O);if(U.Message.isRequest(M)){let de=r?.connectionStrategy,ve=de&&de.cancelUndispatched?de.cancelUndispatched(M,Gn):void 0;if(ve&&(ve.error!==void 0||ve.result!==void 0)){D.delete(O),q.delete(P),ve.id=M.id,zt(ve,v.method,Date.now()),e.write(ve).catch(()=>i.error("Sending response for canceled message failed."));return}}let le=q.get(P);if(le!==void 0){le.cancel(),Ln(v);return}else T.add(P)}Dt(D,v)}finally{wr()}};function Xn(v){if(lt())return;function P(ee,ge,te){let d={jsonrpc:u,id:v.id};ee instanceof U.ResponseError?d.error=ee.toJson():d.result=ee===void 0?null:ee,zt(d,ge,te),e.write(d).catch(()=>i.error("Sending response failed."))}function O(ee,ge,te){let d={jsonrpc:u,id:v.id,error:ee.toJson()};zt(d,ge,te),e.write(d).catch(()=>i.error("Sending response failed."))}function M(ee,ge,te){ee===void 0&&(ee=null);let d={jsonrpc:u,id:v.id,result:ee};zt(d,ge,te),e.write(d).catch(()=>i.error("Sending response failed."))}Qn(v);let le=h.get(v.method),de,ve;le&&(de=le.type,ve=le.handler);let be=Date.now();if(ve||l){let ee=v.id??String(Date.now()),ge=Ut.receiver.createCancellationTokenSource(ee);v.id!==null&&T.has(v.id)&&ge.cancel(),v.id!==null&&q.set(ee,ge);try{let te;if(ve)if(v.params===void 0){if(de!==void 0&&de.numberOfParams!==0){O(new U.ResponseError(U.ErrorCodes.InvalidParams,`Request ${v.method} defines ${de.numberOfParams} params but received none.`),v.method,be);return}te=ve(ge.token)}else if(Array.isArray(v.params)){if(de!==void 0&&de.parameterStructures===U.ParameterStructures.byName){O(new U.ResponseError(U.ErrorCodes.InvalidParams,`Request ${v.method} defines parameters by name but received parameters by position`),v.method,be);return}te=ve(...v.params,ge.token)}else{if(de!==void 0&&de.parameterStructures===U.ParameterStructures.byPosition){O(new U.ResponseError(U.ErrorCodes.InvalidParams,`Request ${v.method} defines parameters by position but received parameters by name`),v.method,be);return}te=ve(v.params,ge.token)}else l&&(te=l(v.method,v.params,ge.token));let d=te;te?d.then?d.then(R=>{q.delete(ee),P(R,v.method,be)},R=>{q.delete(ee),R instanceof U.ResponseError?O(R,v.method,be):R&&We.string(R.message)?O(new U.ResponseError(U.ErrorCodes.InternalError,`Request ${v.method} failed with message: ${R.message}`),v.method,be):O(new U.ResponseError(U.ErrorCodes.InternalError,`Request ${v.method} failed unexpectedly without providing any details.`),v.method,be)}):(q.delete(ee),P(te,v.method,be)):(q.delete(ee),M(te,v.method,be))}catch(te){q.delete(ee),te instanceof U.ResponseError?P(te,v.method,be):te&&We.string(te.message)?O(new U.ResponseError(U.ErrorCodes.InternalError,`Request ${v.method} failed with message: ${te.message}`),v.method,be):O(new U.ResponseError(U.ErrorCodes.InternalError,`Request ${v.method} failed unexpectedly without providing any details.`),v.method,be)}}else O(new U.ResponseError(U.ErrorCodes.MethodNotFound,`Unhandled method ${v.method}`),v.method,be)}function di(v){if(!lt())if(v.id===null)v.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(v.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let P=v.id,O=b.get(P);if(Kt(v,O),O!==void 0){b.delete(P);try{if(v.error){let M=v.error;O.reject(new U.ResponseError(M.code,M.message,M.data))}else if(v.result!==void 0)O.resolve(v.result);else throw new Error("Should never happen.")}catch(M){M.message?i.error(`Response handler '${O.method}' failed with message: ${M.message}`):i.error(`Response handler '${O.method}' failed unexpectedly.`)}}}}function Tr(v){if(lt())return;let P,O;if(v.method===Ci.type.method){let M=v.params.id;T.delete(M),Ln(v);return}else{let M=p.get(v.method);M&&(O=M.handler,P=M.type)}if(O||g)try{if(Ln(v),O)if(v.params===void 0)P!==void 0&&P.numberOfParams!==0&&P.parameterStructures!==U.ParameterStructures.byName&&i.error(`Notification ${v.method} defines ${P.numberOfParams} params but received none.`),O();else if(Array.isArray(v.params)){let M=v.params;v.method===yi.type.method&&M.length===2&&Nf.is(M[0])?O({token:M[0],value:M[1]}):(P!==void 0&&(P.parameterStructures===U.ParameterStructures.byName&&i.error(`Notification ${v.method} defines parameters by name but received parameters by position`),P.numberOfParams!==v.params.length&&i.error(`Notification ${v.method} defines ${P.numberOfParams} params but received ${M.length} arguments`)),O(...M))}else P!==void 0&&P.parameterStructures===U.ParameterStructures.byPosition&&i.error(`Notification ${v.method} defines parameters by position but received parameters by name`),O(v.params);else g&&g(v.method,v.params)}catch(M){M.message?i.error(`Notification handler '${v.method}' failed with message: ${M.message}`):i.error(`Notification handler '${v.method}' failed unexpectedly.`)}else rt.fire(v)}function Pr(v){if(!v){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(v,null,4)}`);let P=v;if(We.string(P.id)||We.number(P.id)){let O=P.id,M=b.get(O);M&&M.reject(new Error("The received response has neither a result nor an error property."))}}function It(v){if(v!=null)switch(E){case he.Verbose:return JSON.stringify(v,null,4);case he.Compact:return JSON.stringify(v);default:return}}function ln(v){if(!(E===he.Off||!K))if(I===Bt.Text){let P;(E===he.Verbose||E===he.Compact)&&v.params&&(P=`Params: ${It(v.params)}

`),K.log(`Sending request '${v.method} - (${v.id})'.`,P)}else Ft("send-request",v)}function xr(v){if(!(E===he.Off||!K))if(I===Bt.Text){let P;(E===he.Verbose||E===he.Compact)&&(v.params?P=`Params: ${It(v.params)}

`:P=`No parameters provided.

`),K.log(`Sending notification '${v.method}'.`,P)}else Ft("send-notification",v)}function zt(v,P,O){if(!(E===he.Off||!K))if(I===Bt.Text){let M;(E===he.Verbose||E===he.Compact)&&(v.error&&v.error.data?M=`Error data: ${It(v.error.data)}

`:v.result?M=`Result: ${It(v.result)}

`:v.error===void 0&&(M=`No result returned.

`)),K.log(`Sending response '${P} - (${v.id})'. Processing request took ${Date.now()-O}ms`,M)}else Ft("send-response",v)}function Qn(v){if(!(E===he.Off||!K))if(I===Bt.Text){let P;(E===he.Verbose||E===he.Compact)&&v.params&&(P=`Params: ${It(v.params)}

`),K.log(`Received request '${v.method} - (${v.id})'.`,P)}else Ft("receive-request",v)}function Ln(v){if(!(E===he.Off||!K||v.method===Ka.type.method))if(I===Bt.Text){let P;(E===he.Verbose||E===he.Compact)&&(v.params?P=`Params: ${It(v.params)}

`:P=`No parameters provided.

`),K.log(`Received notification '${v.method}'.`,P)}else Ft("receive-notification",v)}function Kt(v,P){if(!(E===he.Off||!K))if(I===Bt.Text){let O;if((E===he.Verbose||E===he.Compact)&&(v.error&&v.error.data?O=`Error data: ${It(v.error.data)}

`:v.result?O=`Result: ${It(v.result)}

`:v.error===void 0&&(O=`No result returned.

`)),P){let M=v.error?` Request failed: ${v.error.message} (${v.error.code}).`:"";K.log(`Received response '${P.method} - (${v.id})' in ${Date.now()-P.timerStart}ms.${M}`,O)}else K.log(`Received response ${v.id} without active response promise.`,O)}else Ft("receive-response",v)}function Ft(v,P){if(!K||E===he.Off)return;let O={isLSPMessage:!0,type:v,message:P,timestamp:Date.now()};K.log(O)}function ze(){if(ut())throw new Mn(Ts.Closed,"Connection is closed.");if(lt())throw new Mn(Ts.Disposed,"Connection is disposed.")}function fi(){if(Ee())throw new Mn(Ts.AlreadyListening,"Connection is already listening")}function Pt(){if(!Ee())throw new Error("Call listen() first.")}function Vt(v){return v===void 0?null:v}function qr(v){if(v!==null)return v}function Jn(v){return v!=null&&!Array.isArray(v)&&typeof v=="object"}function Yn(v,P){switch(v){case U.ParameterStructures.auto:return Jn(P)?qr(P):[Vt(P)];case U.ParameterStructures.byName:if(!Jn(P))throw new Error("Received parameters by name but param is not an object literal.");return qr(P);case U.ParameterStructures.byPosition:return[Vt(P)];default:throw new Error(`Unknown parameter structure ${v.toString()}`)}}function Gt(v,P){let O,M=v.numberOfParams;switch(M){case 0:O=void 0;break;case 1:O=Yn(v.parameterStructures,P[0]);break;default:O=[];for(let le=0;le<P.length&&le<M;le++)O.push(Vt(P[le]));if(P.length<M)for(let le=P.length;le<M;le++)O.push(null);break}return O}let dn={sendNotification:(v,...P)=>{ze();let O,M;if(We.string(v)){O=v;let de=P[0],ve=0,be=U.ParameterStructures.auto;U.ParameterStructures.is(de)&&(ve=1,be=de);let ee=P.length,ge=ee-ve;switch(ge){case 0:M=void 0;break;case 1:M=Yn(be,P[ve]);break;default:if(be===U.ParameterStructures.byName)throw new Error(`Received ${ge} parameters for 'by Name' notification parameter structure.`);M=P.slice(ve,ee).map(te=>Vt(te));break}}else{let de=P;O=v.method,M=Gt(v,de)}let le={jsonrpc:u,method:O,params:M};return xr(le),e.write(le).catch(()=>i.error("Sending notification failed."))},onNotification:(v,P)=>{ze();let O;return We.func(v)?g=v:P&&(We.string(v)?(O=v,p.set(v,{type:void 0,handler:P})):(O=v.method,p.set(v.method,{type:v,handler:P}))),{dispose:()=>{O!==void 0?p.delete(O):g=void 0}}},onProgress:(v,P,O)=>{if(y.has(P))throw new Error(`Progress handler for token ${P} already registered`);return y.set(P,O),{dispose:()=>{y.delete(P)}}},sendProgress:(v,P,O)=>dn.sendNotification(yi.type,{token:P,value:O}),onUnhandledProgress:Tt.event,sendRequest:(v,...P)=>{ze(),Pt();let O,M,le;if(We.string(v)){O=v;let ee=P[0],ge=P[P.length-1],te=0,d=U.ParameterStructures.auto;U.ParameterStructures.is(ee)&&(te=1,d=ee);let R=P.length;Wa.CancellationToken.is(ge)&&(R=R-1,le=ge);let L=R-te;switch(L){case 0:M=void 0;break;case 1:M=Yn(d,P[te]);break;default:if(d===U.ParameterStructures.byName)throw new Error(`Received ${L} parameters for 'by Name' request parameter structure.`);M=P.slice(te,R).map(J=>Vt(J));break}}else{let ee=P;O=v.method,M=Gt(v,ee);let ge=v.numberOfParams;le=Wa.CancellationToken.is(ee[ge])?ee[ge]:void 0}let de=s++,ve;return le&&(ve=le.onCancellationRequested(()=>{let ee=Ut.sender.sendCancellation(dn,de);return ee===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${de}`),Promise.resolve()):ee.catch(()=>{i.log(`Sending cancellation messages for id ${de} failed`)})})),new Promise((ee,ge)=>{let te={jsonrpc:u,id:de,method:O,params:M},d=J=>{ee(J),Ut.sender.cleanup(de),ve?.dispose()},R=J=>{ge(J),Ut.sender.cleanup(de),ve?.dispose()},L={method:O,timerStart:Date.now(),resolve:d,reject:R};ln(te);try{e.write(te).catch(()=>i.error("Sending request failed."))}catch(J){L.reject(new U.ResponseError(U.ErrorCodes.MessageWriteError,J.message?J.message:"Unknown reason")),L=null}L&&b.set(de,L)})},onRequest:(v,P)=>{ze();let O=null;return za.is(v)?(O=void 0,l=v):We.string(v)?(O=null,P!==void 0&&(O=v,h.set(v,{handler:P,type:void 0}))):P!==void 0&&(O=v.method,h.set(v.method,{type:v,handler:P})),{dispose:()=>{O!==null&&(O!==void 0?h.delete(O):l=void 0)}}},hasPendingResponse:()=>b.size>0,trace:async(v,P,O)=>{let M=!1,le=Bt.Text;O!==void 0&&(We.boolean(O)?M=O:(M=O.sendNotification||!1,le=O.traceFormat||Bt.Text)),E=v,I=le,E===he.Off?K=void 0:K=P,M&&!ut()&&!lt()&&await dn.sendNotification(Lf.type,{value:he.toString(v)})},onError:De.event,onClose:Ct.event,onUnhandledNotification:rt.event,onDispose:an.event,end:()=>{e.end()},dispose:()=>{if(lt())return;Ne=Xt.Disposed,an.fire(void 0);let v=new U.ResponseError(U.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let P of b.values())P.reject(v);b=new Map,q=new Map,T=new Set,D=new Ff.LinkedMap,We.func(e.dispose)&&e.dispose(),We.func(t.dispose)&&t.dispose()},listen:()=>{ze(),fi(),Ne=Xt.Listening,t.listen(Bn)},inspect:()=>{(0,If.default)().console.log("inspect")}};return dn.onNotification(Ka.type,v=>{if(E===he.Off||!K)return;let P=E===he.Verbose||E===he.Compact;K.log(v.message,P?v.verbose:void 0)}),dn.onNotification(yi.type,v=>{let P=y.get(v.token);P?P(v.value):Tt.fire(v)}),dn}W.createMessageConnection=xv});var Ya=w(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.TraceFormat=S.TraceValues=S.Trace=S.ProgressType=S.ProgressToken=S.createMessageConnection=S.NullLogger=S.ConnectionOptions=S.ConnectionStrategy=S.WriteableStreamMessageWriter=S.AbstractMessageWriter=S.MessageWriter=S.ReadableStreamMessageReader=S.AbstractMessageReader=S.MessageReader=S.CancellationToken=S.CancellationTokenSource=S.Emitter=S.Event=S.Disposable=S.LRUCache=S.Touch=S.LinkedMap=S.ParameterStructures=S.NotificationType9=S.NotificationType8=S.NotificationType7=S.NotificationType6=S.NotificationType5=S.NotificationType4=S.NotificationType3=S.NotificationType2=S.NotificationType1=S.NotificationType0=S.NotificationType=S.ErrorCodes=S.ResponseError=S.RequestType9=S.RequestType8=S.RequestType7=S.RequestType6=S.RequestType5=S.RequestType4=S.RequestType3=S.RequestType2=S.RequestType1=S.RequestType0=S.RequestType=S.Message=S.RAL=void 0;S.CancellationStrategy=S.CancellationSenderStrategy=S.CancellationReceiverStrategy=S.ConnectionError=S.ConnectionErrors=S.LogTraceNotification=S.SetTraceNotification=void 0;var ye=Pa();Object.defineProperty(S,"Message",{enumerable:!0,get:function(){return ye.Message}});Object.defineProperty(S,"RequestType",{enumerable:!0,get:function(){return ye.RequestType}});Object.defineProperty(S,"RequestType0",{enumerable:!0,get:function(){return ye.RequestType0}});Object.defineProperty(S,"RequestType1",{enumerable:!0,get:function(){return ye.RequestType1}});Object.defineProperty(S,"RequestType2",{enumerable:!0,get:function(){return ye.RequestType2}});Object.defineProperty(S,"RequestType3",{enumerable:!0,get:function(){return ye.RequestType3}});Object.defineProperty(S,"RequestType4",{enumerable:!0,get:function(){return ye.RequestType4}});Object.defineProperty(S,"RequestType5",{enumerable:!0,get:function(){return ye.RequestType5}});Object.defineProperty(S,"RequestType6",{enumerable:!0,get:function(){return ye.RequestType6}});Object.defineProperty(S,"RequestType7",{enumerable:!0,get:function(){return ye.RequestType7}});Object.defineProperty(S,"RequestType8",{enumerable:!0,get:function(){return ye.RequestType8}});Object.defineProperty(S,"RequestType9",{enumerable:!0,get:function(){return ye.RequestType9}});Object.defineProperty(S,"ResponseError",{enumerable:!0,get:function(){return ye.ResponseError}});Object.defineProperty(S,"ErrorCodes",{enumerable:!0,get:function(){return ye.ErrorCodes}});Object.defineProperty(S,"NotificationType",{enumerable:!0,get:function(){return ye.NotificationType}});Object.defineProperty(S,"NotificationType0",{enumerable:!0,get:function(){return ye.NotificationType0}});Object.defineProperty(S,"NotificationType1",{enumerable:!0,get:function(){return ye.NotificationType1}});Object.defineProperty(S,"NotificationType2",{enumerable:!0,get:function(){return ye.NotificationType2}});Object.defineProperty(S,"NotificationType3",{enumerable:!0,get:function(){return ye.NotificationType3}});Object.defineProperty(S,"NotificationType4",{enumerable:!0,get:function(){return ye.NotificationType4}});Object.defineProperty(S,"NotificationType5",{enumerable:!0,get:function(){return ye.NotificationType5}});Object.defineProperty(S,"NotificationType6",{enumerable:!0,get:function(){return ye.NotificationType6}});Object.defineProperty(S,"NotificationType7",{enumerable:!0,get:function(){return ye.NotificationType7}});Object.defineProperty(S,"NotificationType8",{enumerable:!0,get:function(){return ye.NotificationType8}});Object.defineProperty(S,"NotificationType9",{enumerable:!0,get:function(){return ye.NotificationType9}});Object.defineProperty(S,"ParameterStructures",{enumerable:!0,get:function(){return ye.ParameterStructures}});var Xa=qa();Object.defineProperty(S,"LinkedMap",{enumerable:!0,get:function(){return Xa.LinkedMap}});Object.defineProperty(S,"LRUCache",{enumerable:!0,get:function(){return Xa.LRUCache}});Object.defineProperty(S,"Touch",{enumerable:!0,get:function(){return Xa.Touch}});var qv=Zo();Object.defineProperty(S,"Disposable",{enumerable:!0,get:function(){return qv.Disposable}});var jf=Fr();Object.defineProperty(S,"Event",{enumerable:!0,get:function(){return jf.Event}});Object.defineProperty(S,"Emitter",{enumerable:!0,get:function(){return jf.Emitter}});var $f=Fa();Object.defineProperty(S,"CancellationTokenSource",{enumerable:!0,get:function(){return $f.CancellationTokenSource}});Object.defineProperty(S,"CancellationToken",{enumerable:!0,get:function(){return $f.CancellationToken}});var Qa=Pf();Object.defineProperty(S,"MessageReader",{enumerable:!0,get:function(){return Qa.MessageReader}});Object.defineProperty(S,"AbstractMessageReader",{enumerable:!0,get:function(){return Qa.AbstractMessageReader}});Object.defineProperty(S,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Qa.ReadableStreamMessageReader}});var Ja=Of();Object.defineProperty(S,"MessageWriter",{enumerable:!0,get:function(){return Ja.MessageWriter}});Object.defineProperty(S,"AbstractMessageWriter",{enumerable:!0,get:function(){return Ja.AbstractMessageWriter}});Object.defineProperty(S,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Ja.WriteableStreamMessageWriter}});var st=Af();Object.defineProperty(S,"ConnectionStrategy",{enumerable:!0,get:function(){return st.ConnectionStrategy}});Object.defineProperty(S,"ConnectionOptions",{enumerable:!0,get:function(){return st.ConnectionOptions}});Object.defineProperty(S,"NullLogger",{enumerable:!0,get:function(){return st.NullLogger}});Object.defineProperty(S,"createMessageConnection",{enumerable:!0,get:function(){return st.createMessageConnection}});Object.defineProperty(S,"ProgressToken",{enumerable:!0,get:function(){return st.ProgressToken}});Object.defineProperty(S,"ProgressType",{enumerable:!0,get:function(){return st.ProgressType}});Object.defineProperty(S,"Trace",{enumerable:!0,get:function(){return st.Trace}});Object.defineProperty(S,"TraceValues",{enumerable:!0,get:function(){return st.TraceValues}});Object.defineProperty(S,"TraceFormat",{enumerable:!0,get:function(){return st.TraceFormat}});Object.defineProperty(S,"SetTraceNotification",{enumerable:!0,get:function(){return st.SetTraceNotification}});Object.defineProperty(S,"LogTraceNotification",{enumerable:!0,get:function(){return st.LogTraceNotification}});Object.defineProperty(S,"ConnectionErrors",{enumerable:!0,get:function(){return st.ConnectionErrors}});Object.defineProperty(S,"ConnectionError",{enumerable:!0,get:function(){return st.ConnectionError}});Object.defineProperty(S,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return st.CancellationReceiverStrategy}});Object.defineProperty(S,"CancellationSenderStrategy",{enumerable:!0,get:function(){return st.CancellationSenderStrategy}});Object.defineProperty(S,"CancellationStrategy",{enumerable:!0,get:function(){return st.CancellationStrategy}});var Ev=Dn();S.RAL=Ev.default});var sr=w(ae=>{"use strict";var kv=ae&&ae.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ov=ae&&ae.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&kv(e,t,n)};Object.defineProperty(ae,"__esModule",{value:!0});ae.createMessageConnection=ae.createServerSocketTransport=ae.createClientSocketTransport=ae.createServerPipeTransport=ae.createClientPipeTransport=ae.generateRandomPipeName=ae.StreamMessageWriter=ae.StreamMessageReader=ae.SocketMessageWriter=ae.SocketMessageReader=ae.IPCMessageWriter=ae.IPCMessageReader=void 0;var Lr=Rf();Lr.default.install();var hn=Ya(),Hf=require("path"),Iv=require("os"),Fv=require("crypto"),qs=require("net");Ov(Ya(),ae);var Za=class extends hn.AbstractMessageReader{constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),hn.Disposable.create(()=>this.process.off("message",e))}};ae.IPCMessageReader=Za;var ec=class extends hn.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ae.IPCMessageWriter=ec;var rr=class extends hn.ReadableStreamMessageReader{constructor(e,n="utf-8"){super((0,Lr.default)().stream.asReadableStream(e),n)}};ae.SocketMessageReader=rr;var ir=class extends hn.WriteableStreamMessageWriter{constructor(e,n){super((0,Lr.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ae.SocketMessageWriter=ir;var Ps=class extends hn.ReadableStreamMessageReader{constructor(e,n){super((0,Lr.default)().stream.asReadableStream(e),n)}};ae.StreamMessageReader=Ps;var xs=class extends hn.WriteableStreamMessageWriter{constructor(e,n){super((0,Lr.default)().stream.asWritableStream(e),n)}};ae.StreamMessageWriter=xs;var Wf=process.env.XDG_RUNTIME_DIR,Nv=new Map([["linux",107],["darwin",103]]);function Lv(){let t=(0,Fv.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;Wf?e=Hf.join(Wf,`vscode-ipc-${t}.sock`):e=Hf.join(Iv.tmpdir(),`vscode-${t}.sock`);let n=Nv.get(process.platform);return n!==void 0&&e.length>=n&&(0,Lr.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}ae.generateRandomPipeName=Lv;function Mv(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let o=(0,qs.createServer)(a=>{o.close(),n([new rr(a,e),new ir(a,e)])});o.on("error",s),o.listen(t,()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}ae.createClientPipeTransport=Mv;function Av(t,e="utf-8"){let n=(0,qs.createConnection)(t);return[new rr(n,e),new ir(n,e)]}ae.createServerPipeTransport=Av;function jv(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let o=(0,qs.createServer)(a=>{o.close(),n([new rr(a,e),new ir(a,e)])});o.on("error",s),o.listen(t,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}ae.createClientSocketTransport=jv;function $v(t,e="utf-8"){let n=(0,qs.createConnection)(t,"127.0.0.1");return[new rr(n,e),new ir(n,e)]}ae.createServerSocketTransport=$v;function Hv(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function Wv(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function Uv(t,e,n,r){n||(n=hn.NullLogger);let i=Hv(t)?new Ps(t):t,s=Wv(e)?new xs(e):e;return hn.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,hn.createMessageConnection)(i,s,n,r)}ae.createMessageConnection=Uv});var tc=w((Vw,Uf)=>{"use strict";Uf.exports=sr()});var As={};Xo(As,{AnnotatedTextEdit:()=>Sn,ChangeAnnotation:()=>or,ChangeAnnotationIdentifier:()=>Je,CodeAction:()=>Nc,CodeActionContext:()=>Fc,CodeActionKind:()=>Ic,CodeActionTriggerKind:()=>Ti,CodeDescription:()=>dc,CodeLens:()=>Lc,Color:()=>Os,ColorInformation:()=>sc,ColorPresentation:()=>oc,Command:()=>ar,CompletionItem:()=>Dc,CompletionItemKind:()=>gc,CompletionItemLabelDetails:()=>_c,CompletionItemTag:()=>vc,CompletionList:()=>Rc,CreateFile:()=>Mr,DeleteFile:()=>jr,Diagnostic:()=>Ri,DiagnosticRelatedInformation:()=>Is,DiagnosticSeverity:()=>uc,DiagnosticTag:()=>lc,DocumentHighlight:()=>Pc,DocumentHighlightKind:()=>Tc,DocumentLink:()=>Ac,DocumentSymbol:()=>Oc,DocumentUri:()=>nc,EOL:()=>Kv,FoldingRange:()=>cc,FoldingRangeKind:()=>ac,FormattingOptions:()=>Mc,Hover:()=>bc,InlayHint:()=>Gc,InlayHintKind:()=>Ls,InlayHintLabelPart:()=>Ms,InlineValueContext:()=>Vc,InlineValueEvaluatableExpression:()=>Kc,InlineValueText:()=>Uc,InlineValueVariableLookup:()=>zc,InsertReplaceEdit:()=>yc,InsertTextFormat:()=>mc,InsertTextMode:()=>Cc,Location:()=>Di,LocationLink:()=>ic,MarkedString:()=>Si,MarkupContent:()=>$r,MarkupKind:()=>Ns,OptionalVersionedTextDocumentIdentifier:()=>wi,ParameterInformation:()=>wc,Position:()=>Lt,Range:()=>Oe,RenameFile:()=>Ar,SelectionRange:()=>jc,SemanticTokenModifiers:()=>Hc,SemanticTokenTypes:()=>$c,SemanticTokens:()=>Wc,SignatureInformation:()=>Sc,SymbolInformation:()=>Ec,SymbolKind:()=>xc,SymbolTag:()=>qc,TextDocument:()=>Xc,TextDocumentEdit:()=>bi,TextDocumentIdentifier:()=>fc,TextDocumentItem:()=>pc,TextEdit:()=>pn,URI:()=>ks,VersionedTextDocumentIdentifier:()=>hc,WorkspaceChange:()=>zv,WorkspaceEdit:()=>Fs,WorkspaceFolder:()=>Bc,WorkspaceSymbol:()=>kc,integer:()=>rc,uinteger:()=>_i});var nc,ks,rc,_i,Lt,Oe,Di,ic,Os,sc,oc,ac,cc,Is,uc,lc,dc,Ri,ar,pn,or,Je,Sn,bi,Mr,Ar,jr,Fs,Es,zf,zv,fc,hc,wi,pc,Ns,$r,gc,mc,vc,yc,Cc,_c,Dc,Rc,Si,bc,wc,Sc,Tc,Pc,xc,qc,Ec,kc,Oc,Ic,Ti,Fc,Nc,Lc,Mc,Ac,jc,$c,Hc,Wc,Uc,zc,Kc,Vc,Ls,Ms,Gc,Bc,Kv,Xc,Vv,_,js=Jm(()=>{"use strict";(function(t){function e(n){return typeof n=="string"}t.is=e})(nc||(nc={}));(function(t){function e(n){return typeof n=="string"}t.is=e})(ks||(ks={}));(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}t.is=e})(rc||(rc={}));(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}t.is=e})(_i||(_i={}));(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=_i.MAX_VALUE),i===Number.MAX_VALUE&&(i=_i.MAX_VALUE),{line:r,character:i}}t.create=e;function n(r){var i=r;return _.objectLiteral(i)&&_.uinteger(i.line)&&_.uinteger(i.character)}t.is=n})(Lt||(Lt={}));(function(t){function e(r,i,s,o){if(_.uinteger(r)&&_.uinteger(i)&&_.uinteger(s)&&_.uinteger(o))return{start:Lt.create(r,i),end:Lt.create(s,o)};if(Lt.is(r)&&Lt.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments[".concat(r,", ").concat(i,", ").concat(s,", ").concat(o,"]"))}t.create=e;function n(r){var i=r;return _.objectLiteral(i)&&Lt.is(i.start)&&Lt.is(i.end)}t.is=n})(Oe||(Oe={}));(function(t){function e(r,i){return{uri:r,range:i}}t.create=e;function n(r){var i=r;return _.objectLiteral(i)&&Oe.is(i.range)&&(_.string(i.uri)||_.undefined(i.uri))}t.is=n})(Di||(Di={}));(function(t){function e(r,i,s,o){return{targetUri:r,targetRange:i,targetSelectionRange:s,originSelectionRange:o}}t.create=e;function n(r){var i=r;return _.objectLiteral(i)&&Oe.is(i.targetRange)&&_.string(i.targetUri)&&Oe.is(i.targetSelectionRange)&&(Oe.is(i.originSelectionRange)||_.undefined(i.originSelectionRange))}t.is=n})(ic||(ic={}));(function(t){function e(r,i,s,o){return{red:r,green:i,blue:s,alpha:o}}t.create=e;function n(r){var i=r;return _.objectLiteral(i)&&_.numberRange(i.red,0,1)&&_.numberRange(i.green,0,1)&&_.numberRange(i.blue,0,1)&&_.numberRange(i.alpha,0,1)}t.is=n})(Os||(Os={}));(function(t){function e(r,i){return{range:r,color:i}}t.create=e;function n(r){var i=r;return _.objectLiteral(i)&&Oe.is(i.range)&&Os.is(i.color)}t.is=n})(sc||(sc={}));(function(t){function e(r,i,s){return{label:r,textEdit:i,additionalTextEdits:s}}t.create=e;function n(r){var i=r;return _.objectLiteral(i)&&_.string(i.label)&&(_.undefined(i.textEdit)||pn.is(i))&&(_.undefined(i.additionalTextEdits)||_.typedArray(i.additionalTextEdits,pn.is))}t.is=n})(oc||(oc={}));(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(ac||(ac={}));(function(t){function e(r,i,s,o,a,u){var l={startLine:r,endLine:i};return _.defined(s)&&(l.startCharacter=s),_.defined(o)&&(l.endCharacter=o),_.defined(a)&&(l.kind=a),_.defined(u)&&(l.collapsedText=u),l}t.create=e;function n(r){var i=r;return _.objectLiteral(i)&&_.uinteger(i.startLine)&&_.uinteger(i.startLine)&&(_.undefined(i.startCharacter)||_.uinteger(i.startCharacter))&&(_.undefined(i.endCharacter)||_.uinteger(i.endCharacter))&&(_.undefined(i.kind)||_.string(i.kind))}t.is=n})(cc||(cc={}));(function(t){function e(r,i){return{location:r,message:i}}t.create=e;function n(r){var i=r;return _.defined(i)&&Di.is(i.location)&&_.string(i.message)}t.is=n})(Is||(Is={}));(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(uc||(uc={}));(function(t){t.Unnecessary=1,t.Deprecated=2})(lc||(lc={}));(function(t){function e(n){var r=n;return _.objectLiteral(r)&&_.string(r.href)}t.is=e})(dc||(dc={}));(function(t){function e(r,i,s,o,a,u){var l={range:r,message:i};return _.defined(s)&&(l.severity=s),_.defined(o)&&(l.code=o),_.defined(a)&&(l.source=a),_.defined(u)&&(l.relatedInformation=u),l}t.create=e;function n(r){var i,s=r;return _.defined(s)&&Oe.is(s.range)&&_.string(s.message)&&(_.number(s.severity)||_.undefined(s.severity))&&(_.integer(s.code)||_.string(s.code)||_.undefined(s.code))&&(_.undefined(s.codeDescription)||_.string((i=s.codeDescription)===null||i===void 0?void 0:i.href))&&(_.string(s.source)||_.undefined(s.source))&&(_.undefined(s.relatedInformation)||_.typedArray(s.relatedInformation,Is.is))}t.is=n})(Ri||(Ri={}));(function(t){function e(r,i){for(var s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];var a={title:r,command:i};return _.defined(s)&&s.length>0&&(a.arguments=s),a}t.create=e;function n(r){var i=r;return _.defined(i)&&_.string(i.title)&&_.string(i.command)}t.is=n})(ar||(ar={}));(function(t){function e(s,o){return{range:s,newText:o}}t.replace=e;function n(s,o){return{range:{start:s,end:s},newText:o}}t.insert=n;function r(s){return{range:s,newText:""}}t.del=r;function i(s){var o=s;return _.objectLiteral(o)&&_.string(o.newText)&&Oe.is(o.range)}t.is=i})(pn||(pn={}));(function(t){function e(r,i,s){var o={label:r};return i!==void 0&&(o.needsConfirmation=i),s!==void 0&&(o.description=s),o}t.create=e;function n(r){var i=r;return _.objectLiteral(i)&&_.string(i.label)&&(_.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(_.string(i.description)||i.description===void 0)}t.is=n})(or||(or={}));(function(t){function e(n){var r=n;return _.string(r)}t.is=e})(Je||(Je={}));(function(t){function e(s,o,a){return{range:s,newText:o,annotationId:a}}t.replace=e;function n(s,o,a){return{range:{start:s,end:s},newText:o,annotationId:a}}t.insert=n;function r(s,o){return{range:s,newText:"",annotationId:o}}t.del=r;function i(s){var o=s;return pn.is(o)&&(or.is(o.annotationId)||Je.is(o.annotationId))}t.is=i})(Sn||(Sn={}));(function(t){function e(r,i){return{textDocument:r,edits:i}}t.create=e;function n(r){var i=r;return _.defined(i)&&wi.is(i.textDocument)&&Array.isArray(i.edits)}t.is=n})(bi||(bi={}));(function(t){function e(r,i,s){var o={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&_.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||_.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||_.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Je.is(i.annotationId))}t.is=n})(Mr||(Mr={}));(function(t){function e(r,i,s,o){var a={kind:"rename",oldUri:r,newUri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(a.options=s),o!==void 0&&(a.annotationId=o),a}t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&_.string(i.oldUri)&&_.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||_.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||_.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Je.is(i.annotationId))}t.is=n})(Ar||(Ar={}));(function(t){function e(r,i,s){var o={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&_.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||_.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||_.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Je.is(i.annotationId))}t.is=n})(jr||(jr={}));(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return _.string(i.kind)?Mr.is(i)||Ar.is(i)||jr.is(i):bi.is(i)}))}t.is=e})(Fs||(Fs={}));Es=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return t.prototype.insert=function(e,n,r){var i,s;if(r===void 0?i=pn.insert(e,n):Je.is(r)?(s=r,i=Sn.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),i=Sn.insert(e,n,s)),this.edits.push(i),s!==void 0)return s},t.prototype.replace=function(e,n,r){var i,s;if(r===void 0?i=pn.replace(e,n):Je.is(r)?(s=r,i=Sn.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),i=Sn.replace(e,n,s)),this.edits.push(i),s!==void 0)return s},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=pn.del(e):Je.is(n)?(i=n,r=Sn.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=Sn.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),zf=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(Je.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id ".concat(r," is already in use."));if(n===void 0)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),zv=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new zf(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(bi.is(r)){var i=new Es(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new Es(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(wi.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],s={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(s),r=new Es(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new Es(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new zf,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;or.is(n)||Je.is(n)?i=n:r=n;var s,o;if(i===void 0?s=Mr.create(e,r):(o=Je.is(i)?i:this._changeAnnotations.manage(i),s=Mr.create(e,r,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s;or.is(r)||Je.is(r)?s=r:i=r;var o,a;if(s===void 0?o=Ar.create(e,n,i):(a=Je.is(s)?s:this._changeAnnotations.manage(s),o=Ar.create(e,n,i,a)),this._workspaceEdit.documentChanges.push(o),a!==void 0)return a},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;or.is(n)||Je.is(n)?i=n:r=n;var s,o;if(i===void 0?s=jr.create(e,r):(o=Je.is(i)?i:this._changeAnnotations.manage(i),s=jr.create(e,r,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o},t}();(function(t){function e(r){return{uri:r}}t.create=e;function n(r){var i=r;return _.defined(i)&&_.string(i.uri)}t.is=n})(fc||(fc={}));(function(t){function e(r,i){return{uri:r,version:i}}t.create=e;function n(r){var i=r;return _.defined(i)&&_.string(i.uri)&&_.integer(i.version)}t.is=n})(hc||(hc={}));(function(t){function e(r,i){return{uri:r,version:i}}t.create=e;function n(r){var i=r;return _.defined(i)&&_.string(i.uri)&&(i.version===null||_.integer(i.version))}t.is=n})(wi||(wi={}));(function(t){function e(r,i,s,o){return{uri:r,languageId:i,version:s,text:o}}t.create=e;function n(r){var i=r;return _.defined(i)&&_.string(i.uri)&&_.string(i.languageId)&&_.integer(i.version)&&_.string(i.text)}t.is=n})(pc||(pc={}));(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(n){var r=n;return r===t.PlainText||r===t.Markdown}t.is=e})(Ns||(Ns={}));(function(t){function e(n){var r=n;return _.objectLiteral(n)&&Ns.is(r.kind)&&_.string(r.value)}t.is=e})($r||($r={}));(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(gc||(gc={}));(function(t){t.PlainText=1,t.Snippet=2})(mc||(mc={}));(function(t){t.Deprecated=1})(vc||(vc={}));(function(t){function e(r,i,s){return{newText:r,insert:i,replace:s}}t.create=e;function n(r){var i=r;return i&&_.string(i.newText)&&Oe.is(i.insert)&&Oe.is(i.replace)}t.is=n})(yc||(yc={}));(function(t){t.asIs=1,t.adjustIndentation=2})(Cc||(Cc={}));(function(t){function e(n){var r=n;return r&&(_.string(r.detail)||r.detail===void 0)&&(_.string(r.description)||r.description===void 0)}t.is=e})(_c||(_c={}));(function(t){function e(n){return{label:n}}t.create=e})(Dc||(Dc={}));(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}t.create=e})(Rc||(Rc={}));(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=e;function n(r){var i=r;return _.string(i)||_.objectLiteral(i)&&_.string(i.language)&&_.string(i.value)}t.is=n})(Si||(Si={}));(function(t){function e(n){var r=n;return!!r&&_.objectLiteral(r)&&($r.is(r.contents)||Si.is(r.contents)||_.typedArray(r.contents,Si.is))&&(n.range===void 0||Oe.is(n.range))}t.is=e})(bc||(bc={}));(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}t.create=e})(wc||(wc={}));(function(t){function e(n,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var o={label:n};return _.defined(r)&&(o.documentation=r),_.defined(i)?o.parameters=i:o.parameters=[],o}t.create=e})(Sc||(Sc={}));(function(t){t.Text=1,t.Read=2,t.Write=3})(Tc||(Tc={}));(function(t){function e(n,r){var i={range:n};return _.number(r)&&(i.kind=r),i}t.create=e})(Pc||(Pc={}));(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(xc||(xc={}));(function(t){t.Deprecated=1})(qc||(qc={}));(function(t){function e(n,r,i,s,o){var a={name:n,kind:r,location:{uri:s,range:i}};return o&&(a.containerName=o),a}t.create=e})(Ec||(Ec={}));(function(t){function e(n,r,i,s){return s!==void 0?{name:n,kind:r,location:{uri:i,range:s}}:{name:n,kind:r,location:{uri:i}}}t.create=e})(kc||(kc={}));(function(t){function e(r,i,s,o,a,u){var l={name:r,detail:i,kind:s,range:o,selectionRange:a};return u!==void 0&&(l.children=u),l}t.create=e;function n(r){var i=r;return i&&_.string(i.name)&&_.number(i.kind)&&Oe.is(i.range)&&Oe.is(i.selectionRange)&&(i.detail===void 0||_.string(i.detail))&&(i.deprecated===void 0||_.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}t.is=n})(Oc||(Oc={}));(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Ic||(Ic={}));(function(t){t.Invoked=1,t.Automatic=2})(Ti||(Ti={}));(function(t){function e(r,i,s){var o={diagnostics:r};return i!=null&&(o.only=i),s!=null&&(o.triggerKind=s),o}t.create=e;function n(r){var i=r;return _.defined(i)&&_.typedArray(i.diagnostics,Ri.is)&&(i.only===void 0||_.typedArray(i.only,_.string))&&(i.triggerKind===void 0||i.triggerKind===Ti.Invoked||i.triggerKind===Ti.Automatic)}t.is=n})(Fc||(Fc={}));(function(t){function e(r,i,s){var o={title:r},a=!0;return typeof i=="string"?(a=!1,o.kind=i):ar.is(i)?o.command=i:o.edit=i,a&&s!==void 0&&(o.kind=s),o}t.create=e;function n(r){var i=r;return i&&_.string(i.title)&&(i.diagnostics===void 0||_.typedArray(i.diagnostics,Ri.is))&&(i.kind===void 0||_.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||ar.is(i.command))&&(i.isPreferred===void 0||_.boolean(i.isPreferred))&&(i.edit===void 0||Fs.is(i.edit))}t.is=n})(Nc||(Nc={}));(function(t){function e(r,i){var s={range:r};return _.defined(i)&&(s.data=i),s}t.create=e;function n(r){var i=r;return _.defined(i)&&Oe.is(i.range)&&(_.undefined(i.command)||ar.is(i.command))}t.is=n})(Lc||(Lc={}));(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}t.create=e;function n(r){var i=r;return _.defined(i)&&_.uinteger(i.tabSize)&&_.boolean(i.insertSpaces)}t.is=n})(Mc||(Mc={}));(function(t){function e(r,i,s){return{range:r,target:i,data:s}}t.create=e;function n(r){var i=r;return _.defined(i)&&Oe.is(i.range)&&(_.undefined(i.target)||_.string(i.target))}t.is=n})(Ac||(Ac={}));(function(t){function e(r,i){return{range:r,parent:i}}t.create=e;function n(r){var i=r;return _.objectLiteral(i)&&Oe.is(i.range)&&(i.parent===void 0||t.is(i.parent))}t.is=n})(jc||(jc={}));(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})($c||($c={}));(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Hc||(Hc={}));(function(t){function e(n){var r=n;return _.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}t.is=e})(Wc||(Wc={}));(function(t){function e(r,i){return{range:r,text:i}}t.create=e;function n(r){var i=r;return i!=null&&Oe.is(i.range)&&_.string(i.text)}t.is=n})(Uc||(Uc={}));(function(t){function e(r,i,s){return{range:r,variableName:i,caseSensitiveLookup:s}}t.create=e;function n(r){var i=r;return i!=null&&Oe.is(i.range)&&_.boolean(i.caseSensitiveLookup)&&(_.string(i.variableName)||i.variableName===void 0)}t.is=n})(zc||(zc={}));(function(t){function e(r,i){return{range:r,expression:i}}t.create=e;function n(r){var i=r;return i!=null&&Oe.is(i.range)&&(_.string(i.expression)||i.expression===void 0)}t.is=n})(Kc||(Kc={}));(function(t){function e(r,i){return{frameId:r,stoppedLocation:i}}t.create=e;function n(r){var i=r;return _.defined(i)&&Oe.is(r.stoppedLocation)}t.is=n})(Vc||(Vc={}));(function(t){t.Type=1,t.Parameter=2;function e(n){return n===1||n===2}t.is=e})(Ls||(Ls={}));(function(t){function e(r){return{value:r}}t.create=e;function n(r){var i=r;return _.objectLiteral(i)&&(i.tooltip===void 0||_.string(i.tooltip)||$r.is(i.tooltip))&&(i.location===void 0||Di.is(i.location))&&(i.command===void 0||ar.is(i.command))}t.is=n})(Ms||(Ms={}));(function(t){function e(r,i,s){var o={position:r,label:i};return s!==void 0&&(o.kind=s),o}t.create=e;function n(r){var i=r;return _.objectLiteral(i)&&Lt.is(i.position)&&(_.string(i.label)||_.typedArray(i.label,Ms.is))&&(i.kind===void 0||Ls.is(i.kind))&&i.textEdits===void 0||_.typedArray(i.textEdits,pn.is)&&(i.tooltip===void 0||_.string(i.tooltip)||$r.is(i.tooltip))&&(i.paddingLeft===void 0||_.boolean(i.paddingLeft))&&(i.paddingRight===void 0||_.boolean(i.paddingRight))}t.is=n})(Gc||(Gc={}));(function(t){function e(n){var r=n;return _.objectLiteral(r)&&ks.is(r.uri)&&_.string(r.name)}t.is=e})(Bc||(Bc={}));Kv=[`
`,`\r
`,"\r"];(function(t){function e(s,o,a,u){return new Vv(s,o,a,u)}t.create=e;function n(s){var o=s;return!!(_.defined(o)&&_.string(o.uri)&&(_.undefined(o.languageId)||_.string(o.languageId))&&_.uinteger(o.lineCount)&&_.func(o.getText)&&_.func(o.positionAt)&&_.func(o.offsetAt))}t.is=n;function r(s,o){for(var a=s.getText(),u=i(o,function(m,D){var b=m.range.start.line-D.range.start.line;return b===0?m.range.start.character-D.range.start.character:b}),l=a.length,h=u.length-1;h>=0;h--){var g=u[h],p=s.offsetAt(g.range.start),y=s.offsetAt(g.range.end);if(y<=l)a=a.substring(0,p)+g.newText+a.substring(y,a.length);else throw new Error("Overlapping edit");l=p}return a}t.applyEdits=r;function i(s,o){if(s.length<=1)return s;var a=s.length/2|0,u=s.slice(0,a),l=s.slice(a);i(u,o),i(l,o);for(var h=0,g=0,p=0;h<u.length&&g<l.length;){var y=o(u[h],l[g]);y<=0?s[p++]=u[h++]:s[p++]=l[g++]}for(;h<u.length;)s[p++]=u[h++];for(;g<l.length;)s[p++]=l[g++];return s}})(Xc||(Xc={}));Vv=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var s=n.charAt(i);r=s==="\r"||s===`
`,s==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return Lt.create(0,e);for(;r<i;){var s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}var o=r-1;return Lt.create(o,e-n[o])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}();(function(t){var e=Object.prototype.toString;function n(y){return typeof y<"u"}t.defined=n;function r(y){return typeof y>"u"}t.undefined=r;function i(y){return y===!0||y===!1}t.boolean=i;function s(y){return e.call(y)==="[object String]"}t.string=s;function o(y){return e.call(y)==="[object Number]"}t.number=o;function a(y,m,D){return e.call(y)==="[object Number]"&&m<=y&&y<=D}t.numberRange=a;function u(y){return e.call(y)==="[object Number]"&&-2147483648<=y&&y<=2147483647}t.integer=u;function l(y){return e.call(y)==="[object Number]"&&0<=y&&y<=2147483647}t.uinteger=l;function h(y){return e.call(y)==="[object Function]"}t.func=h;function g(y){return y!==null&&typeof y=="object"}t.objectLiteral=g;function p(y,m){return Array.isArray(y)&&y.every(m)}t.typedArray=p})(_||(_={}))});var we=w(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.ProtocolNotificationType=ht.ProtocolNotificationType0=ht.ProtocolRequestType=ht.ProtocolRequestType0=ht.RegistrationType=ht.MessageDirection=void 0;var Hr=sr(),Gv;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(Gv=ht.MessageDirection||(ht.MessageDirection={}));var Qc=class{constructor(e){this.method=e}};ht.RegistrationType=Qc;var Jc=class extends Hr.RequestType0{constructor(e){super(e)}};ht.ProtocolRequestType0=Jc;var Yc=class extends Hr.RequestType{constructor(e){super(e,Hr.ParameterStructures.byName)}};ht.ProtocolRequestType=Yc;var Zc=class extends Hr.NotificationType0{constructor(e){super(e)}};ht.ProtocolNotificationType0=Zc;var eu=class extends Hr.NotificationType{constructor(e){super(e,Hr.ParameterStructures.byName)}};ht.ProtocolNotificationType=eu});var $s=w(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.objectLiteral=Le.typedArray=Le.stringArray=Le.array=Le.func=Le.error=Le.number=Le.string=Le.boolean=void 0;function Bv(t){return t===!0||t===!1}Le.boolean=Bv;function Kf(t){return typeof t=="string"||t instanceof String}Le.string=Kf;function Xv(t){return typeof t=="number"||t instanceof Number}Le.number=Xv;function Qv(t){return t instanceof Error}Le.error=Qv;function Jv(t){return typeof t=="function"}Le.func=Jv;function Vf(t){return Array.isArray(t)}Le.array=Vf;function Yv(t){return Vf(t)&&t.every(e=>Kf(e))}Le.stringArray=Yv;function Zv(t,e){return Array.isArray(t)&&t.every(e)}Le.typedArray=Zv;function ey(t){return t!==null&&typeof t=="object"}Le.objectLiteral=ey});var Bf=w(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.ImplementationRequest=void 0;var Gf=we(),ty;(function(t){t.method="textDocument/implementation",t.messageDirection=Gf.MessageDirection.clientToServer,t.type=new Gf.ProtocolRequestType(t.method)})(ty=Pi.ImplementationRequest||(Pi.ImplementationRequest={}))});var Qf=w(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.TypeDefinitionRequest=void 0;var Xf=we(),ny;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=Xf.MessageDirection.clientToServer,t.type=new Xf.ProtocolRequestType(t.method)})(ny=xi.TypeDefinitionRequest||(xi.TypeDefinitionRequest={}))});var Jf=w(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.DidChangeWorkspaceFoldersNotification=An.WorkspaceFoldersRequest=void 0;var Hs=we(),ry;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=Hs.MessageDirection.serverToClient,t.type=new Hs.ProtocolRequestType0(t.method)})(ry=An.WorkspaceFoldersRequest||(An.WorkspaceFoldersRequest={}));var iy;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=Hs.MessageDirection.clientToServer,t.type=new Hs.ProtocolNotificationType(t.method)})(iy=An.DidChangeWorkspaceFoldersNotification||(An.DidChangeWorkspaceFoldersNotification={}))});var Zf=w(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.ConfigurationRequest=void 0;var Yf=we(),sy;(function(t){t.method="workspace/configuration",t.messageDirection=Yf.MessageDirection.serverToClient,t.type=new Yf.ProtocolRequestType(t.method)})(sy=qi.ConfigurationRequest||(qi.ConfigurationRequest={}))});var eh=w(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.ColorPresentationRequest=jn.DocumentColorRequest=void 0;var Ws=we(),oy;(function(t){t.method="textDocument/documentColor",t.messageDirection=Ws.MessageDirection.clientToServer,t.type=new Ws.ProtocolRequestType(t.method)})(oy=jn.DocumentColorRequest||(jn.DocumentColorRequest={}));var ay;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=Ws.MessageDirection.clientToServer,t.type=new Ws.ProtocolRequestType(t.method)})(ay=jn.ColorPresentationRequest||(jn.ColorPresentationRequest={}))});var nh=w(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.FoldingRangeRequest=void 0;var th=we(),cy;(function(t){t.method="textDocument/foldingRange",t.messageDirection=th.MessageDirection.clientToServer,t.type=new th.ProtocolRequestType(t.method)})(cy=Ei.FoldingRangeRequest||(Ei.FoldingRangeRequest={}))});var ih=w(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.DeclarationRequest=void 0;var rh=we(),uy;(function(t){t.method="textDocument/declaration",t.messageDirection=rh.MessageDirection.clientToServer,t.type=new rh.ProtocolRequestType(t.method)})(uy=ki.DeclarationRequest||(ki.DeclarationRequest={}))});var oh=w(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.SelectionRangeRequest=void 0;var sh=we(),ly;(function(t){t.method="textDocument/selectionRange",t.messageDirection=sh.MessageDirection.clientToServer,t.type=new sh.ProtocolRequestType(t.method)})(ly=Oi.SelectionRangeRequest||(Oi.SelectionRangeRequest={}))});var ah=w(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.WorkDoneProgressCancelNotification=Qt.WorkDoneProgressCreateRequest=Qt.WorkDoneProgress=void 0;var dy=sr(),Us=we(),fy;(function(t){t.type=new dy.ProgressType;function e(n){return n===t.type}t.is=e})(fy=Qt.WorkDoneProgress||(Qt.WorkDoneProgress={}));var hy;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=Us.MessageDirection.serverToClient,t.type=new Us.ProtocolRequestType(t.method)})(hy=Qt.WorkDoneProgressCreateRequest||(Qt.WorkDoneProgressCreateRequest={}));var py;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=Us.MessageDirection.clientToServer,t.type=new Us.ProtocolNotificationType(t.method)})(py=Qt.WorkDoneProgressCancelNotification||(Qt.WorkDoneProgressCancelNotification={}))});var ch=w(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.CallHierarchyOutgoingCallsRequest=Jt.CallHierarchyIncomingCallsRequest=Jt.CallHierarchyPrepareRequest=void 0;var Wr=we(),gy;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=Wr.MessageDirection.clientToServer,t.type=new Wr.ProtocolRequestType(t.method)})(gy=Jt.CallHierarchyPrepareRequest||(Jt.CallHierarchyPrepareRequest={}));var my;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=Wr.MessageDirection.clientToServer,t.type=new Wr.ProtocolRequestType(t.method)})(my=Jt.CallHierarchyIncomingCallsRequest||(Jt.CallHierarchyIncomingCallsRequest={}));var vy;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=Wr.MessageDirection.clientToServer,t.type=new Wr.ProtocolRequestType(t.method)})(vy=Jt.CallHierarchyOutgoingCallsRequest||(Jt.CallHierarchyOutgoingCallsRequest={}))});var uh=w(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.SemanticTokensRefreshRequest=Me.SemanticTokensRangeRequest=Me.SemanticTokensDeltaRequest=Me.SemanticTokensRequest=Me.SemanticTokensRegistrationType=Me.TokenFormat=void 0;var Tn=we(),yy;(function(t){t.Relative="relative"})(yy=Me.TokenFormat||(Me.TokenFormat={}));var zs;(function(t){t.method="textDocument/semanticTokens",t.type=new Tn.RegistrationType(t.method)})(zs=Me.SemanticTokensRegistrationType||(Me.SemanticTokensRegistrationType={}));var Cy;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=Tn.MessageDirection.clientToServer,t.type=new Tn.ProtocolRequestType(t.method),t.registrationMethod=zs.method})(Cy=Me.SemanticTokensRequest||(Me.SemanticTokensRequest={}));var _y;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=Tn.MessageDirection.clientToServer,t.type=new Tn.ProtocolRequestType(t.method),t.registrationMethod=zs.method})(_y=Me.SemanticTokensDeltaRequest||(Me.SemanticTokensDeltaRequest={}));var Dy;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=Tn.MessageDirection.clientToServer,t.type=new Tn.ProtocolRequestType(t.method),t.registrationMethod=zs.method})(Dy=Me.SemanticTokensRangeRequest||(Me.SemanticTokensRangeRequest={}));var Ry;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=Tn.MessageDirection.clientToServer,t.type=new Tn.ProtocolRequestType0(t.method)})(Ry=Me.SemanticTokensRefreshRequest||(Me.SemanticTokensRefreshRequest={}))});var dh=w(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.ShowDocumentRequest=void 0;var lh=we(),by;(function(t){t.method="window/showDocument",t.messageDirection=lh.MessageDirection.serverToClient,t.type=new lh.ProtocolRequestType(t.method)})(by=Ii.ShowDocumentRequest||(Ii.ShowDocumentRequest={}))});var hh=w(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.LinkedEditingRangeRequest=void 0;var fh=we(),wy;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=fh.MessageDirection.clientToServer,t.type=new fh.ProtocolRequestType(t.method)})(wy=Fi.LinkedEditingRangeRequest||(Fi.LinkedEditingRangeRequest={}))});var ph=w(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.WillDeleteFilesRequest=Se.DidDeleteFilesNotification=Se.DidRenameFilesNotification=Se.WillRenameFilesRequest=Se.DidCreateFilesNotification=Se.WillCreateFilesRequest=Se.FileOperationPatternKind=void 0;var Mt=we(),Sy;(function(t){t.file="file",t.folder="folder"})(Sy=Se.FileOperationPatternKind||(Se.FileOperationPatternKind={}));var Ty;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(Ty=Se.WillCreateFilesRequest||(Se.WillCreateFilesRequest={}));var Py;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Py=Se.DidCreateFilesNotification||(Se.DidCreateFilesNotification={}));var xy;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(xy=Se.WillRenameFilesRequest||(Se.WillRenameFilesRequest={}));var qy;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(qy=Se.DidRenameFilesNotification||(Se.DidRenameFilesNotification={}));var Ey;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Ey=Se.DidDeleteFilesNotification||(Se.DidDeleteFilesNotification={}));var ky;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(ky=Se.WillDeleteFilesRequest||(Se.WillDeleteFilesRequest={}))});var mh=w(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.MonikerRequest=Yt.MonikerKind=Yt.UniquenessLevel=void 0;var gh=we(),Oy;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Oy=Yt.UniquenessLevel||(Yt.UniquenessLevel={}));var Iy;(function(t){t.$import="import",t.$export="export",t.local="local"})(Iy=Yt.MonikerKind||(Yt.MonikerKind={}));var Fy;(function(t){t.method="textDocument/moniker",t.messageDirection=gh.MessageDirection.clientToServer,t.type=new gh.ProtocolRequestType(t.method)})(Fy=Yt.MonikerRequest||(Yt.MonikerRequest={}))});var vh=w(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.TypeHierarchySubtypesRequest=Zt.TypeHierarchySupertypesRequest=Zt.TypeHierarchyPrepareRequest=void 0;var Ur=we(),Ny;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=Ur.MessageDirection.clientToServer,t.type=new Ur.ProtocolRequestType(t.method)})(Ny=Zt.TypeHierarchyPrepareRequest||(Zt.TypeHierarchyPrepareRequest={}));var Ly;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=Ur.MessageDirection.clientToServer,t.type=new Ur.ProtocolRequestType(t.method)})(Ly=Zt.TypeHierarchySupertypesRequest||(Zt.TypeHierarchySupertypesRequest={}));var My;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=Ur.MessageDirection.clientToServer,t.type=new Ur.ProtocolRequestType(t.method)})(My=Zt.TypeHierarchySubtypesRequest||(Zt.TypeHierarchySubtypesRequest={}))});var yh=w($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.InlineValueRefreshRequest=$n.InlineValueRequest=void 0;var Ks=we(),Ay;(function(t){t.method="textDocument/inlineValue",t.messageDirection=Ks.MessageDirection.clientToServer,t.type=new Ks.ProtocolRequestType(t.method)})(Ay=$n.InlineValueRequest||($n.InlineValueRequest={}));var jy;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=Ks.MessageDirection.clientToServer,t.type=new Ks.ProtocolRequestType0(t.method)})(jy=$n.InlineValueRefreshRequest||($n.InlineValueRefreshRequest={}))});var Ch=w(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.InlayHintRefreshRequest=en.InlayHintResolveRequest=en.InlayHintRequest=void 0;var zr=we(),$y;(function(t){t.method="textDocument/inlayHint",t.messageDirection=zr.MessageDirection.clientToServer,t.type=new zr.ProtocolRequestType(t.method)})($y=en.InlayHintRequest||(en.InlayHintRequest={}));var Hy;(function(t){t.method="inlayHint/resolve",t.messageDirection=zr.MessageDirection.clientToServer,t.type=new zr.ProtocolRequestType(t.method)})(Hy=en.InlayHintResolveRequest||(en.InlayHintResolveRequest={}));var Wy;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=zr.MessageDirection.clientToServer,t.type=new zr.ProtocolRequestType0(t.method)})(Wy=en.InlayHintRefreshRequest||(en.InlayHintRefreshRequest={}))});var Dh=w(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.DiagnosticRefreshRequest=Ye.WorkspaceDiagnosticRequest=Ye.DocumentDiagnosticRequest=Ye.DocumentDiagnosticReportKind=Ye.DiagnosticServerCancellationData=void 0;var _h=sr(),Uy=$s(),Kr=we(),zy;(function(t){function e(n){let r=n;return r&&Uy.boolean(r.retriggerRequest)}t.is=e})(zy=Ye.DiagnosticServerCancellationData||(Ye.DiagnosticServerCancellationData={}));var Ky;(function(t){t.Full="full",t.Unchanged="unchanged"})(Ky=Ye.DocumentDiagnosticReportKind||(Ye.DocumentDiagnosticReportKind={}));var Vy;(function(t){t.method="textDocument/diagnostic",t.messageDirection=Kr.MessageDirection.clientToServer,t.type=new Kr.ProtocolRequestType(t.method),t.partialResult=new _h.ProgressType})(Vy=Ye.DocumentDiagnosticRequest||(Ye.DocumentDiagnosticRequest={}));var Gy;(function(t){t.method="workspace/diagnostic",t.messageDirection=Kr.MessageDirection.clientToServer,t.type=new Kr.ProtocolRequestType(t.method),t.partialResult=new _h.ProgressType})(Gy=Ye.WorkspaceDiagnosticRequest||(Ye.WorkspaceDiagnosticRequest={}));var By;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=Kr.MessageDirection.clientToServer,t.type=new Kr.ProtocolRequestType0(t.method)})(By=Ye.DiagnosticRefreshRequest||(Ye.DiagnosticRefreshRequest={}))});var wh=w(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.DidCloseNotebookDocumentNotification=ie.DidSaveNotebookDocumentNotification=ie.DidChangeNotebookDocumentNotification=ie.NotebookCellArrayChange=ie.DidOpenNotebookDocumentNotification=ie.NotebookDocumentSyncRegistrationType=ie.NotebookDocument=ie.NotebookCell=ie.ExecutionSummary=ie.NotebookCellKind=void 0;var Ni=(js(),Cs(As)),tn=$s(),gn=we(),Rh;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}t.is=e})(Rh=ie.NotebookCellKind||(ie.NotebookCellKind={}));var bh;(function(t){function e(i,s){let o={executionOrder:i};return(s===!0||s===!1)&&(o.success=s),o}t.create=e;function n(i){let s=i;return tn.objectLiteral(s)&&Ni.uinteger.is(s.executionOrder)&&(s.success===void 0||tn.boolean(s.success))}t.is=n;function r(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}t.equals=r})(bh=ie.ExecutionSummary||(ie.ExecutionSummary={}));var tu;(function(t){function e(s,o){return{kind:s,document:o}}t.create=e;function n(s){let o=s;return tn.objectLiteral(o)&&Rh.is(o.kind)&&Ni.DocumentUri.is(o.document)&&(o.metadata===void 0||tn.objectLiteral(o.metadata))}t.is=n;function r(s,o){let a=new Set;return s.document!==o.document&&a.add("document"),s.kind!==o.kind&&a.add("kind"),s.executionSummary!==o.executionSummary&&a.add("executionSummary"),(s.metadata!==void 0||o.metadata!==void 0)&&!i(s.metadata,o.metadata)&&a.add("metadata"),(s.executionSummary!==void 0||o.executionSummary!==void 0)&&!bh.equals(s.executionSummary,o.executionSummary)&&a.add("executionSummary"),a}t.diff=r;function i(s,o){if(s===o)return!0;if(s==null||o===null||o===void 0||typeof s!=typeof o||typeof s!="object")return!1;let a=Array.isArray(s),u=Array.isArray(o);if(a!==u)return!1;if(a&&u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++)if(!i(s[l],o[l]))return!1}if(tn.objectLiteral(s)&&tn.objectLiteral(o)){let l=Object.keys(s),h=Object.keys(o);if(l.length!==h.length||(l.sort(),h.sort(),!i(l,h)))return!1;for(let g=0;g<l.length;g++){let p=l[g];if(!i(s[p],o[p]))return!1}}return!0}})(tu=ie.NotebookCell||(ie.NotebookCell={}));var Xy;(function(t){function e(r,i,s,o){return{uri:r,notebookType:i,version:s,cells:o}}t.create=e;function n(r){let i=r;return tn.objectLiteral(i)&&tn.string(i.uri)&&Ni.integer.is(i.version)&&tn.typedArray(i.cells,tu.is)}t.is=n})(Xy=ie.NotebookDocument||(ie.NotebookDocument={}));var Li;(function(t){t.method="notebookDocument/sync",t.messageDirection=gn.MessageDirection.clientToServer,t.type=new gn.RegistrationType(t.method)})(Li=ie.NotebookDocumentSyncRegistrationType||(ie.NotebookDocumentSyncRegistrationType={}));var Qy;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=gn.MessageDirection.clientToServer,t.type=new gn.ProtocolNotificationType(t.method),t.registrationMethod=Li.method})(Qy=ie.DidOpenNotebookDocumentNotification||(ie.DidOpenNotebookDocumentNotification={}));var Jy;(function(t){function e(r){let i=r;return tn.objectLiteral(i)&&Ni.uinteger.is(i.start)&&Ni.uinteger.is(i.deleteCount)&&(i.cells===void 0||tn.typedArray(i.cells,tu.is))}t.is=e;function n(r,i,s){let o={start:r,deleteCount:i};return s!==void 0&&(o.cells=s),o}t.create=n})(Jy=ie.NotebookCellArrayChange||(ie.NotebookCellArrayChange={}));var Yy;(function(t){t.method="notebookDocument/didChange",t.messageDirection=gn.MessageDirection.clientToServer,t.type=new gn.ProtocolNotificationType(t.method),t.registrationMethod=Li.method})(Yy=ie.DidChangeNotebookDocumentNotification||(ie.DidChangeNotebookDocumentNotification={}));var Zy;(function(t){t.method="notebookDocument/didSave",t.messageDirection=gn.MessageDirection.clientToServer,t.type=new gn.ProtocolNotificationType(t.method),t.registrationMethod=Li.method})(Zy=ie.DidSaveNotebookDocumentNotification||(ie.DidSaveNotebookDocumentNotification={}));var eC;(function(t){t.method="notebookDocument/didClose",t.messageDirection=gn.MessageDirection.clientToServer,t.type=new gn.ProtocolNotificationType(t.method),t.registrationMethod=Li.method})(eC=ie.DidCloseNotebookDocumentNotification||(ie.DidCloseNotebookDocumentNotification={}))});var Ih=w(f=>{"use strict";Object.defineProperty(f,"__esModule",{value:!0});f.WorkspaceSymbolRequest=f.CodeActionResolveRequest=f.CodeActionRequest=f.DocumentSymbolRequest=f.DocumentHighlightRequest=f.ReferencesRequest=f.DefinitionRequest=f.SignatureHelpRequest=f.SignatureHelpTriggerKind=f.HoverRequest=f.CompletionResolveRequest=f.CompletionRequest=f.CompletionTriggerKind=f.PublishDiagnosticsNotification=f.WatchKind=f.RelativePattern=f.FileChangeType=f.DidChangeWatchedFilesNotification=f.WillSaveTextDocumentWaitUntilRequest=f.WillSaveTextDocumentNotification=f.TextDocumentSaveReason=f.DidSaveTextDocumentNotification=f.DidCloseTextDocumentNotification=f.DidChangeTextDocumentNotification=f.TextDocumentContentChangeEvent=f.DidOpenTextDocumentNotification=f.TextDocumentSyncKind=f.TelemetryEventNotification=f.LogMessageNotification=f.ShowMessageRequest=f.ShowMessageNotification=f.MessageType=f.DidChangeConfigurationNotification=f.ExitNotification=f.ShutdownRequest=f.InitializedNotification=f.InitializeErrorCodes=f.InitializeRequest=f.WorkDoneProgressOptions=f.TextDocumentRegistrationOptions=f.StaticRegistrationOptions=f.PositionEncodingKind=f.FailureHandlingKind=f.ResourceOperationKind=f.UnregistrationRequest=f.RegistrationRequest=f.DocumentSelector=f.NotebookCellTextDocumentFilter=f.NotebookDocumentFilter=f.TextDocumentFilter=void 0;f.TypeHierarchySubtypesRequest=f.TypeHierarchyPrepareRequest=f.MonikerRequest=f.MonikerKind=f.UniquenessLevel=f.WillDeleteFilesRequest=f.DidDeleteFilesNotification=f.WillRenameFilesRequest=f.DidRenameFilesNotification=f.WillCreateFilesRequest=f.DidCreateFilesNotification=f.FileOperationPatternKind=f.LinkedEditingRangeRequest=f.ShowDocumentRequest=f.SemanticTokensRegistrationType=f.SemanticTokensRefreshRequest=f.SemanticTokensRangeRequest=f.SemanticTokensDeltaRequest=f.SemanticTokensRequest=f.TokenFormat=f.CallHierarchyPrepareRequest=f.CallHierarchyOutgoingCallsRequest=f.CallHierarchyIncomingCallsRequest=f.WorkDoneProgressCancelNotification=f.WorkDoneProgressCreateRequest=f.WorkDoneProgress=f.SelectionRangeRequest=f.DeclarationRequest=f.FoldingRangeRequest=f.ColorPresentationRequest=f.DocumentColorRequest=f.ConfigurationRequest=f.DidChangeWorkspaceFoldersNotification=f.WorkspaceFoldersRequest=f.TypeDefinitionRequest=f.ImplementationRequest=f.ApplyWorkspaceEditRequest=f.ExecuteCommandRequest=f.PrepareRenameRequest=f.RenameRequest=f.PrepareSupportDefaultBehavior=f.DocumentOnTypeFormattingRequest=f.DocumentRangeFormattingRequest=f.DocumentFormattingRequest=f.DocumentLinkResolveRequest=f.DocumentLinkRequest=f.CodeLensRefreshRequest=f.CodeLensResolveRequest=f.CodeLensRequest=f.WorkspaceSymbolResolveRequest=void 0;f.DidCloseNotebookDocumentNotification=f.DidSaveNotebookDocumentNotification=f.DidChangeNotebookDocumentNotification=f.NotebookCellArrayChange=f.DidOpenNotebookDocumentNotification=f.NotebookDocumentSyncRegistrationType=f.NotebookDocument=f.NotebookCell=f.ExecutionSummary=f.NotebookCellKind=f.DiagnosticRefreshRequest=f.WorkspaceDiagnosticRequest=f.DocumentDiagnosticRequest=f.DocumentDiagnosticReportKind=f.DiagnosticServerCancellationData=f.InlayHintRefreshRequest=f.InlayHintResolveRequest=f.InlayHintRequest=f.InlineValueRefreshRequest=f.InlineValueRequest=f.TypeHierarchySupertypesRequest=void 0;var k=we(),Sh=(js(),Cs(As)),Ze=$s(),tC=Bf();Object.defineProperty(f,"ImplementationRequest",{enumerable:!0,get:function(){return tC.ImplementationRequest}});var nC=Qf();Object.defineProperty(f,"TypeDefinitionRequest",{enumerable:!0,get:function(){return nC.TypeDefinitionRequest}});var Th=Jf();Object.defineProperty(f,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Th.WorkspaceFoldersRequest}});Object.defineProperty(f,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Th.DidChangeWorkspaceFoldersNotification}});var rC=Zf();Object.defineProperty(f,"ConfigurationRequest",{enumerable:!0,get:function(){return rC.ConfigurationRequest}});var Ph=eh();Object.defineProperty(f,"DocumentColorRequest",{enumerable:!0,get:function(){return Ph.DocumentColorRequest}});Object.defineProperty(f,"ColorPresentationRequest",{enumerable:!0,get:function(){return Ph.ColorPresentationRequest}});var iC=nh();Object.defineProperty(f,"FoldingRangeRequest",{enumerable:!0,get:function(){return iC.FoldingRangeRequest}});var sC=ih();Object.defineProperty(f,"DeclarationRequest",{enumerable:!0,get:function(){return sC.DeclarationRequest}});var oC=oh();Object.defineProperty(f,"SelectionRangeRequest",{enumerable:!0,get:function(){return oC.SelectionRangeRequest}});var nu=ah();Object.defineProperty(f,"WorkDoneProgress",{enumerable:!0,get:function(){return nu.WorkDoneProgress}});Object.defineProperty(f,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return nu.WorkDoneProgressCreateRequest}});Object.defineProperty(f,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return nu.WorkDoneProgressCancelNotification}});var ru=ch();Object.defineProperty(f,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return ru.CallHierarchyIncomingCallsRequest}});Object.defineProperty(f,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return ru.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(f,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return ru.CallHierarchyPrepareRequest}});var Vr=uh();Object.defineProperty(f,"TokenFormat",{enumerable:!0,get:function(){return Vr.TokenFormat}});Object.defineProperty(f,"SemanticTokensRequest",{enumerable:!0,get:function(){return Vr.SemanticTokensRequest}});Object.defineProperty(f,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Vr.SemanticTokensDeltaRequest}});Object.defineProperty(f,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Vr.SemanticTokensRangeRequest}});Object.defineProperty(f,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Vr.SemanticTokensRefreshRequest}});Object.defineProperty(f,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Vr.SemanticTokensRegistrationType}});var aC=dh();Object.defineProperty(f,"ShowDocumentRequest",{enumerable:!0,get:function(){return aC.ShowDocumentRequest}});var cC=hh();Object.defineProperty(f,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return cC.LinkedEditingRangeRequest}});var cr=ph();Object.defineProperty(f,"FileOperationPatternKind",{enumerable:!0,get:function(){return cr.FileOperationPatternKind}});Object.defineProperty(f,"DidCreateFilesNotification",{enumerable:!0,get:function(){return cr.DidCreateFilesNotification}});Object.defineProperty(f,"WillCreateFilesRequest",{enumerable:!0,get:function(){return cr.WillCreateFilesRequest}});Object.defineProperty(f,"DidRenameFilesNotification",{enumerable:!0,get:function(){return cr.DidRenameFilesNotification}});Object.defineProperty(f,"WillRenameFilesRequest",{enumerable:!0,get:function(){return cr.WillRenameFilesRequest}});Object.defineProperty(f,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return cr.DidDeleteFilesNotification}});Object.defineProperty(f,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return cr.WillDeleteFilesRequest}});var iu=mh();Object.defineProperty(f,"UniquenessLevel",{enumerable:!0,get:function(){return iu.UniquenessLevel}});Object.defineProperty(f,"MonikerKind",{enumerable:!0,get:function(){return iu.MonikerKind}});Object.defineProperty(f,"MonikerRequest",{enumerable:!0,get:function(){return iu.MonikerRequest}});var su=vh();Object.defineProperty(f,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return su.TypeHierarchyPrepareRequest}});Object.defineProperty(f,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return su.TypeHierarchySubtypesRequest}});Object.defineProperty(f,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return su.TypeHierarchySupertypesRequest}});var xh=yh();Object.defineProperty(f,"InlineValueRequest",{enumerable:!0,get:function(){return xh.InlineValueRequest}});Object.defineProperty(f,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return xh.InlineValueRefreshRequest}});var ou=Ch();Object.defineProperty(f,"InlayHintRequest",{enumerable:!0,get:function(){return ou.InlayHintRequest}});Object.defineProperty(f,"InlayHintResolveRequest",{enumerable:!0,get:function(){return ou.InlayHintResolveRequest}});Object.defineProperty(f,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return ou.InlayHintRefreshRequest}});var Mi=Dh();Object.defineProperty(f,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Mi.DiagnosticServerCancellationData}});Object.defineProperty(f,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Mi.DocumentDiagnosticReportKind}});Object.defineProperty(f,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Mi.DocumentDiagnosticRequest}});Object.defineProperty(f,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Mi.WorkspaceDiagnosticRequest}});Object.defineProperty(f,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Mi.DiagnosticRefreshRequest}});var mn=wh();Object.defineProperty(f,"NotebookCellKind",{enumerable:!0,get:function(){return mn.NotebookCellKind}});Object.defineProperty(f,"ExecutionSummary",{enumerable:!0,get:function(){return mn.ExecutionSummary}});Object.defineProperty(f,"NotebookCell",{enumerable:!0,get:function(){return mn.NotebookCell}});Object.defineProperty(f,"NotebookDocument",{enumerable:!0,get:function(){return mn.NotebookDocument}});Object.defineProperty(f,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return mn.NotebookDocumentSyncRegistrationType}});Object.defineProperty(f,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return mn.DidOpenNotebookDocumentNotification}});Object.defineProperty(f,"NotebookCellArrayChange",{enumerable:!0,get:function(){return mn.NotebookCellArrayChange}});Object.defineProperty(f,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return mn.DidChangeNotebookDocumentNotification}});Object.defineProperty(f,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return mn.DidSaveNotebookDocumentNotification}});Object.defineProperty(f,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return mn.DidCloseNotebookDocumentNotification}});var qh;(function(t){function e(n){let r=n;return Ze.string(r.language)||Ze.string(r.scheme)||Ze.string(r.pattern)}t.is=e})(qh=f.TextDocumentFilter||(f.TextDocumentFilter={}));var Eh;(function(t){function e(n){let r=n;return Ze.objectLiteral(r)&&(Ze.string(r.notebookType)||Ze.string(r.scheme)||Ze.string(r.pattern))}t.is=e})(Eh=f.NotebookDocumentFilter||(f.NotebookDocumentFilter={}));var kh;(function(t){function e(n){let r=n;return Ze.objectLiteral(r)&&(Ze.string(r.notebook)||Eh.is(r.notebook))&&(r.language===void 0||Ze.string(r.language))}t.is=e})(kh=f.NotebookCellTextDocumentFilter||(f.NotebookCellTextDocumentFilter={}));var Oh;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Ze.string(r)&&!qh.is(r)&&!kh.is(r))return!1;return!0}t.is=e})(Oh=f.DocumentSelector||(f.DocumentSelector={}));var uC;(function(t){t.method="client/registerCapability",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolRequestType(t.method)})(uC=f.RegistrationRequest||(f.RegistrationRequest={}));var lC;(function(t){t.method="client/unregisterCapability",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolRequestType(t.method)})(lC=f.UnregistrationRequest||(f.UnregistrationRequest={}));var dC;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(dC=f.ResourceOperationKind||(f.ResourceOperationKind={}));var fC;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(fC=f.FailureHandlingKind||(f.FailureHandlingKind={}));var hC;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(hC=f.PositionEncodingKind||(f.PositionEncodingKind={}));var pC;(function(t){function e(n){let r=n;return r&&Ze.string(r.id)&&r.id.length>0}t.hasId=e})(pC=f.StaticRegistrationOptions||(f.StaticRegistrationOptions={}));var gC;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||Oh.is(r.documentSelector))}t.is=e})(gC=f.TextDocumentRegistrationOptions||(f.TextDocumentRegistrationOptions={}));var mC;(function(t){function e(r){let i=r;return Ze.objectLiteral(i)&&(i.workDoneProgress===void 0||Ze.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&Ze.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(mC=f.WorkDoneProgressOptions||(f.WorkDoneProgressOptions={}));var vC;(function(t){t.method="initialize",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(vC=f.InitializeRequest||(f.InitializeRequest={}));var yC;(function(t){t.unknownProtocolVersion=1})(yC=f.InitializeErrorCodes||(f.InitializeErrorCodes={}));var CC;(function(t){t.method="initialized",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(CC=f.InitializedNotification||(f.InitializedNotification={}));var _C;(function(t){t.method="shutdown",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType0(t.method)})(_C=f.ShutdownRequest||(f.ShutdownRequest={}));var DC;(function(t){t.method="exit",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType0(t.method)})(DC=f.ExitNotification||(f.ExitNotification={}));var RC;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(RC=f.DidChangeConfigurationNotification||(f.DidChangeConfigurationNotification={}));var bC;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(bC=f.MessageType||(f.MessageType={}));var wC;(function(t){t.method="window/showMessage",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolNotificationType(t.method)})(wC=f.ShowMessageNotification||(f.ShowMessageNotification={}));var SC;(function(t){t.method="window/showMessageRequest",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolRequestType(t.method)})(SC=f.ShowMessageRequest||(f.ShowMessageRequest={}));var TC;(function(t){t.method="window/logMessage",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolNotificationType(t.method)})(TC=f.LogMessageNotification||(f.LogMessageNotification={}));var PC;(function(t){t.method="telemetry/event",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolNotificationType(t.method)})(PC=f.TelemetryEventNotification||(f.TelemetryEventNotification={}));var xC;(function(t){t.None=0,t.Full=1,t.Incremental=2})(xC=f.TextDocumentSyncKind||(f.TextDocumentSyncKind={}));var qC;(function(t){t.method="textDocument/didOpen",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(qC=f.DidOpenTextDocumentNotification||(f.DidOpenTextDocumentNotification={}));var EC;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(EC=f.TextDocumentContentChangeEvent||(f.TextDocumentContentChangeEvent={}));var kC;(function(t){t.method="textDocument/didChange",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(kC=f.DidChangeTextDocumentNotification||(f.DidChangeTextDocumentNotification={}));var OC;(function(t){t.method="textDocument/didClose",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(OC=f.DidCloseTextDocumentNotification||(f.DidCloseTextDocumentNotification={}));var IC;(function(t){t.method="textDocument/didSave",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(IC=f.DidSaveTextDocumentNotification||(f.DidSaveTextDocumentNotification={}));var FC;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(FC=f.TextDocumentSaveReason||(f.TextDocumentSaveReason={}));var NC;(function(t){t.method="textDocument/willSave",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(NC=f.WillSaveTextDocumentNotification||(f.WillSaveTextDocumentNotification={}));var LC;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(LC=f.WillSaveTextDocumentWaitUntilRequest||(f.WillSaveTextDocumentWaitUntilRequest={}));var MC;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolNotificationType(t.method)})(MC=f.DidChangeWatchedFilesNotification||(f.DidChangeWatchedFilesNotification={}));var AC;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(AC=f.FileChangeType||(f.FileChangeType={}));var jC;(function(t){function e(n){let r=n;return Ze.objectLiteral(r)&&(Sh.URI.is(r.baseUri)||Sh.WorkspaceFolder.is(r.baseUri))&&Ze.string(r.pattern)}t.is=e})(jC=f.RelativePattern||(f.RelativePattern={}));var $C;(function(t){t.Create=1,t.Change=2,t.Delete=4})($C=f.WatchKind||(f.WatchKind={}));var HC;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolNotificationType(t.method)})(HC=f.PublishDiagnosticsNotification||(f.PublishDiagnosticsNotification={}));var WC;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(WC=f.CompletionTriggerKind||(f.CompletionTriggerKind={}));var UC;(function(t){t.method="textDocument/completion",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(UC=f.CompletionRequest||(f.CompletionRequest={}));var zC;(function(t){t.method="completionItem/resolve",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(zC=f.CompletionResolveRequest||(f.CompletionResolveRequest={}));var KC;(function(t){t.method="textDocument/hover",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(KC=f.HoverRequest||(f.HoverRequest={}));var VC;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(VC=f.SignatureHelpTriggerKind||(f.SignatureHelpTriggerKind={}));var GC;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(GC=f.SignatureHelpRequest||(f.SignatureHelpRequest={}));var BC;(function(t){t.method="textDocument/definition",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(BC=f.DefinitionRequest||(f.DefinitionRequest={}));var XC;(function(t){t.method="textDocument/references",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(XC=f.ReferencesRequest||(f.ReferencesRequest={}));var QC;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(QC=f.DocumentHighlightRequest||(f.DocumentHighlightRequest={}));var JC;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(JC=f.DocumentSymbolRequest||(f.DocumentSymbolRequest={}));var YC;(function(t){t.method="textDocument/codeAction",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(YC=f.CodeActionRequest||(f.CodeActionRequest={}));var ZC;(function(t){t.method="codeAction/resolve",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(ZC=f.CodeActionResolveRequest||(f.CodeActionResolveRequest={}));var e_;(function(t){t.method="workspace/symbol",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(e_=f.WorkspaceSymbolRequest||(f.WorkspaceSymbolRequest={}));var t_;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(t_=f.WorkspaceSymbolResolveRequest||(f.WorkspaceSymbolResolveRequest={}));var n_;(function(t){t.method="textDocument/codeLens",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(n_=f.CodeLensRequest||(f.CodeLensRequest={}));var r_;(function(t){t.method="codeLens/resolve",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(r_=f.CodeLensResolveRequest||(f.CodeLensResolveRequest={}));var i_;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolRequestType0(t.method)})(i_=f.CodeLensRefreshRequest||(f.CodeLensRefreshRequest={}));var s_;(function(t){t.method="textDocument/documentLink",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(s_=f.DocumentLinkRequest||(f.DocumentLinkRequest={}));var o_;(function(t){t.method="documentLink/resolve",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(o_=f.DocumentLinkResolveRequest||(f.DocumentLinkResolveRequest={}));var a_;(function(t){t.method="textDocument/formatting",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(a_=f.DocumentFormattingRequest||(f.DocumentFormattingRequest={}));var c_;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(c_=f.DocumentRangeFormattingRequest||(f.DocumentRangeFormattingRequest={}));var u_;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(u_=f.DocumentOnTypeFormattingRequest||(f.DocumentOnTypeFormattingRequest={}));var l_;(function(t){t.Identifier=1})(l_=f.PrepareSupportDefaultBehavior||(f.PrepareSupportDefaultBehavior={}));var d_;(function(t){t.method="textDocument/rename",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(d_=f.RenameRequest||(f.RenameRequest={}));var f_;(function(t){t.method="textDocument/prepareRename",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(f_=f.PrepareRenameRequest||(f.PrepareRenameRequest={}));var h_;(function(t){t.method="workspace/executeCommand",t.messageDirection=k.MessageDirection.clientToServer,t.type=new k.ProtocolRequestType(t.method)})(h_=f.ExecuteCommandRequest||(f.ExecuteCommandRequest={}));var p_;(function(t){t.method="workspace/applyEdit",t.messageDirection=k.MessageDirection.serverToClient,t.type=new k.ProtocolRequestType("workspace/applyEdit")})(p_=f.ApplyWorkspaceEditRequest||(f.ApplyWorkspaceEditRequest={}))});var Nh=w(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.createProtocolConnection=void 0;var Fh=sr();function g_(t,e,n,r){return Fh.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Fh.createMessageConnection)(t,e,n,r)}Vs.createProtocolConnection=g_});var Lh=w(pt=>{"use strict";var m_=pt&&pt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Gs=pt&&pt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&m_(e,t,n)};Object.defineProperty(pt,"__esModule",{value:!0});pt.LSPErrorCodes=pt.createProtocolConnection=void 0;Gs(sr(),pt);Gs((js(),Cs(As)),pt);Gs(we(),pt);Gs(Ih(),pt);var v_=Nh();Object.defineProperty(pt,"createProtocolConnection",{enumerable:!0,get:function(){return v_.createProtocolConnection}});var y_;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(y_=pt.LSPErrorCodes||(pt.LSPErrorCodes={}))});var V=w(vn=>{"use strict";var C_=vn&&vn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Mh=vn&&vn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&C_(e,t,n)};Object.defineProperty(vn,"__esModule",{value:!0});vn.createProtocolConnection=void 0;var __=tc();Mh(tc(),vn);Mh(Lh(),vn);function D_(t,e,n,r){return(0,__.createMessageConnection)(t,e,n,r)}vn.createProtocolConnection=D_});var $i=w(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.forEach=ot.mapAsync=ot.map=ot.clearTestMode=ot.setTestMode=ot.Semaphore=ot.Delayer=void 0;var ji=V(),au=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,n=this.defaultDelay){return this.task=e,n>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(n>=0||this.timeout===void 0)&&(this.timeout=(0,ji.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},n>=0?n:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};ot.Delayer=au;var cu=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,ji.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};ot.Semaphore=cu;var uu=!1;function R_(){uu=!0}ot.setTestMode=R_;function b_(){uu=!1}ot.clearTestMode=b_;var Ah=15,Ai=class{constructor(e=Ah){this.yieldAfter=uu===!0?Math.max(e,2):Math.max(e,Ah),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,n=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||n<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function w_(t,e,n,r){if(t.length===0)return[];let i=new Array(t.length),s=new Ai(r?.yieldAfter);function o(u){s.start();for(let l=u;l<t.length;l++)if(i[l]=e(t[l]),s.shouldYield())return r?.yieldCallback&&r.yieldCallback(),l+1;return-1}let a=o(0);for(;a!==-1&&!(n!==void 0&&n.isCancellationRequested);)a=await new Promise(u=>{(0,ji.RAL)().timer.setImmediate(()=>{u(o(a))})});return i}ot.map=w_;async function S_(t,e,n,r){if(t.length===0)return[];let i=new Array(t.length),s=new Ai(r?.yieldAfter);async function o(u){s.start();for(let l=u;l<t.length;l++)if(i[l]=await e(t[l],n),s.shouldYield())return r?.yieldCallback&&r.yieldCallback(),l+1;return-1}let a=await o(0);for(;a!==-1&&!(n!==void 0&&n.isCancellationRequested);)a=await new Promise(u=>{(0,ji.RAL)().timer.setImmediate(()=>{u(o(a))})});return i}ot.mapAsync=S_;async function T_(t,e,n,r){if(t.length===0)return;let i=new Ai(r?.yieldAfter);function s(a){i.start();for(let u=a;u<t.length;u++)if(e(t[u]),i.shouldYield())return r?.yieldCallback&&r.yieldCallback(),u+1;return-1}let o=s(0);for(;o!==-1&&!(n!==void 0&&n.isCancellationRequested);)o=await new Promise(a=>{(0,ji.RAL)().timer.setImmediate(()=>{a(s(o))})})}ot.forEach=T_});var fu=w(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});var P_=require("vscode"),lu=class extends P_.CompletionItem{constructor(e){super(e)}};du.default=lu});var gu=w(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});var x_=require("vscode"),hu=class extends x_.CodeLens{constructor(e){super(e)}};pu.default=hu});var yu=w(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});var q_=require("vscode"),mu=class extends q_.DocumentLink{constructor(e,n){super(e,n)}};vu.default=mu});var Du=w(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});var E_=require("vscode"),Cu=class extends E_.CodeAction{constructor(e,n){super(e),this.data=n}};_u.default=Cu});var wu=w(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.ProtocolDiagnostic=ur.DiagnosticCode=void 0;var k_=require("vscode"),Ru=Nt(),O_;(function(t){function e(n){let r=n;return r!=null&&(Ru.number(r.value)||Ru.string(r.value))&&Ru.string(r.target)}t.is=e})(O_=ur.DiagnosticCode||(ur.DiagnosticCode={}));var bu=class extends k_.Diagnostic{constructor(e,n,r,i){super(e,n,r),this.data=i,this.hasDiagnosticCode=!1}};ur.ProtocolDiagnostic=bu});var Pu=w(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});var I_=require("vscode"),Su=class extends I_.CallHierarchyItem{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,o),a!==void 0&&(this.data=a)}};Tu.default=Su});var Eu=w(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});var F_=require("vscode"),xu=class extends F_.TypeHierarchyItem{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,o),a!==void 0&&(this.data=a)}};qu.default=xu});var Iu=w(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});var Bs=require("vscode"),ku=class extends Bs.SymbolInformation{constructor(e,n,r,i,s){let o=!(i instanceof Bs.Uri);super(e,n,r,o?i:new Bs.Location(i,new Bs.Range(0,0,0,0))),this.hasRange=o,s!==void 0&&(this.data=s)}};Ou.default=ku});var Lu=w(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});var N_=require("vscode"),Fu=class extends N_.InlayHint{constructor(e,n,r){super(e,n,r)}};Nu.default=Fu});var Hh=w(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.createConverter=void 0;var Ae=require("vscode"),B=V(),Gr=Nt(),jh=$i(),L_=fu(),M_=gu(),A_=yu(),j_=Du(),$h=wu(),$_=Pu(),H_=Eu(),W_=Iu(),U_=Lu(),Mu;(function(t){function e(n){let r=n;return r&&!!r.inserting&&!!r.replacing}t.is=e})(Mu||(Mu={}));function z_(t){let n=t||(d=>d.toString());function r(d){return n(d)}function i(d){return{uri:n(d.uri)}}function s(d){return{uri:n(d.uri),languageId:d.languageId,version:d.version,text:d.getText()}}function o(d){return{uri:n(d.uri),version:d.version}}function a(d){return{textDocument:s(d)}}function u(d){let R=d;return!!R.document&&!!R.contentChanges}function l(d){let R=d;return!!R.uri&&!!R.version}function h(d){if(l(d))return{textDocument:{uri:n(d.uri),version:d.version},contentChanges:[{text:d.getText()}]};if(u(d)){let R=d.document;return{textDocument:{uri:n(R.uri),version:R.version},contentChanges:d.contentChanges.map(J=>{let oe=J.range;return{range:{start:{line:oe.start.line,character:oe.start.character},end:{line:oe.end.line,character:oe.end.character}},rangeLength:J.rangeLength,text:J.text}})}}else throw Error("Unsupported text document change parameter")}function g(d){return{textDocument:i(d)}}function p(d,R=!1){let L={textDocument:i(d)};return R&&(L.text=d.getText()),L}function y(d){switch(d){case Ae.TextDocumentSaveReason.Manual:return B.TextDocumentSaveReason.Manual;case Ae.TextDocumentSaveReason.AfterDelay:return B.TextDocumentSaveReason.AfterDelay;case Ae.TextDocumentSaveReason.FocusOut:return B.TextDocumentSaveReason.FocusOut}return B.TextDocumentSaveReason.Manual}function m(d){return{textDocument:i(d.document),reason:y(d.reason)}}function D(d){return{files:d.files.map(R=>({uri:n(R)}))}}function b(d){return{files:d.files.map(R=>({oldUri:n(R.oldUri),newUri:n(R.newUri)}))}}function T(d){return{files:d.files.map(R=>({uri:n(R)}))}}function q(d){return{files:d.files.map(R=>({uri:n(R)}))}}function E(d){return{files:d.files.map(R=>({oldUri:n(R.oldUri),newUri:n(R.newUri)}))}}function I(d){return{files:d.files.map(R=>({uri:n(R)}))}}function K(d,R){return{textDocument:i(d),position:_t(R)}}function Ne(d){switch(d){case Ae.CompletionTriggerKind.TriggerCharacter:return B.CompletionTriggerKind.TriggerCharacter;case Ae.CompletionTriggerKind.TriggerForIncompleteCompletions:return B.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return B.CompletionTriggerKind.Invoked}}function De(d,R,L){return{textDocument:i(d),position:_t(R),context:{triggerKind:Ne(L.triggerKind),triggerCharacter:L.triggerCharacter}}}function Ct(d){switch(d){case Ae.SignatureHelpTriggerKind.Invoke:return B.SignatureHelpTriggerKind.Invoked;case Ae.SignatureHelpTriggerKind.TriggerCharacter:return B.SignatureHelpTriggerKind.TriggerCharacter;case Ae.SignatureHelpTriggerKind.ContentChange:return B.SignatureHelpTriggerKind.ContentChange}}function rt(d){return{label:d.label}}function Tt(d){return d.map(rt)}function an(d){return{label:d.label,parameters:Tt(d.parameters)}}function Ut(d){return d.map(an)}function Ot(d){return d===void 0?d:{signatures:Ut(d.signatures),activeSignature:d.activeSignature,activeParameter:d.activeParameter}}function cn(d,R,L){return{textDocument:i(d),position:_t(R),context:{isRetrigger:L.isRetrigger,triggerCharacter:L.triggerCharacter,triggerKind:Ct(L.triggerKind),activeSignatureHelp:Ot(L.activeSignatureHelp)}}}function _t(d){return{line:d.line,character:d.character}}function Dt(d){return d==null?d:{line:d.line>B.uinteger.MAX_VALUE?B.uinteger.MAX_VALUE:d.line,character:d.character>B.uinteger.MAX_VALUE?B.uinteger.MAX_VALUE:d.character}}function Gn(d,R){return jh.map(d,Dt,R)}function Ee(d){return d==null?d:{start:Dt(d.start),end:Dt(d.end)}}function ut(d){return d==null?d:B.Location.create(r(d.uri),Ee(d.range))}function lt(d){switch(d){case Ae.DiagnosticSeverity.Error:return B.DiagnosticSeverity.Error;case Ae.DiagnosticSeverity.Warning:return B.DiagnosticSeverity.Warning;case Ae.DiagnosticSeverity.Information:return B.DiagnosticSeverity.Information;case Ae.DiagnosticSeverity.Hint:return B.DiagnosticSeverity.Hint}}function un(d){if(!d)return;let R=[];for(let L of d){let J=dt(L);J!==void 0&&R.push(J)}return R.length>0?R:void 0}function dt(d){switch(d){case Ae.DiagnosticTag.Unnecessary:return B.DiagnosticTag.Unnecessary;case Ae.DiagnosticTag.Deprecated:return B.DiagnosticTag.Deprecated;default:return}}function li(d){return{message:d.message,location:ut(d.location)}}function wr(d){return d.map(li)}function Sr(d){if(d!=null)return Gr.number(d)||Gr.string(d)?d:{value:d.value,target:r(d.target)}}function Bn(d){let R=B.Diagnostic.create(Ee(d.range),d.message),L=d instanceof $h.ProtocolDiagnostic?d:void 0;L!==void 0&&L.data!==void 0&&(R.data=L.data);let J=Sr(d.code);return $h.DiagnosticCode.is(J)?L!==void 0&&L.hasDiagnosticCode?R.code=J:(R.code=J.value,R.codeDescription={href:J.target}):R.code=J,Gr.number(d.severity)&&(R.severity=lt(d.severity)),Array.isArray(d.tags)&&(R.tags=un(d.tags)),d.relatedInformation&&(R.relatedInformation=wr(d.relatedInformation)),d.source&&(R.source=d.source),R}function Xn(d,R){return d==null?d:jh.map(d,Bn,R)}function di(d,R){switch(d){case"$string":return R;case B.MarkupKind.PlainText:return{kind:d,value:R};case B.MarkupKind.Markdown:return{kind:d,value:R.value};default:return`Unsupported Markup content received. Kind is: ${d}`}}function Tr(d){switch(d){case Ae.CompletionItemTag.Deprecated:return B.CompletionItemTag.Deprecated}}function Pr(d){if(d===void 0)return d;let R=[];for(let L of d){let J=Tr(L);J!==void 0&&R.push(J)}return R}function It(d,R){return R!==void 0?R:d+1}function ln(d,R=!1){let L,J;Gr.string(d.label)?L=d.label:(L=d.label.label,R&&(d.label.detail!==void 0||d.label.description!==void 0)&&(J={detail:d.label.detail,description:d.label.description}));let oe={label:L};J!==void 0&&(oe.labelDetails=J);let Xe=d instanceof L_.default?d:void 0;d.detail&&(oe.detail=d.detail),d.documentation&&(!Xe||Xe.documentationFormat==="$string"?oe.documentation=d.documentation:oe.documentation=di(Xe.documentationFormat,d.documentation)),d.filterText&&(oe.filterText=d.filterText),xr(oe,d),Gr.number(d.kind)&&(oe.kind=It(d.kind,Xe&&Xe.originalItemKind)),d.sortText&&(oe.sortText=d.sortText),d.additionalTextEdits&&(oe.additionalTextEdits=Ln(d.additionalTextEdits)),d.commitCharacters&&(oe.commitCharacters=d.commitCharacters.slice()),d.command&&(oe.command=Gt(d.command)),(d.preselect===!0||d.preselect===!1)&&(oe.preselect=d.preselect);let _n=Pr(d.tags);if(Xe){if(Xe.data!==void 0&&(oe.data=Xe.data),Xe.deprecated===!0||Xe.deprecated===!1){if(Xe.deprecated===!0&&_n!==void 0&&_n.length>0){let hi=_n.indexOf(Ae.CompletionItemTag.Deprecated);hi!==-1&&_n.splice(hi,1)}oe.deprecated=Xe.deprecated}Xe.insertTextMode!==void 0&&(oe.insertTextMode=Xe.insertTextMode)}return _n!==void 0&&_n.length>0&&(oe.tags=_n),oe.insertTextMode===void 0&&d.keepWhitespace===!0&&(oe.insertTextMode=B.InsertTextMode.adjustIndentation),oe}function xr(d,R){let L=B.InsertTextFormat.PlainText,J,oe;R.textEdit?(J=R.textEdit.newText,oe=R.textEdit.range):R.insertText instanceof Ae.SnippetString?(L=B.InsertTextFormat.Snippet,J=R.insertText.value):J=R.insertText,R.range&&(oe=R.range),d.insertTextFormat=L,R.fromEdit&&J!==void 0&&oe!==void 0?d.textEdit=zt(J,oe):d.insertText=J}function zt(d,R){return Mu.is(R)?B.InsertReplaceEdit.create(d,Ee(R.inserting),Ee(R.replacing)):{newText:d,range:Ee(R)}}function Qn(d){return{range:Ee(d.range),newText:d.newText}}function Ln(d){return d==null?d:d.map(Qn)}function Kt(d){return d<=Ae.SymbolKind.TypeParameter?d+1:B.SymbolKind.Property}function Ft(d){return d}function ze(d){return d.map(Ft)}function fi(d,R,L){return{textDocument:i(d),position:_t(R),context:{includeDeclaration:L.includeDeclaration}}}async function Pt(d,R){let L=B.CodeAction.create(d.title);if(d instanceof j_.default&&d.data!==void 0&&(L.data=d.data),d.kind!==void 0&&(L.kind=Jn(d.kind)),d.diagnostics!==void 0&&(L.diagnostics=await Xn(d.diagnostics,R)),d.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return d.command!==void 0&&(L.command=Gt(d.command)),d.isPreferred!==void 0&&(L.isPreferred=d.isPreferred),d.disabled!==void 0&&(L.disabled={reason:d.disabled.reason}),L}async function Vt(d,R){if(d==null)return d;let L;return d.only&&Gr.string(d.only.value)&&(L=[d.only.value]),B.CodeActionContext.create(await Xn(d.diagnostics,R),L,qr(d.triggerKind))}function qr(d){switch(d){case Ae.CodeActionTriggerKind.Invoke:return B.CodeActionTriggerKind.Invoked;case Ae.CodeActionTriggerKind.Automatic:return B.CodeActionTriggerKind.Automatic;default:return}}function Jn(d){if(d!=null)return d.value}function Yn(d){return d==null?d:B.InlineValueContext.create(d.frameId,Ee(d.stoppedLocation))}function Gt(d){let R=B.Command.create(d.title,d.command);return d.arguments&&(R.arguments=d.arguments),R}function dn(d){let R=B.CodeLens.create(Ee(d.range));return d.command&&(R.command=Gt(d.command)),d instanceof M_.default&&d.data&&(R.data=d.data),R}function v(d,R){let L={tabSize:d.tabSize,insertSpaces:d.insertSpaces};return R.trimTrailingWhitespace&&(L.trimTrailingWhitespace=!0),R.trimFinalNewlines&&(L.trimFinalNewlines=!0),R.insertFinalNewline&&(L.insertFinalNewline=!0),L}function P(d){return{textDocument:i(d)}}function O(d){return{textDocument:i(d)}}function M(d){let R=B.DocumentLink.create(Ee(d.range));d.target&&(R.target=r(d.target)),d.tooltip!==void 0&&(R.tooltip=d.tooltip);let L=d instanceof A_.default?d:void 0;return L&&L.data&&(R.data=L.data),R}function le(d){return{textDocument:i(d)}}function de(d){let R={name:d.name,kind:Kt(d.kind),uri:r(d.uri),range:Ee(d.range),selectionRange:Ee(d.selectionRange)};return d.detail!==void 0&&d.detail.length>0&&(R.detail=d.detail),d.tags!==void 0&&(R.tags=ze(d.tags)),d instanceof $_.default&&d.data!==void 0&&(R.data=d.data),R}function ve(d){let R={name:d.name,kind:Kt(d.kind),uri:r(d.uri),range:Ee(d.range),selectionRange:Ee(d.selectionRange)};return d.detail!==void 0&&d.detail.length>0&&(R.detail=d.detail),d.tags!==void 0&&(R.tags=ze(d.tags)),d instanceof H_.default&&d.data!==void 0&&(R.data=d.data),R}function be(d){let R=d instanceof W_.default?{name:d.name,kind:Kt(d.kind),location:d.hasRange?ut(d.location):{uri:n(d.location.uri)},data:d.data}:{name:d.name,kind:Kt(d.kind),location:ut(d.location)};return d.tags!==void 0&&(R.tags=ze(d.tags)),d.containerName!==""&&(R.containerName=d.containerName),R}function ee(d){let R=typeof d.label=="string"?d.label:d.label.map(ge),L=B.InlayHint.create(Dt(d.position),R);return d.kind!==void 0&&(L.kind=d.kind),d.textEdits!==void 0&&(L.textEdits=Ln(d.textEdits)),d.tooltip!==void 0&&(L.tooltip=te(d.tooltip)),d.paddingLeft!==void 0&&(L.paddingLeft=d.paddingLeft),d.paddingRight!==void 0&&(L.paddingRight=d.paddingRight),d instanceof U_.default&&d.data!==void 0&&(L.data=d.data),L}function ge(d){let R=B.InlayHintLabelPart.create(d.value);return d.location!==void 0&&(R.location=ut(d.location)),d.command!==void 0&&(R.command=Gt(d.command)),d.tooltip!==void 0&&(R.tooltip=te(d.tooltip)),R}function te(d){return typeof d=="string"?d:{kind:B.MarkupKind.Markdown,value:d.value}}return{asUri:r,asTextDocumentIdentifier:i,asTextDocumentItem:s,asVersionedTextDocumentIdentifier:o,asOpenTextDocumentParams:a,asChangeTextDocumentParams:h,asCloseTextDocumentParams:g,asSaveTextDocumentParams:p,asWillSaveTextDocumentParams:m,asDidCreateFilesParams:D,asDidRenameFilesParams:b,asDidDeleteFilesParams:T,asWillCreateFilesParams:q,asWillRenameFilesParams:E,asWillDeleteFilesParams:I,asTextDocumentPositionParams:K,asCompletionParams:De,asSignatureHelpParams:cn,asWorkerPosition:_t,asRange:Ee,asPosition:Dt,asPositions:Gn,asLocation:ut,asDiagnosticSeverity:lt,asDiagnosticTag:dt,asDiagnostic:Bn,asDiagnostics:Xn,asCompletionItem:ln,asTextEdit:Qn,asSymbolKind:Kt,asSymbolTag:Ft,asSymbolTags:ze,asReferenceParams:fi,asCodeAction:Pt,asCodeActionContext:Vt,asInlineValueContext:Yn,asCommand:Gt,asCodeLens:dn,asFormattingOptions:v,asDocumentSymbolParams:P,asCodeLensParams:O,asDocumentLink:M,asDocumentLinkParams:le,asCallHierarchyItem:de,asTypeHierarchyItem:ve,asInlayHint:ee,asWorkspaceSymbol:be}}Xs.createConverter=z_});var zh=w(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.createConverter=void 0;var N=require("vscode"),z=V(),At=Nt(),ce=$i(),K_=fu(),V_=gu(),G_=yu(),B_=Du(),Wh=wu(),X_=Pu(),Q_=Eu(),J_=Iu(),Y_=Lu(),Uh=V(),Qs;(function(t){function e(n){let r=n;return r&&At.string(r.language)&&At.string(r.value)}t.is=e})(Qs||(Qs={}));function Z_(t,e,n){let i=t||(c=>N.Uri.parse(c));function s(c){return i(c)}function o(c){let C=[];for(let x of c)if(typeof x=="string")C.push(x);else if(Uh.NotebookCellTextDocumentFilter.is(x))if(typeof x.notebook=="string")C.push({notebookType:x.notebook,language:x.language});else{let H=x.notebook.notebookType??"*";C.push({notebookType:H,scheme:x.notebook.scheme,pattern:x.notebook.pattern,language:x.language})}else Uh.TextDocumentFilter.is(x)&&C.push({language:x.language,scheme:x.scheme,pattern:x.pattern});return C}async function a(c,C){return ce.map(c,l,C)}function u(c){let C=new Array(c.length);for(let x=0;x<c.length;x++)C[x]=l(c[x]);return C}function l(c){let C=new Wh.ProtocolDiagnostic(m(c.range),c.message,b(c.severity),c.data);if(c.code!==void 0){if(typeof c.code=="string"||typeof c.code=="number")z.CodeDescription.is(c.codeDescription)?C.code={value:c.code,target:s(c.codeDescription.href)}:C.code=c.code;else if(Wh.DiagnosticCode.is(c.code)){C.hasDiagnosticCode=!0;let x=c.code;C.code={value:x.value,target:s(x.target)}}}return c.source&&(C.source=c.source),c.relatedInformation&&(C.relatedInformation=h(c.relatedInformation)),Array.isArray(c.tags)&&(C.tags=g(c.tags)),C}function h(c){let C=new Array(c.length);for(let x=0;x<c.length;x++){let H=c[x];C[x]=new N.DiagnosticRelatedInformation(dt(H.location),H.message)}return C}function g(c){if(!c)return;let C=[];for(let x of c){let H=p(x);H!==void 0&&C.push(H)}return C.length>0?C:void 0}function p(c){switch(c){case z.DiagnosticTag.Unnecessary:return N.DiagnosticTag.Unnecessary;case z.DiagnosticTag.Deprecated:return N.DiagnosticTag.Deprecated;default:return}}function y(c){return c?new N.Position(c.line,c.character):void 0}function m(c){return c?new N.Range(c.start.line,c.start.character,c.end.line,c.end.character):void 0}async function D(c,C){return ce.map(c,x=>new N.Range(x.start.line,x.start.character,x.end.line,x.end.character),C)}function b(c){if(c==null)return N.DiagnosticSeverity.Error;switch(c){case z.DiagnosticSeverity.Error:return N.DiagnosticSeverity.Error;case z.DiagnosticSeverity.Warning:return N.DiagnosticSeverity.Warning;case z.DiagnosticSeverity.Information:return N.DiagnosticSeverity.Information;case z.DiagnosticSeverity.Hint:return N.DiagnosticSeverity.Hint}return N.DiagnosticSeverity.Error}function T(c){if(At.string(c))return E(c);if(Qs.is(c))return E().appendCodeblock(c.value,c.language);if(Array.isArray(c)){let C=[];for(let x of c){let H=E();Qs.is(x)?H.appendCodeblock(x.value,x.language):H.appendMarkdown(x),C.push(H)}return C}else return E(c)}function q(c){if(At.string(c))return c;switch(c.kind){case z.MarkupKind.Markdown:return E(c.value);case z.MarkupKind.PlainText:return c.value;default:return`Unsupported Markup content received. Kind is: ${c.kind}`}}function E(c){let C;if(c===void 0||typeof c=="string")C=new N.MarkdownString(c);else switch(c.kind){case z.MarkupKind.Markdown:C=new N.MarkdownString(c.value);break;case z.MarkupKind.PlainText:C=new N.MarkdownString,C.appendText(c.value);break;default:C=new N.MarkdownString,C.appendText(`Unsupported Markup content received. Kind is: ${c.kind}`);break}return C.isTrusted=e,C.supportHtml=n,C}function I(c){if(!!c)return new N.Hover(T(c.contents),m(c.range))}async function K(c,C,x){if(!c)return;if(Array.isArray(c))return ce.map(c,fn=>Tt(fn,C),x);let H=c,{defaultRange:Rt,commitCharacters:Qe}=Ne(H,C),fe=await ce.map(H.items,fn=>Tt(fn,Qe,Rt,H.itemDefaults?.insertTextMode,H.itemDefaults?.insertTextFormat,H.itemDefaults?.data),x);return new N.CompletionList(fe,H.isIncomplete)}function Ne(c,C){let x=c.itemDefaults?.editRange,H=c.itemDefaults?.commitCharacters??C;return z.Range.is(x)?{defaultRange:m(x),commitCharacters:H}:x!==void 0?{defaultRange:{inserting:m(x.insert),replacing:m(x.replace)},commitCharacters:H}:{defaultRange:void 0,commitCharacters:H}}function De(c){return z.CompletionItemKind.Text<=c&&c<=z.CompletionItemKind.TypeParameter?[c-1,void 0]:[N.CompletionItemKind.Text,c]}function Ct(c){switch(c){case z.CompletionItemTag.Deprecated:return N.CompletionItemTag.Deprecated}}function rt(c){if(c==null)return[];let C=[];for(let x of c){let H=Ct(x);H!==void 0&&C.push(H)}return C}function Tt(c,C,x,H,Rt,Qe){let fe=rt(c.tags),fn=an(c),me=new K_.default(fn);c.detail&&(me.detail=c.detail),c.documentation&&(me.documentation=q(c.documentation),me.documentationFormat=At.string(c.documentation)?"$string":c.documentation.kind),c.filterText&&(me.filterText=c.filterText);let vs=Ut(c,x,Rt);if(vs&&(me.insertText=vs.text,me.range=vs.range,me.fromEdit=vs.fromEdit),At.number(c.kind)){let[Km,hf]=De(c.kind);me.kind=Km,hf&&(me.originalItemKind=hf)}c.sortText&&(me.sortText=c.sortText),c.additionalTextEdits&&(me.additionalTextEdits=Dt(c.additionalTextEdits));let df=c.commitCharacters!==void 0?At.stringArray(c.commitCharacters)?c.commitCharacters:void 0:C;df&&(me.commitCharacters=df.slice()),c.command&&(me.command=ze(c.command)),(c.deprecated===!0||c.deprecated===!1)&&(me.deprecated=c.deprecated,c.deprecated===!0&&fe.push(N.CompletionItemTag.Deprecated)),(c.preselect===!0||c.preselect===!1)&&(me.preselect=c.preselect);let ff=c.data??Qe;ff!==void 0&&(me.data=ff),fe.length>0&&(me.tags=fe);let Bo=c.insertTextMode??H;return Bo!==void 0&&(me.insertTextMode=Bo,Bo===z.InsertTextMode.asIs&&(me.keepWhitespace=!0)),me}function an(c){return z.CompletionItemLabelDetails.is(c.labelDetails)?{label:c.label,detail:c.labelDetails.detail,description:c.labelDetails.description}:c.label}function Ut(c,C,x){let H=c.insertTextFormat??x;if(c.textEdit!==void 0||C!==void 0){let[Rt,Qe]=c.textEdit!==void 0?Ot(c.textEdit):[C,c.textEditText??c.label];return H===z.InsertTextFormat.Snippet?{text:new N.SnippetString(Qe),range:Rt,fromEdit:!0}:{text:Qe,range:Rt,fromEdit:!0}}else return c.insertText?H===z.InsertTextFormat.Snippet?{text:new N.SnippetString(c.insertText),fromEdit:!1}:{text:c.insertText,fromEdit:!1}:void 0}function Ot(c){return z.InsertReplaceEdit.is(c)?[{inserting:m(c.insert),replacing:m(c.replace)},c.newText]:[m(c.range),c.newText]}function cn(c){if(!!c)return new N.TextEdit(m(c.range),c.newText)}async function _t(c,C){if(!!c)return ce.map(c,cn,C)}function Dt(c){if(!c)return;let C=new Array(c.length);for(let x=0;x<c.length;x++)C[x]=cn(c[x]);return C}async function Gn(c,C){if(!c)return;let x=new N.SignatureHelp;return At.number(c.activeSignature)?x.activeSignature=c.activeSignature:x.activeSignature=0,At.number(c.activeParameter)?x.activeParameter=c.activeParameter:x.activeParameter=0,c.signatures&&(x.signatures=await Ee(c.signatures,C)),x}async function Ee(c,C){return ce.mapAsync(c,ut,C)}async function ut(c,C){let x=new N.SignatureInformation(c.label);return c.documentation!==void 0&&(x.documentation=q(c.documentation)),c.parameters!==void 0&&(x.parameters=await lt(c.parameters,C)),c.activeParameter!==void 0&&(x.activeParameter=c.activeParameter),x}function lt(c,C){return ce.map(c,un,C)}function un(c){let C=new N.ParameterInformation(c.label);return c.documentation&&(C.documentation=q(c.documentation)),C}function dt(c){return c?new N.Location(i(c.uri),m(c.range)):void 0}async function li(c,C){if(!!c)return Bn(c,C)}async function wr(c,C){if(!!c)return Bn(c,C)}function Sr(c){if(!c)return;let C={targetUri:i(c.targetUri),targetRange:m(c.targetRange),originSelectionRange:m(c.originSelectionRange),targetSelectionRange:m(c.targetSelectionRange)};if(!C.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return C}async function Bn(c,C){if(!!c)if(At.array(c)){if(c.length===0)return[];if(z.LocationLink.is(c[0])){let x=c;return ce.map(x,Sr,C)}else{let x=c;return ce.map(x,dt,C)}}else return z.LocationLink.is(c)?[Sr(c)]:dt(c)}async function Xn(c,C){if(!!c)return ce.map(c,dt,C)}async function di(c,C){if(!!c)return ce.map(c,Tr,C)}function Tr(c){let C=new N.DocumentHighlight(m(c.range));return At.number(c.kind)&&(C.kind=Pr(c.kind)),C}function Pr(c){switch(c){case z.DocumentHighlightKind.Text:return N.DocumentHighlightKind.Text;case z.DocumentHighlightKind.Read:return N.DocumentHighlightKind.Read;case z.DocumentHighlightKind.Write:return N.DocumentHighlightKind.Write}return N.DocumentHighlightKind.Text}async function It(c,C){if(!!c)return ce.map(c,Qn,C)}function ln(c){return c<=z.SymbolKind.TypeParameter?c-1:N.SymbolKind.Property}function xr(c){switch(c){case z.SymbolTag.Deprecated:return N.SymbolTag.Deprecated;default:return}}function zt(c){if(c==null)return;let C=[];for(let x of c){let H=xr(x);H!==void 0&&C.push(H)}return C.length===0?void 0:C}function Qn(c){let C=c.data,x=c.location,H=x.range===void 0||C!==void 0?new J_.default(c.name,ln(c.kind),c.containerName??"",x.range===void 0?i(x.uri):new N.Location(i(c.location.uri),m(x.range)),C):new N.SymbolInformation(c.name,ln(c.kind),c.containerName??"",new N.Location(i(c.location.uri),m(x.range)));return Ft(H,c),H}async function Ln(c,C){if(c!=null)return ce.map(c,Kt,C)}function Kt(c){let C=new N.DocumentSymbol(c.name,c.detail||"",ln(c.kind),m(c.range),m(c.selectionRange));if(Ft(C,c),c.children!==void 0&&c.children.length>0){let x=[];for(let H of c.children)x.push(Kt(H));C.children=x}return C}function Ft(c,C){c.tags=zt(C.tags),C.deprecated&&(c.tags?c.tags.includes(N.SymbolTag.Deprecated)||(c.tags=c.tags.concat(N.SymbolTag.Deprecated)):c.tags=[N.SymbolTag.Deprecated])}function ze(c){let C={title:c.title,command:c.command};return c.arguments&&(C.arguments=c.arguments),C}async function fi(c,C){if(!!c)return ce.map(c,ze,C)}let Pt=new Map;Pt.set(z.CodeActionKind.Empty,N.CodeActionKind.Empty),Pt.set(z.CodeActionKind.QuickFix,N.CodeActionKind.QuickFix),Pt.set(z.CodeActionKind.Refactor,N.CodeActionKind.Refactor),Pt.set(z.CodeActionKind.RefactorExtract,N.CodeActionKind.RefactorExtract),Pt.set(z.CodeActionKind.RefactorInline,N.CodeActionKind.RefactorInline),Pt.set(z.CodeActionKind.RefactorRewrite,N.CodeActionKind.RefactorRewrite),Pt.set(z.CodeActionKind.Source,N.CodeActionKind.Source),Pt.set(z.CodeActionKind.SourceOrganizeImports,N.CodeActionKind.SourceOrganizeImports);function Vt(c){if(c==null)return;let C=Pt.get(c);if(C)return C;let x=c.split(".");C=N.CodeActionKind.Empty;for(let H of x)C=C.append(H);return C}function qr(c){if(c!=null)return c.map(C=>Vt(C))}async function Jn(c,C){if(c==null)return;let x=new B_.default(c.title,c.data);return c.kind!==void 0&&(x.kind=Vt(c.kind)),c.diagnostics!==void 0&&(x.diagnostics=u(c.diagnostics)),c.edit!==void 0&&(x.edit=await v(c.edit,C)),c.command!==void 0&&(x.command=ze(c.command)),c.isPreferred!==void 0&&(x.isPreferred=c.isPreferred),c.disabled!==void 0&&(x.disabled={reason:c.disabled.reason}),x}function Yn(c,C){return ce.mapAsync(c,async x=>z.Command.is(x)?ze(x):Jn(x,C),C)}function Gt(c){if(!c)return;let C=new V_.default(m(c.range));return c.command&&(C.command=ze(c.command)),c.data!==void 0&&c.data!==null&&(C.data=c.data),C}async function dn(c,C){if(!!c)return ce.map(c,Gt,C)}async function v(c,C){if(!c)return;let x=new Map;if(c.changeAnnotations!==void 0){let Qe=c.changeAnnotations;await ce.forEach(Object.keys(Qe),fe=>{let fn=P(Qe[fe]);x.set(fe,fn)},C)}let H=Qe=>{if(Qe!==void 0)return x.get(Qe)},Rt=new N.WorkspaceEdit;if(c.documentChanges){let Qe=c.documentChanges;await ce.forEach(Qe,fe=>{if(z.CreateFile.is(fe))Rt.createFile(i(fe.uri),fe.options,H(fe.annotationId));else if(z.RenameFile.is(fe))Rt.renameFile(i(fe.oldUri),i(fe.newUri),fe.options,H(fe.annotationId));else if(z.DeleteFile.is(fe))Rt.deleteFile(i(fe.uri),fe.options,H(fe.annotationId));else if(z.TextDocumentEdit.is(fe)){let fn=i(fe.textDocument.uri);for(let me of fe.edits)z.AnnotatedTextEdit.is(me)?Rt.replace(fn,m(me.range),me.newText,H(me.annotationId)):Rt.replace(fn,m(me.range),me.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(fe,void 0,4)}`)},C)}else if(c.changes){let Qe=c.changes;await ce.forEach(Object.keys(Qe),fe=>{Rt.set(i(fe),Dt(Qe[fe]))},C)}return Rt}function P(c){if(c!==void 0)return{label:c.label,needsConfirmation:!!c.needsConfirmation,description:c.description}}function O(c){let C=m(c.range),x=c.target?s(c.target):void 0,H=new G_.default(C,x);return c.tooltip!==void 0&&(H.tooltip=c.tooltip),c.data!==void 0&&c.data!==null&&(H.data=c.data),H}async function M(c,C){if(!!c)return ce.map(c,O,C)}function le(c){return new N.Color(c.red,c.green,c.blue,c.alpha)}function de(c){return new N.ColorInformation(m(c.range),le(c.color))}async function ve(c,C){if(!!c)return ce.map(c,de,C)}function be(c){let C=new N.ColorPresentation(c.label);return C.additionalTextEdits=Dt(c.additionalTextEdits),c.textEdit&&(C.textEdit=cn(c.textEdit)),C}async function ee(c,C){if(!!c)return ce.map(c,be,C)}function ge(c){if(c)switch(c){case z.FoldingRangeKind.Comment:return N.FoldingRangeKind.Comment;case z.FoldingRangeKind.Imports:return N.FoldingRangeKind.Imports;case z.FoldingRangeKind.Region:return N.FoldingRangeKind.Region}}function te(c){return new N.FoldingRange(c.startLine,c.endLine,ge(c.kind))}async function d(c,C){if(!!c)return ce.map(c,te,C)}function R(c){return new N.SelectionRange(m(c.range),c.parent?R(c.parent):void 0)}async function L(c,C){return Array.isArray(c)?ce.map(c,R,C):[]}function J(c){return z.InlineValueText.is(c)?new N.InlineValueText(m(c.range),c.text):z.InlineValueVariableLookup.is(c)?new N.InlineValueVariableLookup(m(c.range),c.variableName,c.caseSensitiveLookup):new N.InlineValueEvaluatableExpression(m(c.range),c.expression)}async function oe(c,C){return Array.isArray(c)?ce.map(c,J,C):[]}async function Xe(c,C){let x=typeof c.label=="string"?c.label:await ce.map(c.label,_n,C),H=new Y_.default(y(c.position),x);return c.kind!==void 0&&(H.kind=c.kind),c.textEdits!==void 0&&(H.textEdits=await _t(c.textEdits,C)),c.tooltip!==void 0&&(H.tooltip=hi(c.tooltip)),c.paddingLeft!==void 0&&(H.paddingLeft=c.paddingLeft),c.paddingRight!==void 0&&(H.paddingRight=c.paddingRight),c.data!==void 0&&(H.data=c.data),H}function _n(c){let C=new N.InlayHintLabelPart(c.value);return c.location!==void 0&&(C.location=dt(c.location)),c.tooltip!==void 0&&(C.tooltip=hi(c.tooltip)),c.command!==void 0&&(C.command=ze(c.command)),C}function hi(c){return typeof c=="string"?c:E(c)}async function Fm(c,C){if(!!Array.isArray(c))return ce.mapAsync(c,Xe,C)}function ms(c){if(c===null)return;let C=new X_.default(ln(c.kind),c.name,c.detail||"",s(c.uri),m(c.range),m(c.selectionRange),c.data);return c.tags!==void 0&&(C.tags=zt(c.tags)),C}async function Nm(c,C){if(c!==null)return ce.map(c,ms,C)}async function af(c,C){return new N.CallHierarchyIncomingCall(ms(c.from),await D(c.fromRanges,C))}async function Lm(c,C){if(c!==null)return ce.mapAsync(c,af,C)}async function cf(c,C){return new N.CallHierarchyOutgoingCall(ms(c.to),await D(c.fromRanges,C))}async function Mm(c,C){if(c!==null)return ce.mapAsync(c,cf,C)}async function Am(c,C){if(c!=null)return new N.SemanticTokens(new Uint32Array(c.data),c.resultId)}function uf(c){return new N.SemanticTokensEdit(c.start,c.deleteCount,c.data!==void 0?new Uint32Array(c.data):void 0)}async function jm(c,C){if(c!=null)return new N.SemanticTokensEdits(c.edits.map(uf),c.resultId)}function $m(c){return c}async function Hm(c,C){if(c!=null)return new N.LinkedEditingRanges(await D(c.ranges,C),Wm(c.wordPattern))}function Wm(c){if(c!=null)return new RegExp(c)}function lf(c){if(c===null)return;let C=new Q_.default(ln(c.kind),c.name,c.detail||"",s(c.uri),m(c.range),m(c.selectionRange),c.data);return c.tags!==void 0&&(C.tags=zt(c.tags)),C}async function Um(c,C){if(c!==null)return ce.map(c,lf,C)}function zm(c){if(At.string(c))return c;if(z.RelativePattern.is(c)){if(z.URI.is(c.baseUri))return new N.RelativePattern(s(c.baseUri),c.pattern);if(z.WorkspaceFolder.is(c.baseUri)){let C=N.workspace.getWorkspaceFolder(s(c.baseUri.uri));return C!==void 0?new N.RelativePattern(C,c.pattern):void 0}}}return{asUri:s,asDocumentSelector:o,asDiagnostics:a,asDiagnostic:l,asRange:m,asRanges:D,asPosition:y,asDiagnosticSeverity:b,asDiagnosticTag:p,asHover:I,asCompletionResult:K,asCompletionItem:Tt,asTextEdit:cn,asTextEdits:_t,asSignatureHelp:Gn,asSignatureInformations:Ee,asSignatureInformation:ut,asParameterInformations:lt,asParameterInformation:un,asDeclarationResult:li,asDefinitionResult:wr,asLocation:dt,asReferences:Xn,asDocumentHighlights:di,asDocumentHighlight:Tr,asDocumentHighlightKind:Pr,asSymbolKind:ln,asSymbolTag:xr,asSymbolTags:zt,asSymbolInformations:It,asSymbolInformation:Qn,asDocumentSymbols:Ln,asDocumentSymbol:Kt,asCommand:ze,asCommands:fi,asCodeAction:Jn,asCodeActionKind:Vt,asCodeActionKinds:qr,asCodeActionResult:Yn,asCodeLens:Gt,asCodeLenses:dn,asWorkspaceEdit:v,asDocumentLink:O,asDocumentLinks:M,asFoldingRangeKind:ge,asFoldingRange:te,asFoldingRanges:d,asColor:le,asColorInformation:de,asColorInformations:ve,asColorPresentation:be,asColorPresentations:ee,asSelectionRange:R,asSelectionRanges:L,asInlineValue:J,asInlineValues:oe,asInlayHint:Xe,asInlayHints:Fm,asSemanticTokensLegend:$m,asSemanticTokens:Am,asSemanticTokensEdit:uf,asSemanticTokensEdits:jm,asCallHierarchyItem:ms,asCallHierarchyItems:Nm,asCallHierarchyIncomingCall:af,asCallHierarchyIncomingCalls:Lm,asCallHierarchyOutgoingCall:cf,asCallHierarchyOutgoingCalls:Mm,asLinkedEditingRanges:Hm,asTypeHierarchyItem:lf,asTypeHierarchyItems:Um,asGlobPattern:zm}}Js.createConverter=Z_});var Te=w(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.generateUuid=jt.parse=jt.isUUID=jt.v4=jt.empty=void 0;var Hi=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},X=class extends Hi{constructor(){super([X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),"-",X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),"-","4",X._randomHex(),X._randomHex(),X._randomHex(),"-",X._oneOf(X._timeHighBits),X._randomHex(),X._randomHex(),X._randomHex(),"-",X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex(),X._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return X._oneOf(X._chars)}};X._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];X._timeHighBits=["8","9","a","b"];jt.empty=new Hi("00000000-0000-0000-0000-000000000000");function Kh(){return new X}jt.v4=Kh;var eD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Vh(t){return eD.test(t)}jt.isUUID=Vh;function tD(t){if(!Vh(t))throw new Error("invalid uuid");return new Hi(t)}jt.parse=tD;function nD(){return Kh().asHex()}jt.generateUuid=nD});var ju=w(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.ProgressPart=void 0;var Gh=require("vscode"),Bh=V(),Xh=Nt(),Au=class{constructor(e,n,r){this._client=e,this._token=n,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(Bh.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&Gh.window.withProgress({location:Gh.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(n,r)=>{if(this._lspProgressDisposable!==void 0)return this._progress=n,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Bh.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})})}report(e){if(this._infinite&&Xh.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(Xh.number(e.percentage)){let n=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,n-this._reported);this._reported+=r,this._progress!==void 0&&this._progress.report({message:e.message,increment:r})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};Ys.ProgressPart=Au});var re=w(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.WorkspaceFeature=je.TextDocumentLanguageFeature=je.TextDocumentEventFeature=je.DynamicDocumentFeature=je.DynamicFeature=je.StaticFeature=je.ensure=je.LSPCancellationError=void 0;var lr=require("vscode"),$u=V(),gt=Nt(),Qh=Te(),Hu=class extends lr.CancellationError{constructor(e){super(),this.data=e}};je.LSPCancellationError=Hu;function rD(t,e){return t[e]===void 0&&(t[e]={}),t[e]}je.ensure=rD;var iD;(function(t){function e(n){let r=n;return r!=null&&gt.func(r.fillClientCapabilities)&&gt.func(r.initialize)&&gt.func(r.getState)&&gt.func(r.dispose)&&(r.fillInitializeParams===void 0||gt.func(r.fillInitializeParams))}t.is=e})(iD=je.StaticFeature||(je.StaticFeature={}));var sD;(function(t){function e(n){let r=n;return r!=null&&gt.func(r.fillClientCapabilities)&&gt.func(r.initialize)&&gt.func(r.getState)&&gt.func(r.dispose)&&(r.fillInitializeParams===void 0||gt.func(r.fillInitializeParams))&&gt.func(r.register)&&gt.func(r.unregister)&&r.registrationType!==void 0}t.is=e})(sD=je.DynamicFeature||(je.DynamicFeature={}));var Wi=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),n=0;for(let i of e){n++;for(let s of lr.workspace.textDocuments)if(lr.languages.match(i,s)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let r=n>0;return{kind:"document",id:this.registrationType.method,registrations:r,matches:!1}}};je.DynamicDocumentFeature=Wi;var Wu=class extends Wi{constructor(e,n,r,i,s,o,a){super(e),this._event=n,this._type=r,this._middleware=i,this._createParams=s,this._textDocument=o,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new lr.EventEmitter}static textDocumentFilter(e,n){for(let r of e)if(lr.languages.match(r,n)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(n=>{this.callback(n).catch(r=>{this._client.error(`Sending document notification ${this._type.method} failed.`,r)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let n=async r=>{let i=this._createParams(r);await this._client.sendNotification(this._type,i).catch(),this.notificationSent(r,this._type,i)};if(this.matches(e)){let r=this._middleware();return r?r(e,i=>n(i)):n(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,n,r){this._onNotificationSent.fire({original:e,type:n,params:r})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let n of this._selectors.values())if(lr.languages.match(n,e)>0)return{send:r=>this.callback(r)}}};je.TextDocumentEventFeature=Wu;var Uu=class extends Wi{constructor(e,n){super(e),this._registrationType=n,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let n=e.data.registerOptions.documentSelector;n!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(n))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:n[0],data:e,provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,n){if(n){if($u.TextDocumentRegistrationOptions.is(n)){let r=$u.StaticRegistrationOptions.hasId(n)?n.id:Qh.generateUuid(),i=n.documentSelector||e;if(i)return[r,Object.assign({},n,{documentSelector:i})]}else if(gt.boolean(n)&&n===!0||$u.WorkDoneProgressOptions.is(n)){if(!e)return[void 0,void 0];let r=gt.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e});return[Qh.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,n){if(!(!e||!n))return gt.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e})}getProvider(e){for(let n of this._registrations.values()){let r=n.data.registerOptions.documentSelector;if(r!==null&&lr.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(r),e)>0)return n.provider}}getAllProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};je.TextDocumentLanguageFeature=Uu;var zu=class{constructor(e,n){this._client=e,this._registrationType=n,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let n=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:n[0],provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};je.WorkspaceFeature=zu});var Yh=w((FS,Jh)=>{Jh.exports=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=e(t[r],r);oD(i)?n.push.apply(n,i):n.push(i)}return n};var oD=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var rp=w((NS,np)=>{"use strict";np.exports=ep;function ep(t,e,n){t instanceof RegExp&&(t=Zh(t,n)),e instanceof RegExp&&(e=Zh(e,n));var r=tp(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function Zh(t,e){var n=e.match(t);return n?n[0]:null}ep.range=tp;function tp(t,e,n){var r,i,s,o,a,u=n.indexOf(t),l=n.indexOf(e,u+1),h=u;if(u>=0&&l>0){if(t===e)return[u,l];for(r=[],s=n.length;h>=0&&!a;)h==u?(r.push(h),u=n.indexOf(t,h+1)):r.length==1?a=[r.pop(),l]:(i=r.pop(),i<s&&(s=i,o=l),l=n.indexOf(e,h+1)),h=u<l&&u>=0?u:l;r.length&&(a=[s,o])}return a}});var dp=w((LS,lp)=>{var aD=Yh(),ip=rp();lp.exports=lD;var sp="\0SLASH"+Math.random()+"\0",op="\0OPEN"+Math.random()+"\0",Vu="\0CLOSE"+Math.random()+"\0",ap="\0COMMA"+Math.random()+"\0",cp="\0PERIOD"+Math.random()+"\0";function Ku(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function cD(t){return t.split("\\\\").join(sp).split("\\{").join(op).split("\\}").join(Vu).split("\\,").join(ap).split("\\.").join(cp)}function uD(t){return t.split(sp).join("\\").split(op).join("{").split(Vu).join("}").split(ap).join(",").split(cp).join(".")}function up(t){if(!t)return[""];var e=[],n=ip("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,o=r.split(",");o[o.length-1]+="{"+i+"}";var a=up(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function lD(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Br(cD(t),!0).map(uD)):[]}function dD(t){return"{"+t+"}"}function fD(t){return/^-?0\d/.test(t)}function hD(t,e){return t<=e}function pD(t,e){return t>=e}function Br(t,e){var n=[],r=ip("{","}",t);if(!r||/\$$/.test(r.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),o=i||s,a=r.body.indexOf(",")>=0;if(!o&&!a)return r.post.match(/,.*\}/)?(t=r.pre+"{"+r.body+Vu+r.post,Br(t)):[t];var u;if(o)u=r.body.split(/\.\./);else if(u=up(r.body),u.length===1&&(u=Br(u[0],!1).map(dD),u.length===1)){var h=r.post.length?Br(r.post,!1):[""];return h.map(function(an){return r.pre+u[0]+an})}var l=r.pre,h=r.post.length?Br(r.post,!1):[""],g;if(o){var p=Ku(u[0]),y=Ku(u[1]),m=Math.max(u[0].length,u[1].length),D=u.length==3?Math.abs(Ku(u[2])):1,b=hD,T=y<p;T&&(D*=-1,b=pD);var q=u.some(fD);g=[];for(var E=p;b(E,y);E+=D){var I;if(s)I=String.fromCharCode(E),I==="\\"&&(I="");else if(I=String(E),q){var K=m-I.length;if(K>0){var Ne=new Array(K+1).join("0");E<0?I="-"+Ne+I.slice(1):I=Ne+I}}g.push(I)}}else g=aD(u,function(Tt){return Br(Tt,!1)});for(var De=0;De<g.length;De++)for(var Ct=0;Ct<h.length;Ct++){var rt=l+g[De]+h[Ct];(!e||o||rt)&&n.push(rt)}return n}});var to=w((MS,mp)=>{mp.exports=xt;xt.Minimatch=et;var Ui=function(){try{return require("path")}catch{}}()||{sep:"/"};xt.sep=Ui.sep;var Xu=xt.GLOBSTAR=et.GLOBSTAR={},gD=dp(),fp={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Gu="[^/]",Bu=Gu+"*?",mD="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",vD="(?:(?!(?:\\/|^)\\.).)*?",hp=yD("().*{}+?[]^$\\!");function yD(t){return t.split("").reduce(function(e,n){return e[n]=!0,e},{})}var pp=/\/+/;xt.filter=CD;function CD(t,e){return e=e||{},function(n,r,i){return xt(n,t,e)}}function Hn(t,e){e=e||{};var n={};return Object.keys(t).forEach(function(r){n[r]=t[r]}),Object.keys(e).forEach(function(r){n[r]=e[r]}),n}xt.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return xt;var e=xt,n=function(i,s,o){return e(i,s,Hn(t,o))};return n.Minimatch=function(i,s){return new e.Minimatch(i,Hn(t,s))},n.Minimatch.defaults=function(i){return e.defaults(Hn(t,i)).Minimatch},n.filter=function(i,s){return e.filter(i,Hn(t,s))},n.defaults=function(i){return e.defaults(Hn(t,i))},n.makeRe=function(i,s){return e.makeRe(i,Hn(t,s))},n.braceExpand=function(i,s){return e.braceExpand(i,Hn(t,s))},n.match=function(r,i,s){return e.match(r,i,Hn(t,s))},n};et.defaults=function(t){return xt.defaults(t).Minimatch};function xt(t,e,n){return eo(e),n||(n={}),!n.nocomment&&e.charAt(0)==="#"?!1:new et(e,n).match(t)}function et(t,e){if(!(this instanceof et))return new et(t,e);eo(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&Ui.sep!=="/"&&(t=t.split(Ui.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}et.prototype.debug=function(){};et.prototype.make=_D;function _D(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,n),n=this.globParts=n.map(function(r){return r.split(pp)}),this.debug(this.pattern,n),n=n.map(function(r,i,s){return r.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,n),this.set=n}et.prototype.parseNegate=DD;function DD(){var t=this.pattern,e=!1,n=this.options,r=0;if(!n.nonegate){for(var i=0,s=t.length;i<s&&t.charAt(i)==="!";i++)e=!e,r++;r&&(this.pattern=t.substr(r)),this.negate=e}}xt.braceExpand=function(t,e){return gp(t,e)};et.prototype.braceExpand=gp;function gp(t,e){return e||(this instanceof et?e=this.options:e={}),t=typeof t>"u"?this.pattern:t,eo(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:gD(t)}var RD=1024*64,eo=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>RD)throw new TypeError("pattern is too long")};et.prototype.parse=bD;var Zs={};function bD(t,e){eo(t);var n=this.options;if(t==="**")if(n.noglobstar)t="*";else return Xu;if(t==="")return"";var r="",i=!!n.nocase,s=!1,o=[],a=[],u,l=!1,h=-1,g=-1,p=t.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",y=this;function m(){if(u){switch(u){case"*":r+=Bu,i=!0;break;case"?":r+=Gu,i=!0;break;default:r+="\\"+u;break}y.debug("clearStateChar %j %j",u,r),u=!1}}for(var D=0,b=t.length,T;D<b&&(T=t.charAt(D));D++){if(this.debug("%s	%s %s %j",t,D,r,T),s&&hp[T]){r+="\\"+T,s=!1;continue}switch(T){case"/":return!1;case"\\":m(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,D,r,T),l){this.debug("  in class"),T==="!"&&D===g+1&&(T="^"),r+=T;continue}y.debug("call clearStateChar %j",u),m(),u=T,n.noext&&m();continue;case"(":if(l){r+="(";continue}if(!u){r+="\\(";continue}o.push({type:u,start:D-1,reStart:r.length,open:fp[u].open,close:fp[u].close}),r+=u==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",u,r),u=!1;continue;case")":if(l||!o.length){r+="\\)";continue}m(),i=!0;var q=o.pop();r+=q.close,q.type==="!"&&a.push(q),q.reEnd=r.length;continue;case"|":if(l||!o.length||s){r+="\\|",s=!1;continue}m(),r+="|";continue;case"[":if(m(),l){r+="\\"+T;continue}l=!0,g=D,h=r.length,r+=T;continue;case"]":if(D===g+1||!l){r+="\\"+T,s=!1;continue}var E=t.substring(g+1,D);try{RegExp("["+E+"]")}catch{var I=this.parse(E,Zs);r=r.substr(0,h)+"\\["+I[0]+"\\]",i=i||I[1],l=!1;continue}i=!0,l=!1,r+=T;continue;default:m(),s?s=!1:hp[T]&&!(T==="^"&&l)&&(r+="\\"),r+=T}}for(l&&(E=t.substr(g+1),I=this.parse(E,Zs),r=r.substr(0,h)+"\\["+I[0],i=i||I[1]),q=o.pop();q;q=o.pop()){var K=r.slice(q.reStart+q.open.length);this.debug("setting tail",r,q),K=K.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(lt,un,dt){return dt||(dt="\\"),un+un+dt+"|"}),this.debug(`tail=%j
   %s`,K,K,q,r);var Ne=q.type==="*"?Bu:q.type==="?"?Gu:"\\"+q.type;i=!0,r=r.slice(0,q.reStart)+Ne+"\\("+K}m(),s&&(r+="\\\\");var De=!1;switch(r.charAt(0)){case"[":case".":case"(":De=!0}for(var Ct=a.length-1;Ct>-1;Ct--){var rt=a[Ct],Tt=r.slice(0,rt.reStart),an=r.slice(rt.reStart,rt.reEnd-8),Ut=r.slice(rt.reEnd-8,rt.reEnd),Ot=r.slice(rt.reEnd);Ut+=Ot;var cn=Tt.split("(").length-1,_t=Ot;for(D=0;D<cn;D++)_t=_t.replace(/\)[+*?]?/,"");Ot=_t;var Dt="";Ot===""&&e!==Zs&&(Dt="$");var Gn=Tt+an+Ot+Dt+Ut;r=Gn}if(r!==""&&i&&(r="(?=.)"+r),De&&(r=p+r),e===Zs)return[r,i];if(!i)return SD(t);var Ee=n.nocase?"i":"";try{var ut=new RegExp("^"+r+"$",Ee)}catch{return new RegExp("$.")}return ut._glob=t,ut._src=r,ut}xt.makeRe=function(t,e){return new et(t,e||{}).makeRe()};et.prototype.makeRe=wD;function wD(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?Bu:e.dot?mD:vD,r=e.nocase?"i":"",i=t.map(function(s){return s.map(function(o){return o===Xu?n:typeof o=="string"?TD(o):o._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch{this.regexp=!1}return this.regexp}xt.match=function(t,e,n){n=n||{};var r=new et(e,n);return t=t.filter(function(i){return r.match(i)}),r.options.nonull&&!t.length&&t.push(e),t};et.prototype.match=function(e,n){if(typeof n>"u"&&(n=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;var r=this.options;Ui.sep!=="/"&&(e=e.split(Ui.sep).join("/")),e=e.split(pp),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var s,o;for(o=e.length-1;o>=0&&(s=e[o],!s);o--);for(o=0;o<i.length;o++){var a=i[o],u=e;r.matchBase&&a.length===1&&(u=[s]);var l=this.matchOne(u,a,n);if(l)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate};et.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,s=0,o=t.length,a=e.length;i<o&&s<a;i++,s++){this.debug("matchOne loop");var u=e[s],l=t[i];if(this.debug(e,u,l),u===!1)return!1;if(u===Xu){this.debug("GLOBSTAR",[e,u,l]);var h=i,g=s+1;if(g===a){for(this.debug("** at the end");i<o;i++)if(t[i]==="."||t[i]===".."||!r.dot&&t[i].charAt(0)===".")return!1;return!0}for(;h<o;){var p=t[h];if(this.debug(`
globstar while`,t,h,e,g,p),this.matchOne(t.slice(h),e.slice(g),n))return this.debug("globstar found match!",h,o,p),!0;if(p==="."||p===".."||!r.dot&&p.charAt(0)==="."){this.debug("dot detected!",t,h,e,g);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(n&&(this.debug(`
>>> no match, partial?`,t,h,e,g),h===o))}var y;if(typeof u=="string"?(y=l===u,this.debug("string match",u,l,y)):(y=l.match(u),this.debug("pattern match",u,l,y)),!y)return!1}if(i===o&&s===a)return!0;if(i===o)return n;if(s===a)return i===o-1&&t[i]==="";throw new Error("wtf?")};function SD(t){return t.replace(/\\(.)/g,"$1")}function TD(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var rl=w(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.DiagnosticFeature=yn.DiagnosticPullMode=yn.vsdiag=void 0;var PD=to(),Y=require("vscode"),Ie=V(),xD=Te(),Qu=re();function no(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var nn;(function(t){let e;(function(n){n.full="full",n.unChanged="unChanged"})(e=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={}))})(nn=yn.vsdiag||(yn.vsdiag={}));var Ju;(function(t){t.onType="onType",t.onSave="onSave"})(Ju=yn.DiagnosticPullMode||(yn.DiagnosticPullMode={}));var at;(function(t){t.active="open",t.reschedule="reschedule",t.outDated="drop"})(at||(at={}));var dr=class{constructor(){this.open=new Set,this._onOpen=new Y.EventEmitter,this._onClose=new Y.EventEmitter,dr.fillTabResources(this.open);let e=n=>{if(n.closed.length===0&&n.opened.length===0)return;let r=this.open,i=new Set;dr.fillTabResources(i);let s=new Set,o=new Set(i);for(let a of r.values())i.has(a)?o.delete(a):s.add(a);if(this.open=i,s.size>0){let a=new Set;for(let u of s)a.add(Y.Uri.parse(u));this._onClose.fire(a)}if(o.size>0){let a=new Set;for(let u of o)a.add(Y.Uri.parse(u));this._onOpen.fire(a)}};Y.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=Y.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof Y.Uri?Y.window.activeTextEditor?.document.uri===e:Y.window.activeTextEditor?.document===e}isVisible(e){let n=e instanceof Y.Uri?e:e.uri;return this.open.has(n.toString())}getTabResources(){let e=new Set;return dr.fillTabResources(new Set,e),e}static fillTabResources(e,n){let r=e??new Set;for(let i of Y.window.tabGroups.all)for(let s of i.tabs){let o=s.input,a;o instanceof Y.TabInputText?a=o.uri:o instanceof Y.TabInputTextDiff&&(a=o.modified),a!==void 0&&!r.has(a.toString())&&(r.add(a.toString()),n!==void 0&&n.add(a))}}},Ve;(function(t){t[t.document=1]="document",t[t.workspace=2]="workspace"})(Ve||(Ve={}));var Yu=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,n,r){let i=e===Ve.document?this.documentPullStates:this.workspacePullStates,[s,o,a]=n instanceof Y.Uri?[n.toString(),n,r]:[n.uri.toString(),n.uri,n.version],u=i.get(s);return u===void 0&&(u={document:o,pulledVersion:a,resultId:void 0},i.set(s,u)),u}update(e,n,r,i){let s=e===Ve.document?this.documentPullStates:this.workspacePullStates,[o,a,u,l]=n instanceof Y.Uri?[n.toString(),n,r,i]:[n.uri.toString(),n.uri,n.version,r],h=s.get(o);h===void 0?(h={document:a,pulledVersion:u,resultId:l},s.set(o,h)):(h.pulledVersion=u,h.resultId=l)}unTrack(e,n){let r=n instanceof Y.Uri?n.toString():n.uri.toString();(e===Ve.document?this.documentPullStates:this.workspacePullStates).delete(r)}tracks(e,n){let r=n instanceof Y.Uri?n.toString():n.uri.toString();return(e===Ve.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,n){let r=n instanceof Y.Uri?n.toString():n.uri.toString();return(e===Ve.document?this.documentPullStates:this.workspacePullStates).get(r)?.resultId}getAllResultIds(){let e=[];for(let[n,r]of this.workspacePullStates)this.documentPullStates.has(n)&&(r=this.documentPullStates.get(n)),r.resultId!==void 0&&e.push({uri:n,value:r.resultId});return e}},Zu=class{constructor(e,n,r){this.client=e,this.tabs=n,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new Y.EventEmitter,this.provider=this.createProvider(),this.diagnostics=Y.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new Yu,this.workspaceErrorCounter=0}knows(e,n){return this.documentStates.tracks(e,n)}forget(e,n){this.documentStates.unTrack(e,n)}pull(e,n){if(this.isDisposed)return;let r=e instanceof Y.Uri?e:e.uri;this.pullAsync(e).then(()=>{n&&n()},i=>{this.client.error(`Document pull failed for text document ${r.toString()}`,i,!1)})}async pullAsync(e,n){if(this.isDisposed)return;let r=e instanceof Y.Uri,i=r?e:e.uri,s=i.toString();n=r?n:e.version;let o=this.openRequests.get(s),a=r?this.documentStates.track(Ve.document,e,n):this.documentStates.track(Ve.document,e);if(o===void 0){let u=new Y.CancellationTokenSource;this.openRequests.set(s,{state:at.active,document:e,version:n,tokenSource:u});let l,h;try{l=await this.provider.provideDiagnostics(e,a.resultId,u.token)??{kind:nn.DocumentDiagnosticReportKind.full,items:[]}}catch(g){if(g instanceof Qu.LSPCancellationError&&Ie.DiagnosticServerCancellationData.is(g.data)&&g.data.retriggerRequest===!1&&(h={state:at.outDated,document:e}),h===void 0&&g instanceof Y.CancellationError)h={state:at.reschedule,document:e};else throw g}if(h=h??this.openRequests.get(s),h===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${s}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(s),!this.tabs.isVisible(e)){this.documentStates.unTrack(Ve.document,e);return}if(h.state===at.outDated)return;l!==void 0&&(l.kind===nn.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,l.items),a.pulledVersion=n,a.resultId=l.resultId),h.state===at.reschedule&&this.pull(e)}else o.state===at.active?(o.tokenSource.cancel(),this.openRequests.set(s,{state:at.reschedule,document:o.document})):o.state===at.outDated&&this.openRequests.set(s,{state:at.reschedule,document:o.document})}forgetDocument(e){let n=e instanceof Y.Uri?e:e.uri,r=n.toString(),i=this.openRequests.get(r);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(r,{state:at.reschedule,document:e}):this.pull(e,()=>{this.forget(Ve.document,e)}):(i!==void 0&&(i.state===at.active&&i.tokenSource.cancel(),this.openRequests.set(r,{state:at.outDated,document:e})),this.diagnostics.delete(n),this.forget(Ve.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,Ie.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof Qu.LSPCancellationError)&&!Ie.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,Ie.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new Y.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(n=>({uri:this.client.protocol2CodeConverter.asUri(n.uri),value:n.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,n=>{if(!(!n||this.isDisposed))for(let r of n.items)r.kind===nn.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(Ve.document,r.uri)||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(Ve.workspace,r.uri,r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(n,r,i)=>{let s=(a,u,l)=>{let h={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a instanceof Y.Uri?a:a.uri)},previousResultId:u};return this.isDisposed===!0||!this.client.isRunning()?{kind:nn.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(Ie.DocumentDiagnosticRequest.type,h,l).then(async g=>g==null||this.isDisposed||l.isCancellationRequested?{kind:nn.DocumentDiagnosticReportKind.full,items:[]}:g.kind===Ie.DocumentDiagnosticReportKind.Full?{kind:nn.DocumentDiagnosticReportKind.full,resultId:g.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(g.items,l)}:{kind:nn.DocumentDiagnosticReportKind.unChanged,resultId:g.resultId},g=>this.client.handleFailedRequest(Ie.DocumentDiagnosticRequest.type,l,g,{kind:nn.DocumentDiagnosticReportKind.full,items:[]}))},o=this.client.middleware;return o.provideDiagnostics?o.provideDiagnostics(n,r,i,s):s(n,r,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(n,r,i)=>{let s=async l=>l.kind===Ie.DocumentDiagnosticReportKind.Full?{kind:nn.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(l.uri),resultId:l.resultId,version:l.version,items:await this.client.protocol2CodeConverter.asDiagnostics(l.items,r)}:{kind:nn.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(l.uri),resultId:l.resultId,version:l.version},o=l=>{let h=[];for(let g of l)h.push({uri:this.client.code2ProtocolConverter.asUri(g.uri),value:g.value});return h},a=(l,h)=>{let g=(0,xD.generateUuid)(),p=this.client.onProgress(Ie.WorkspaceDiagnosticRequest.partialResult,g,async m=>{if(m==null){i(null);return}let D={items:[]};for(let b of m.items)try{D.items.push(await s(b))}catch(T){this.client.error("Converting workspace diagnostics failed.",T)}i(D)}),y={identifier:this.options.identifier,previousResultIds:o(l),partialResultToken:g};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(Ie.WorkspaceDiagnosticRequest.type,y,h).then(async m=>{if(h.isCancellationRequested)return{items:[]};let D={items:[]};for(let b of m.items)D.items.push(await s(b));return p.dispose(),i(D),{items:[]}},m=>(p.dispose(),this.client.handleFailedRequest(Ie.DocumentDiagnosticRequest.type,h,m,{items:[]})))},u=this.client.middleware;return u.provideWorkspaceDiagnostics?u.provideWorkspaceDiagnostics(n,r,i,a):a(n,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,n]of this.openRequests)n.state===at.active&&n.tokenSource.cancel(),this.openRequests.set(e,{state:at.outDated,document:n.document});this.diagnostics.dispose()}},el=class{constructor(e){this.diagnosticRequestor=e,this.documents=new Ie.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let n=e instanceof Y.Uri?e.toString():e.uri.toString();this.documents.has(n)||(this.documents.set(n,e,Ie.Touch.Last),this.trigger())}remove(e){let n=e instanceof Y.Uri?e.toString():e.uri.toString();this.documents.has(n)&&(this.documents.delete(n),this.diagnosticRequestor.pull(e)),this.documents.size===0?this.stop():e===this.endDocument&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,Ie.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let n=e instanceof Y.Uri?e.toString():e.uri.toString();this.diagnosticRequestor.pull(e),this.documents.set(n,e,Ie.Touch.Last),e===this.endDocument&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}},tl=class{constructor(e,n,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},s=e.protocol2CodeConverter.asDocumentSelector(r.documentSelector),o=[],a=m=>{let D=r.documentSelector;if(i.match!==void 0)return i.match(D,m);for(let b of D)if(!!Ie.TextDocumentFilter.is(b)){if(typeof b=="string"||b.language!==void 0&&b.language!=="*"||b.scheme!==void 0&&b.scheme!=="*"&&b.scheme!==m.scheme)return!1;if(b.pattern!==void 0){let T=new PD.Minimatch(b.pattern,{noext:!0});if(!T.makeRe()||!T.match(m.fsPath))return!1}}return!0},u=m=>m instanceof Y.Uri?a(m):Y.languages.match(s,m)>0&&n.isVisible(m),l=m=>m instanceof Y.Uri?this.activeTextDocument?.uri.toString()===m.toString():this.activeTextDocument===m;this.diagnosticRequestor=new Zu(e,n,r),this.backgroundScheduler=new el(this.diagnosticRequestor);let h=m=>{!u(m)||!r.interFileDependencies||l(m)||this.backgroundScheduler.add(m)};this.activeTextDocument=Y.window.activeTextEditor?.document,Y.window.onDidChangeActiveTextEditor(m=>{let D=this.activeTextDocument;this.activeTextDocument=m?.document,D!==void 0&&h(D),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let g=e.getFeature(Ie.DidOpenTextDocumentNotification.method);o.push(g.onNotificationSent(m=>{let D=m.original;u(D)&&this.diagnosticRequestor.pull(D,()=>{h(D)})}));let p=new Set;for(let m of Y.workspace.textDocuments)u(m)&&(this.diagnosticRequestor.pull(m,()=>{h(m)}),p.add(m.uri.toString()));if(i.onTabs===!0)for(let m of n.getTabResources())!p.has(m.toString())&&u(m)&&this.diagnosticRequestor.pull(m,()=>{h(m)});if(n.onOpen(m=>{for(let D of m)u(D)&&!this.diagnosticRequestor.knows(Ve.document,D)&&this.diagnosticRequestor.pull(D,()=>{h(D)})}),i.onChange===!0){let m=e.getFeature(Ie.DidChangeTextDocumentNotification.method);o.push(m.onNotificationSent(async D=>{let b=D.original.document;(i.filter===void 0||!i.filter(b,Ju.onType))&&this.diagnosticRequestor.knows(Ve.document,b)&&D.original.contentChanges.length>0&&this.diagnosticRequestor.pull(b,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let m=e.getFeature(Ie.DidSaveTextDocumentNotification.method);o.push(m.onNotificationSent(D=>{let b=D.original;(i.filter===void 0||!i.filter(b,Ju.onSave))&&this.diagnosticRequestor.knows(Ve.document,b)&&this.diagnosticRequestor.pull(D.original,()=>{this.backgroundScheduler.trigger()})}))}let y=e.getFeature(Ie.DidCloseTextDocumentNotification.method);o.push(y.onNotificationSent(m=>{this.cleanUpDocument(m.original)})),n.onClose(m=>{for(let D of m)this.cleanUpDocument(D)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let m of Y.workspace.textDocuments)u(m)&&this.diagnosticRequestor.pull(m)}),r.workspaceDiagnostics===!0&&r.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=Y.Disposable.from(...o,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(Ve.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},nl=class extends Qu.TextDocumentLanguageFeature{constructor(e){super(e,Ie.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let n=no(no(e,"textDocument"),"diagnostic");n.dynamicRegistration=!0,n.relatedDocumentSupport=!1,no(no(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,n){this._client.onRequest(Ie.DiagnosticRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeDiagnosticsEmitter.fire()});let[i,s]=this.getRegistration(n,e.diagnosticProvider);!i||!s||this.register({id:i,registerOptions:s})}dispose(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new dr);let n=new tl(this._client,this.tabs,e);return[n.disposable,n]}};yn.DiagnosticFeature=nl});var Cp=w(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.NotebookDocumentSyncFeature=void 0;var ct=require("vscode"),qD=to(),Pn=V(),ED=Te(),vp=Nt();function yp(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Xr;(function(t){let e;(function(n){function r(p,y){return{version:p.version,uri:y.asUri(p.uri)}}n.asVersionedNotebookDocumentIdentifier=r;function i(p,y,m){let D=Pn.NotebookDocument.create(m.asUri(p.uri),p.notebookType,p.version,s(y,m));return Object.keys(p.metadata).length>0&&(D.metadata=o(p.metadata)),D}n.asNotebookDocument=i;function s(p,y){return p.map(m=>a(m,y))}n.asNotebookCells=s;function o(p){return l(new Set,p)}n.asMetadata=o;function a(p,y){let m=Pn.NotebookCell.create(u(p.kind),y.asUri(p.document.uri));return Object.keys(p.metadata).length>0&&(m.metadata=o(p.metadata)),p.executionSummary!==void 0&&vp.number(p.executionSummary.executionOrder)&&vp.boolean(p.executionSummary.success)&&(m.executionSummary={executionOrder:p.executionSummary.executionOrder,success:p.executionSummary.success}),m}n.asNotebookCell=a;function u(p){switch(p){case ct.NotebookCellKind.Markup:return Pn.NotebookCellKind.Markup;case ct.NotebookCellKind.Code:return Pn.NotebookCellKind.Code}}function l(p,y){if(p.has(y))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(y)){let m=[];for(let D of y)if(D!==null&&typeof D=="object"||Array.isArray(D))m.push(l(p,D));else{if(D instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");m.push(D)}return m}else{let m=Object.keys(y),D=Object.create(null);for(let b of m){let T=y[b];if(T!==null&&typeof T=="object"||Array.isArray(T))D[b]=l(p,T);else{if(T instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");D[b]=T}}return D}}function h(p,y){let m=y.asChangeTextDocumentParams(p);return{document:m.textDocument,changes:m.contentChanges}}n.asTextContentChange=h;function g(p,y){let m=Object.create(null);if(p.metadata&&(m.metadata=t.c2p.asMetadata(p.metadata)),p.cells!==void 0){let D=Object.create(null),b=p.cells;b.structure&&(D.structure={array:{start:b.structure.array.start,deleteCount:b.structure.array.deleteCount,cells:b.structure.array.cells!==void 0?b.structure.array.cells.map(T=>t.c2p.asNotebookCell(T,y)):void 0},didOpen:b.structure.didOpen!==void 0?b.structure.didOpen.map(T=>y.asOpenTextDocumentParams(T.document).textDocument):void 0,didClose:b.structure.didClose!==void 0?b.structure.didClose.map(T=>y.asCloseTextDocumentParams(T.document).textDocument):void 0}),b.data!==void 0&&(D.data=b.data.map(T=>t.c2p.asNotebookCell(T,y))),b.textContent!==void 0&&(D.textContent=b.textContent.map(T=>t.c2p.asTextContentChange(T,y))),Object.keys(D).length>0&&(m.cells=D)}return m}n.asNotebookDocumentChangeEvent=g})(e=t.c2p||(t.c2p={}))})(Xr||(Xr={}));var il;(function(t){function e(a,u,l){let h=a.length,g=u.length,p=0;for(;p<g&&p<h&&n(a[p],u[p],l);)p++;if(p<g&&p<h){let y=h-1,m=g-1;for(;y>=0&&m>=0&&n(a[y],u[m],l);)y--,m--;let D=y+1-p,b=p===m+1?void 0:u.slice(p,m+1);return b!==void 0?{start:p,deleteCount:D,cells:b}:{start:p,deleteCount:D}}else return p<g?{start:p,deleteCount:0,cells:u.slice(p)}:p<h?{start:p,deleteCount:h-p}:void 0}t.computeDiff=e;function n(a,u,l=!0){return a.kind!==u.kind||a.document.uri.toString()!==u.document.uri.toString()||a.document.languageId!==u.document.languageId||!r(a.executionSummary,u.executionSummary)?!1:!l||l&&s(a.metadata,u.metadata)}function r(a,u){return a===u?!0:a===void 0||u===void 0?!1:a.executionOrder===u.executionOrder&&a.success===u.success&&i(a.timing,u.timing)}function i(a,u){return a===u?!0:a===void 0||u===void 0?!1:a.startTime===u.startTime&&a.endTime===u.endTime}function s(a,u){if(a===u)return!0;if(a==null||u===null||u===void 0||typeof a!=typeof u||typeof a!="object")return!1;let l=Array.isArray(a),h=Array.isArray(u);if(l!==h)return!1;if(l&&h){if(a.length!==u.length)return!1;for(let g=0;g<a.length;g++)if(!s(a[g],u[g]))return!1}if(o(a)&&o(u)){let g=Object.keys(a),p=Object.keys(u);if(g.length!==p.length||(g.sort(),p.sort(),!s(g,p)))return!1;for(let y=0;y<g.length;y++){let m=g[y];if(!s(a[m],u[m]))return!1}return!0}return!1}function o(a){return a!==null&&typeof a=="object"}t.isObjectLiteral=o})(il||(il={}));var sl;(function(t){function e(n,r){if(typeof n=="string")return n==="*"||r.notebookType===n;if(n.notebookType!==void 0&&n.notebookType!=="*"&&r.notebookType!==n.notebookType)return!1;let i=r.uri;if(n.scheme!==void 0&&n.scheme!=="*"&&i.scheme!==n.scheme)return!1;if(n.pattern!==void 0){let s=new qD.Minimatch(n.pattern,{noext:!0});if(!s.makeRe()||!s.match(i.fsPath))return!1}return!0}t.matchNotebook=e})(sl||(sl={}));var ro;(function(t){function e(r){let i=r.notebookSelector,s=[];for(let o of i){let a=(typeof o.notebook=="string"?o.notebook:o.notebook?.notebookType)??"*",u=typeof o.notebook=="string"?void 0:o.notebook?.scheme,l=typeof o.notebook=="string"?void 0:o.notebook?.pattern;if(o.cells!==void 0)for(let h of o.cells)s.push(n(a,u,l,h.language));else s.push(n(a,u,l,void 0))}return s}t.asDocumentSelector=e;function n(r,i,s,o){return i===void 0&&s===void 0?{notebook:r,language:o}:{notebook:{notebookType:r,scheme:i,pattern:s},language:o}}})(ro||(ro={}));var io;(function(t){function e(n){return{cells:n,uris:new Set(n.map(r=>r.document.uri.toString()))}}t.create=e})(io||(io={}));var Qr=class{constructor(e,n){this.client=e,this.options=n,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(ro.asDocumentSelector(n)),ct.workspace.onDidOpenNotebookDocument(r=>{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of ct.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);ct.workspace.onDidChangeNotebookDocument(r=>this.didChangeNotebookDocument(r),void 0,this.disposables),this.options.save===!0&&ct.workspace.onDidSaveNotebookDocument(r=>this.didSave(r),void 0,this.disposables),ct.workspace.onDidCloseNotebookDocument(r=>{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}getState(){for(let e of ct.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return ct.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,n){if(ct.languages.match(this.selector,n.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,n);if(r!==void 0){let s=r.uris.has(n.document.uri.toString());if(i&&s||!i&&!s)return;if(i){let o=this.getMatchingCells(e);if(o!==void 0){let a=this.asNotebookDocumentChangeEvent(e,void 0,r,o);a!==void 0&&this.doSendChange(a,o).catch(()=>{})}}}else i&&this.doSendOpen(e,[n]).catch(()=>{})}didChangeNotebookCellTextDocument(e,n){ct.languages.match(this.selector,n.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[n]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,n){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0)return;let i=n.document.uri,s=r.cells.findIndex(o=>o.document.uri.toString()===i.toString());if(s!==-1)if(s===0&&r.cells.length===1)this.doSendClose(e,r.cells).catch(()=>{});else{let o=r.cells.slice(),a=o.splice(s,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:s,deleteCount:1},didClose:a}}},o).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,n=this.getMatchingCells(e),r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)if(n!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,r,n);i!==void 0&&this.doSendChange(i,n).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(n===void 0)return;this.doSendOpen(e,n).catch(()=>{})}}didChangeNotebookDocument(e){let n=e.notebook,r=this.notebookSyncInfo.get(n.uri.toString());if(r===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(n);if(i===void 0)return;this.didOpen(n,i,r)}else{let i=this.getMatchingCells(n);if(i===void 0){this.didClose(n,r);return}let s=this.asNotebookDocumentChangeEvent(e.notebook,e,r,i);s!==void 0&&this.doSendChange(s,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,n=this.notebookSyncInfo.get(e.uri.toString())){if(n===void 0)return;let r=e.getCells().filter(i=>n.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=>{})}async sendDidOpenNotebookDocument(e){let n=this.getMatchingCells(e);if(n!==void 0)return this.doSendOpen(e,n)}async doSendOpen(e,n){let r=async(s,o)=>{let a=Xr.c2p.asNotebookDocument(s,o,this.client.code2ProtocolConverter),u=o.map(l=>this.client.code2ProtocolConverter.asTextDocumentItem(l.document));try{await this.client.sendNotification(Pn.DidOpenNotebookDocumentNotification.type,{notebookDocument:a,cellTextDocuments:u})}catch(l){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",l),l}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),io.create(n)),i?.didOpen!==void 0?i.didOpen(e,n,r):r(e,n)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,n=this.getMatchingCells(e.notebook)){let r=async s=>{try{await this.client.sendNotification(Pn.DidChangeNotebookDocumentNotification.type,{notebookDocument:Xr.c2p.asVersionedNotebookDocumentIdentifier(s.notebook,this.client.code2ProtocolConverter),change:Xr.c2p.asNotebookDocumentChangeEvent(s,this.client.code2ProtocolConverter)})}catch(o){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",o),o}},i=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),io.create(n??[])),i?.didChange!==void 0?i?.didChange(e,r):r(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let n=async i=>{try{await this.client.sendNotification(Pn.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}})}catch(s){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",s),s}},r=this.client.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,n):n(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,n){let r=async(s,o)=>{try{await this.client.sendNotification(Pn.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},cellTextDocuments:o.map(a=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))})}catch(a){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",a),a}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),i?.didClose!==void 0?i.didClose(e,n,r):r(e,n)}asNotebookDocumentChangeEvent(e,n,r,i){if(n!==void 0&&n.notebook!==e)throw new Error("Notebook must be identical");let s={notebook:e};n?.metadata!==void 0&&(s.metadata=Xr.c2p.asMetadata(n.metadata));let o;if(n?.cellChanges!==void 0&&n.cellChanges.length>0){let a=[];o=new Set(i.map(u=>u.document.uri.toString()));for(let u of n.cellChanges)o.has(u.cell.document.uri.toString())&&(u.executionSummary!==void 0||u.metadata!==void 0)&&a.push(u.cell);a.length>0&&(s.cells=s.cells??{},s.cells.data=a)}if((n?.contentChanges!==void 0&&n.contentChanges.length>0||n===void 0)&&r!==void 0&&i!==void 0){let a=r.cells,u=i,l=il.computeDiff(a,u,!1),h,g;if(l!==void 0){h=l.cells===void 0?new Map:new Map(l.cells.map(m=>[m.document.uri.toString(),m])),g=l.deleteCount===0?new Map:new Map(a.slice(l.start,l.start+l.deleteCount).map(m=>[m.document.uri.toString(),m]));for(let m of Array.from(g.keys()))h.has(m)&&(g.delete(m),h.delete(m));s.cells=s.cells??{};let p=[],y=[];if(h.size>0||g.size>0){for(let m of h.values())p.push(m);for(let m of g.values())y.push(m)}s.cells.structure={array:l,didOpen:p,didClose:y}}}return Object.keys(s).length>1?s:void 0}getMatchingCells(e,n=e.getCells()){if(this.options.notebookSelector!==void 0){for(let r of this.options.notebookSelector)if(r.notebook===void 0||sl.matchNotebook(r.notebook,e)){let i=this.filterCells(e,n,r.cells);return i.length===0?void 0:i}}}cellMatches(e,n){let r=this.getMatchingCells(e,[n]);return r!==void 0&&r[0]===n}filterCells(e,n,r){let i=r!==void 0?n.filter(s=>{let o=s.document.languageId;return r.some(a=>a.language==="*"||o===a.language)}):n;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},xn=class{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=Pn.NotebookDocumentSyncRegistrationType.type,ct.workspace.onDidOpenTextDocument(n=>{if(n.uri.scheme!==xn.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(n);if(!(r===void 0||i===void 0))for(let s of this.registrations.values())s instanceof Qr&&s.didOpenNotebookCellTextDocument(r,i)}),ct.workspace.onDidChangeTextDocument(n=>{if(n.contentChanges.length===0)return;let r=n.document;if(r.uri.scheme!==xn.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(r);if(i!==void 0)for(let s of this.registrations.values())s instanceof Qr&&s.didChangeNotebookCellTextDocument(i,n)}),ct.workspace.onDidCloseTextDocument(n=>{if(n.uri.scheme!==xn.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(n);if(!(r===void 0||i===void 0))for(let s of this.registrations.values())s instanceof Qr&&s.didCloseNotebookCellTextDocument(r,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let n=e.getState();if(n.kind==="document"&&n.registrations===!0&&n.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let n=yp(yp(e,"notebookDocument"),"synchronization");n.dynamicRegistration=!0,n.executionSummarySupport=!0}preInitialize(e){let n=e.notebookDocumentSync;n!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(ro.asDocumentSelector(n)))}initialize(e){let n=e.notebookDocumentSync;if(n===void 0)return;let r=n.id??ED.generateUuid();this.register({id:r,registerOptions:n})}register(e){let n=new Qr(this.client,e.registerOptions);this.registrations.set(e.id,n)}unregister(e){let n=this.registrations.get(e);n&&n.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==xn.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&ct.languages.match(this.dedicatedChannel,e)>0)return!0;for(let n of this.registrations.values())if(n.handles(e))return!0;return!1}getProvider(e){for(let n of this.registrations.values())if(n.handles(e.document))return n}findNotebookDocumentAndCell(e){let n=e.uri.toString();for(let r of ct.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===n)return[r,i];return[void 0,void 0]}};so.NotebookDocumentSyncFeature=xn;xn.CellScheme="vscode-notebook-cell"});var Dp=w(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.SyncConfigurationFeature=Wn.toJSONObject=Wn.ConfigurationFeature=void 0;var Jr=require("vscode"),zi=V(),kD=Nt(),OD=Te(),_p=re(),ol=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(zi.ConfigurationRequest.type,(n,r)=>{let i=o=>{let a=[];for(let u of o.items){let l=u.scopeUri!==void 0&&u.scopeUri!==null?this._client.protocol2CodeConverter.asUri(u.scopeUri):void 0;a.push(this.getConfiguration(l,u.section!==null?u.section:void 0))}return a},s=e.middleware.workspace;return s&&s.configuration?s.configuration(n,r,i):i(n,r)})}getConfiguration(e,n){let r=null;if(n){let i=n.lastIndexOf(".");if(i===-1)r=fr(Jr.workspace.getConfiguration(void 0,e).get(n));else{let s=Jr.workspace.getConfiguration(n.substr(0,i),e);s&&(r=fr(s.get(n.substr(i+1))))}}else{let i=Jr.workspace.getConfiguration(void 0,e);r={};for(let s of Object.keys(i))i.has(s)&&(r[s]=fr(i.get(s)))}return r===void 0&&(r=null),r}dispose(){}};Wn.ConfigurationFeature=ol;function fr(t){if(t){if(Array.isArray(t))return t.map(fr);if(typeof t=="object"){let e=Object.create(null);for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=fr(t[n]));return e}}return t}Wn.toJSONObject=fr;var al=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return zi.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,_p.ensure)((0,_p.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:OD.generateUuid(),registerOptions:{section:e}})}register(e){let n=Jr.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,n),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let n=this._listeners.get(e);n&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,n){let r;if(kD.string(e)?r=[e]:r=e,r!==void 0&&n!==void 0&&!r.some(a=>n.affectsConfiguration(a)))return;let i=async o=>o===void 0?this._client.sendNotification(zi.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(zi.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(o)}),s=this._client.middleware.workspace?.didChangeConfiguration;(s?s(r,i):i(r)).catch(o=>{this._client.error(`Sending notification ${zi.DidChangeConfigurationNotification.type.method} failed`,o)})}extractSettingsInformation(e){function n(s,o){let a=s;for(let u=0;u<o.length-1;u++){let l=a[o[u]];l||(l=Object.create(null),a[o[u]]=l),a=l}return a}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],a=o.indexOf("."),u=null;if(a>=0?u=Jr.workspace.getConfiguration(o.substr(0,a),r).get(o.substr(a+1)):u=Jr.workspace.getConfiguration(void 0,r).get(o),u){let l=e[s].split(".");n(i,l)[l[l.length-1]]=fr(u)}}return i}};Wn.SyncConfigurationFeature=al});var Rp=w(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.DidSaveTextDocumentFeature=bt.WillSaveWaitUntilFeature=bt.WillSaveFeature=bt.DidChangeTextDocumentFeature=bt.DidCloseTextDocumentFeature=bt.DidOpenTextDocumentFeature=void 0;var $t=require("vscode"),Ue=V(),Pe=re(),ID=$i(),Yr=Te(),cl=class extends Pe.TextDocumentEventFeature{constructor(e,n){super(e,$t.workspace.onDidOpenTextDocument,Ue.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),r=>r,Pe.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,Pe.ensure)((0,Pe.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:Yr.generateUuid(),registerOptions:{documentSelector:n}})}get registrationType(){return Ue.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let n=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);$t.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&$t.languages.match(n,r)>0&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));(s.didOpen?s.didOpen(r,o):o(r)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(i,r)}})}notificationSent(e,n,r){super.notificationSent(e,n,r),this._syncedDocuments.set(e.uri.toString(),e)}};bt.DidOpenTextDocumentFeature=cl;var ul=class extends Pe.TextDocumentEventFeature{constructor(e,n){super(e,$t.workspace.onDidCloseTextDocument,Ue.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,r=>e.code2ProtocolConverter.asCloseTextDocumentParams(r),r=>r,Pe.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n}get registrationType(){return Ue.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,Pe.ensure)((0,Pe.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:Yr.generateUuid(),registerOptions:{documentSelector:n}})}notificationSent(e,n,r){super.notificationSent(e,n,r),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let n=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if($t.languages.match(n,i)>0&&!this._selectorFilter(r,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(i.uri.toString()),(s.didClose?s.didClose(i,o):o(i)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}};bt.DidCloseTextDocumentFeature=ul;var ll=class extends Pe.DynamicDocumentFeature{constructor(e){super(e),this._forcingDelivery=!1,this._changeData=new Map,this._onNotificationSent=new $t.EventEmitter}get registrationType(){return Ue.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,Pe.ensure)((0,Pe.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.change!==void 0&&r.change!==Ue.TextDocumentSyncKind.None&&this.register({id:Yr.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},{syncKind:r.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=$t.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let n=[];for(let r of this._changeData.values())if($t.languages.match(r.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let i=this._client.middleware;if(r.syncKind===Ue.TextDocumentSyncKind.Incremental){let s=async o=>{let a=this._client.code2ProtocolConverter.asChangeTextDocumentParams(o);await this._client.sendNotification(Ue.DidChangeTextDocumentNotification.type,a),this.notificationSent(o,Ue.DidChangeTextDocumentNotification.type,a)};n.push(i.didChange?i.didChange(e,o=>s(o)):s(e))}else if(r.syncKind===Ue.TextDocumentSyncKind.Full){let s=async o=>{let a=async u=>{let l=this._client.code2ProtocolConverter.asChangeTextDocumentParams(u.document);await this._client.sendNotification(Ue.DidChangeTextDocumentNotification.type,l),this.notificationSent(u,Ue.DidChangeTextDocumentNotification.type,l)};return this._changeDelayer?(this._changeDelayer.uri!==o.document.uri.toString()&&(await this.forceDelivery(),this._changeDelayer.uri=o.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>a(o))):(this._changeDelayer={uri:o.document.uri.toString(),delayer:new ID.Delayer(200)},this._changeDelayer.delayer.trigger(()=>a(o),-1))};n.push(i.didChange?i.didChange(e,o=>s(o)):s(e))}}return Promise.all(n).then(void 0,r=>{throw this._client.error(`Sending document notification ${Ue.DidChangeTextDocumentNotification.type.method} failed`,r),r})}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,n,r){this._onNotificationSent.fire({original:e,type:n,params:r})}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer!==void 0&&this._changeDelayer.delayer.cancel(),this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{return this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let n of this._changeData.values())if($t.languages.match(n.documentSelector,e)>0)return{send:r=>this.callback(r)}}};bt.DidChangeTextDocumentFeature=ll;var dl=class extends Pe.TextDocumentEventFeature{constructor(e){super(e,$t.workspace.onWillSaveTextDocument,Ue.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,n=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(n),n=>n.document,(n,r)=>Pe.TextDocumentEventFeature.textDocumentFilter(n,r.document))}get registrationType(){return Ue.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let n=(0,Pe.ensure)((0,Pe.ensure)(e,"textDocument"),"synchronization");n.willSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSave&&this.register({id:Yr.generateUuid(),registerOptions:{documentSelector:n}})}};bt.WillSaveFeature=dl;var fl=class extends Pe.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return Ue.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let n=(0,Pe.ensure)((0,Pe.ensure)(e,"textDocument"),"synchronization");n.willSaveWaitUntil=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSaveWaitUntil&&this.register({id:Yr.generateUuid(),registerOptions:{documentSelector:n}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=$t.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(Pe.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let n=this._client.middleware,r=i=>this._client.sendRequest(Ue.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async s=>{let o=await this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(n.willSaveWaitUntil?n.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};bt.WillSaveWaitUntilFeature=fl;var hl=class extends Pe.TextDocumentEventFeature{constructor(e){super(e,$t.workspace.onDidSaveTextDocument,Ue.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,n=>e.code2ProtocolConverter.asSaveTextDocumentParams(n,this._includeText),n=>n,Pe.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return Ue.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,Pe.ensure)((0,Pe.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;if(n&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:Yr.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}};bt.DidSaveTextDocumentFeature=hl});var bp=w(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.CompletionItemFeature=void 0;var FD=require("vscode"),ne=V(),pl=re(),ND=Te(),LD=[ne.CompletionItemKind.Text,ne.CompletionItemKind.Method,ne.CompletionItemKind.Function,ne.CompletionItemKind.Constructor,ne.CompletionItemKind.Field,ne.CompletionItemKind.Variable,ne.CompletionItemKind.Class,ne.CompletionItemKind.Interface,ne.CompletionItemKind.Module,ne.CompletionItemKind.Property,ne.CompletionItemKind.Unit,ne.CompletionItemKind.Value,ne.CompletionItemKind.Enum,ne.CompletionItemKind.Keyword,ne.CompletionItemKind.Snippet,ne.CompletionItemKind.Color,ne.CompletionItemKind.File,ne.CompletionItemKind.Reference,ne.CompletionItemKind.Folder,ne.CompletionItemKind.EnumMember,ne.CompletionItemKind.Constant,ne.CompletionItemKind.Struct,ne.CompletionItemKind.Event,ne.CompletionItemKind.Operator,ne.CompletionItemKind.TypeParameter],gl=class extends pl.TextDocumentLanguageFeature{constructor(e){super(e,ne.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let n=(0,pl.ensure)((0,pl.ensure)(e,"textDocument"),"completion");n.dynamicRegistration=!0,n.contextSupport=!0,n.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[ne.MarkupKind.Markdown,ne.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[ne.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[ne.InsertTextMode.asIs,ne.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},n.insertTextMode=ne.InsertTextMode.adjustIndentation,n.completionItemKind={valueSet:LD},n.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,n){let r=this.getRegistrationOptions(n,e.completionProvider);!r||this.register({id:ND.generateUuid(),registerOptions:r})}registerLanguageProvider(e,n){this.labelDetailsSupport.set(n,!!e.completionItem?.labelDetailsSupport);let r=e.triggerCharacters??[],i=e.allCommitCharacters,s=e.documentSelector,o={provideCompletionItems:(a,u,l,h)=>{let g=this._client,p=this._client.middleware,y=(m,D,b,T)=>g.sendRequest(ne.CompletionRequest.type,g.code2ProtocolConverter.asCompletionParams(m,D,b),T).then(q=>T.isCancellationRequested?null:g.protocol2CodeConverter.asCompletionResult(q,i,T),q=>g.handleFailedRequest(ne.CompletionRequest.type,T,q,null));return p.provideCompletionItem?p.provideCompletionItem(a,u,h,l,y):y(a,u,h,l)},resolveCompletionItem:e.resolveProvider?(a,u)=>{let l=this._client,h=this._client.middleware,g=(p,y)=>l.sendRequest(ne.CompletionResolveRequest.type,l.code2ProtocolConverter.asCompletionItem(p,!!this.labelDetailsSupport.get(n)),y).then(m=>y.isCancellationRequested?null:l.protocol2CodeConverter.asCompletionItem(m),m=>l.handleFailedRequest(ne.CompletionResolveRequest.type,y,m,p));return h.resolveCompletionItem?h.resolveCompletionItem(a,u,g):g(a,u)}:void 0};return[FD.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(s),o,...r),o]}};oo.CompletionItemFeature=gl});var wp=w(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.HoverFeature=void 0;var MD=require("vscode"),Ki=V(),ml=re(),AD=Te(),vl=class extends ml.TextDocumentLanguageFeature{constructor(e){super(e,Ki.HoverRequest.type)}fillClientCapabilities(e){let n=(0,ml.ensure)((0,ml.ensure)(e,"textDocument"),"hover");n.dynamicRegistration=!0,n.contentFormat=[Ki.MarkupKind.Markdown,Ki.MarkupKind.PlainText]}initialize(e,n){let r=this.getRegistrationOptions(n,e.hoverProvider);!r||this.register({id:AD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideHover:(i,s,o)=>{let a=this._client,u=(h,g,p)=>a.sendRequest(Ki.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(h,g),p).then(y=>p.isCancellationRequested?null:a.protocol2CodeConverter.asHover(y),y=>a.handleFailedRequest(Ki.HoverRequest.type,p,y,null)),l=a.middleware;return l.provideHover?l.provideHover(i,s,o,u):u(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return MD.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};ao.HoverFeature=vl});var Sp=w(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.DefinitionFeature=void 0;var jD=require("vscode"),yl=V(),Cl=re(),$D=Te(),_l=class extends Cl.TextDocumentLanguageFeature{constructor(e){super(e,yl.DefinitionRequest.type)}fillClientCapabilities(e){let n=(0,Cl.ensure)((0,Cl.ensure)(e,"textDocument"),"definition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.definitionProvider);!r||this.register({id:$D.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDefinition:(i,s,o)=>{let a=this._client,u=(h,g,p)=>a.sendRequest(yl.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(h,g),p).then(y=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(y,p),y=>a.handleFailedRequest(yl.DefinitionRequest.type,p,y,null)),l=a.middleware;return l.provideDefinition?l.provideDefinition(i,s,o,u):u(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return jD.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};co.DefinitionFeature=_l});var Pp=w(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.SignatureHelpFeature=void 0;var Tp=require("vscode"),Vi=V(),Dl=re(),HD=Te(),Rl=class extends Dl.TextDocumentLanguageFeature{constructor(e){super(e,Vi.SignatureHelpRequest.type)}fillClientCapabilities(e){let n=(0,Dl.ensure)((0,Dl.ensure)(e,"textDocument"),"signatureHelp");n.dynamicRegistration=!0,n.signatureInformation={documentationFormat:[Vi.MarkupKind.Markdown,Vi.MarkupKind.PlainText]},n.signatureInformation.parameterInformation={labelOffsetSupport:!0},n.signatureInformation.activeParameterSupport=!0,n.contextSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.signatureHelpProvider);!r||this.register({id:HD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideSignatureHelp:(r,i,s,o)=>{let a=this._client,u=(h,g,p,y)=>a.sendRequest(Vi.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(h,g,p),y).then(m=>y.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(m,y),m=>a.handleFailedRequest(Vi.SignatureHelpRequest.type,y,m,null)),l=a.middleware;return l.provideSignatureHelp?l.provideSignatureHelp(r,i,o,s,u):u(r,i,o,s)}};return[this.registerProvider(e,n),n]}registerProvider(e,n){let r=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return Tp.languages.registerSignatureHelpProvider(r,n,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return Tp.languages.registerSignatureHelpProvider(r,n,i)}}};uo.SignatureHelpFeature=Rl});var xp=w(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.DocumentHighlightFeature=void 0;var WD=require("vscode"),bl=V(),wl=re(),UD=Te(),Sl=class extends wl.TextDocumentLanguageFeature{constructor(e){super(e,bl.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,wl.ensure)((0,wl.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentHighlightProvider);!r||this.register({id:UD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentHighlights:(i,s,o)=>{let a=this._client,u=(h,g,p)=>a.sendRequest(bl.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(h,g),p).then(y=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(y,p),y=>a.handleFailedRequest(bl.DocumentHighlightRequest.type,p,y,null)),l=a.middleware;return l.provideDocumentHighlights?l.provideDocumentHighlights(i,s,o,u):u(i,s,o)}};return[WD.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};lo.DocumentHighlightFeature=Sl});var xl=w(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.DocumentSymbolFeature=Cn.SupportedSymbolTags=Cn.SupportedSymbolKinds=void 0;var zD=require("vscode"),ue=V(),Tl=re(),KD=Te();Cn.SupportedSymbolKinds=[ue.SymbolKind.File,ue.SymbolKind.Module,ue.SymbolKind.Namespace,ue.SymbolKind.Package,ue.SymbolKind.Class,ue.SymbolKind.Method,ue.SymbolKind.Property,ue.SymbolKind.Field,ue.SymbolKind.Constructor,ue.SymbolKind.Enum,ue.SymbolKind.Interface,ue.SymbolKind.Function,ue.SymbolKind.Variable,ue.SymbolKind.Constant,ue.SymbolKind.String,ue.SymbolKind.Number,ue.SymbolKind.Boolean,ue.SymbolKind.Array,ue.SymbolKind.Object,ue.SymbolKind.Key,ue.SymbolKind.Null,ue.SymbolKind.EnumMember,ue.SymbolKind.Struct,ue.SymbolKind.Event,ue.SymbolKind.Operator,ue.SymbolKind.TypeParameter];Cn.SupportedSymbolTags=[ue.SymbolTag.Deprecated];var Pl=class extends Tl.TextDocumentLanguageFeature{constructor(e){super(e,ue.DocumentSymbolRequest.type)}fillClientCapabilities(e){let n=(0,Tl.ensure)((0,Tl.ensure)(e,"textDocument"),"documentSymbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:Cn.SupportedSymbolKinds},n.hierarchicalDocumentSymbolSupport=!0,n.tagSupport={valueSet:Cn.SupportedSymbolTags},n.labelSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentSymbolProvider);!r||this.register({id:KD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentSymbols:(s,o)=>{let a=this._client,u=(h,g)=>a.sendRequest(ue.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(h),g).then(async p=>{if(g.isCancellationRequested||p===void 0||p===null)return null;if(p.length===0)return[];{let y=p[0];return ue.DocumentSymbol.is(y)?await a.protocol2CodeConverter.asDocumentSymbols(p,g):await a.protocol2CodeConverter.asSymbolInformations(p,g)}},p=>a.handleFailedRequest(ue.DocumentSymbolRequest.type,g,p,null)),l=a.middleware;return l.provideDocumentSymbols?l.provideDocumentSymbols(s,o,u):u(s,o)}},i=e.label!==void 0?{label:e.label}:void 0;return[zD.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,i),r]}};Cn.DocumentSymbolFeature=Pl});var Ep=w(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.WorkspaceSymbolFeature=void 0;var VD=require("vscode"),Gi=V(),ql=re(),qp=xl(),GD=Te(),El=class extends ql.WorkspaceFeature{constructor(e){super(e,Gi.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let n=(0,ql.ensure)((0,ql.ensure)(e,"workspace"),"symbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:qp.SupportedSymbolKinds},n.tagSupport={valueSet:qp.SupportedSymbolTags},n.resolveSupport={properties:["location.range"]}}initialize(e){!e.workspaceSymbolProvider||this.register({id:GD.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let n={provideWorkspaceSymbols:(r,i)=>{let s=this._client,o=(u,l)=>s.sendRequest(Gi.WorkspaceSymbolRequest.type,{query:u},l).then(h=>l.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformations(h,l),h=>s.handleFailedRequest(Gi.WorkspaceSymbolRequest.type,l,h,null)),a=s.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(r,i,o):o(r,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(r,i)=>{let s=this._client,o=(u,l)=>s.sendRequest(Gi.WorkspaceSymbolResolveRequest.type,s.code2ProtocolConverter.asWorkspaceSymbol(u),l).then(h=>l.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformation(h),h=>s.handleFailedRequest(Gi.WorkspaceSymbolResolveRequest.type,l,h,null)),a=s.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(r,i,o):o(r,i)}:void 0};return[VD.languages.registerWorkspaceSymbolProvider(n),n]}};fo.WorkspaceSymbolFeature=El});var kp=w(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.ReferencesFeature=void 0;var BD=require("vscode"),kl=V(),Ol=re(),XD=Te(),Il=class extends Ol.TextDocumentLanguageFeature{constructor(e){super(e,kl.ReferencesRequest.type)}fillClientCapabilities(e){(0,Ol.ensure)((0,Ol.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.referencesProvider);!r||this.register({id:XD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideReferences:(i,s,o,a)=>{let u=this._client,l=(g,p,y,m)=>u.sendRequest(kl.ReferencesRequest.type,u.code2ProtocolConverter.asReferenceParams(g,p,y),m).then(D=>m.isCancellationRequested?null:u.protocol2CodeConverter.asReferences(D,m),D=>u.handleFailedRequest(kl.ReferencesRequest.type,m,D,null)),h=u.middleware;return h.provideReferences?h.provideReferences(i,s,o,a,l):l(i,s,o,a)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return BD.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};ho.ReferencesFeature=Il});var Op=w(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.CodeActionFeature=void 0;var QD=require("vscode"),qt=V(),JD=Te(),Fl=re(),Nl=class extends Fl.TextDocumentLanguageFeature{constructor(e){super(e,qt.CodeActionRequest.type)}fillClientCapabilities(e){let n=(0,Fl.ensure)((0,Fl.ensure)(e,"textDocument"),"codeAction");n.dynamicRegistration=!0,n.isPreferredSupport=!0,n.disabledSupport=!0,n.dataSupport=!0,n.resolveSupport={properties:["edit"]},n.codeActionLiteralSupport={codeActionKind:{valueSet:[qt.CodeActionKind.Empty,qt.CodeActionKind.QuickFix,qt.CodeActionKind.Refactor,qt.CodeActionKind.RefactorExtract,qt.CodeActionKind.RefactorInline,qt.CodeActionKind.RefactorRewrite,qt.CodeActionKind.Source,qt.CodeActionKind.SourceOrganizeImports]}},n.honorsChangeAnnotations=!1}initialize(e,n){let r=this.getRegistrationOptions(n,e.codeActionProvider);!r||this.register({id:JD.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideCodeActions:(i,s,o,a)=>{let u=this._client,l=async(g,p,y,m)=>{let D={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),range:u.code2ProtocolConverter.asRange(p),context:await u.code2ProtocolConverter.asCodeActionContext(y,m)};return u.sendRequest(qt.CodeActionRequest.type,D,m).then(b=>m.isCancellationRequested||b===null||b===void 0?null:u.protocol2CodeConverter.asCodeActionResult(b,m),b=>u.handleFailedRequest(qt.CodeActionRequest.type,m,b,null))},h=u.middleware;return h.provideCodeActions?h.provideCodeActions(i,s,o,a,l):l(i,s,o,a)},resolveCodeAction:e.resolveProvider?(i,s)=>{let o=this._client,a=this._client.middleware,u=async(l,h)=>o.sendRequest(qt.CodeActionResolveRequest.type,await o.code2ProtocolConverter.asCodeAction(l,h),h).then(g=>h.isCancellationRequested?l:o.protocol2CodeConverter.asCodeAction(g,h),g=>o.handleFailedRequest(qt.CodeActionResolveRequest.type,h,g,l));return a.resolveCodeAction?a.resolveCodeAction(i,s,u):u(i,s)}:void 0};return[QD.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}};po.CodeActionFeature=Nl});var Fp=w(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.CodeLensFeature=void 0;var Ip=require("vscode"),Zr=V(),YD=Te(),Bi=re(),Ll=class extends Bi.TextDocumentLanguageFeature{constructor(e){super(e,Zr.CodeLensRequest.type)}fillClientCapabilities(e){(0,Bi.ensure)((0,Bi.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,Bi.ensure)((0,Bi.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,n){this._client.onRequest(Zr.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(n,e.codeLensProvider);!i||this.register({id:YD.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new Ip.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(s,o)=>{let a=this._client,u=(h,g)=>a.sendRequest(Zr.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(h),g).then(p=>g.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(p,g),p=>a.handleFailedRequest(Zr.CodeLensRequest.type,g,p,null)),l=a.middleware;return l.provideCodeLenses?l.provideCodeLenses(s,o,u):u(s,o)},resolveCodeLens:e.resolveProvider?(s,o)=>{let a=this._client,u=(h,g)=>a.sendRequest(Zr.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(h),g).then(p=>g.isCancellationRequested?h:a.protocol2CodeConverter.asCodeLens(p),p=>a.handleFailedRequest(Zr.CodeLensResolveRequest.type,g,p,h)),l=a.middleware;return l.resolveCodeLens?l.resolveCodeLens(s,o,u):u(s,o)}:void 0};return[Ip.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),{provider:i,onDidChangeCodeLensEmitter:r}]}};go.CodeLensFeature=Ll});var Np=w(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.DocumentOnTypeFormattingFeature=Un.DocumentRangeFormattingFeature=Un.DocumentFormattingFeature=void 0;var mo=require("vscode"),qn=V(),$l=Te(),En=re(),Xi;(function(t){function e(n){let r=mo.workspace.getConfiguration("files",n);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}t.fromConfiguration=e})(Xi||(Xi={}));var Ml=class extends En.TextDocumentLanguageFeature{constructor(e){super(e,qn.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,En.ensure)((0,En.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentFormattingProvider);!r||this.register({id:$l.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentFormattingEdits:(i,s,o)=>{let a=this._client,u=(h,g,p)=>{let y={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(h),options:a.code2ProtocolConverter.asFormattingOptions(g,Xi.fromConfiguration(h))};return a.sendRequest(qn.DocumentFormattingRequest.type,y,p).then(m=>p.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(m,p),m=>a.handleFailedRequest(qn.DocumentFormattingRequest.type,p,m,null))},l=a.middleware;return l.provideDocumentFormattingEdits?l.provideDocumentFormattingEdits(i,s,o,u):u(i,s,o)}};return[mo.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Un.DocumentFormattingFeature=Ml;var Al=class extends En.TextDocumentLanguageFeature{constructor(e){super(e,qn.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,En.ensure)((0,En.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentRangeFormattingProvider);!r||this.register({id:$l.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentRangeFormattingEdits:(i,s,o,a)=>{let u=this._client,l=(g,p,y,m)=>{let D={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),range:u.code2ProtocolConverter.asRange(p),options:u.code2ProtocolConverter.asFormattingOptions(y,Xi.fromConfiguration(g))};return u.sendRequest(qn.DocumentRangeFormattingRequest.type,D,m).then(b=>m.isCancellationRequested?null:u.protocol2CodeConverter.asTextEdits(b,m),b=>u.handleFailedRequest(qn.DocumentRangeFormattingRequest.type,m,b,null))},h=u.middleware;return h.provideDocumentRangeFormattingEdits?h.provideDocumentRangeFormattingEdits(i,s,o,a,l):l(i,s,o,a)}};return[mo.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Un.DocumentRangeFormattingFeature=Al;var jl=class extends En.TextDocumentLanguageFeature{constructor(e){super(e,qn.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,En.ensure)((0,En.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentOnTypeFormattingProvider);!r||this.register({id:$l.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideOnTypeFormattingEdits:(s,o,a,u,l)=>{let h=this._client,g=(y,m,D,b,T)=>{let q={textDocument:h.code2ProtocolConverter.asTextDocumentIdentifier(y),position:h.code2ProtocolConverter.asPosition(m),ch:D,options:h.code2ProtocolConverter.asFormattingOptions(b,Xi.fromConfiguration(y))};return h.sendRequest(qn.DocumentOnTypeFormattingRequest.type,q,T).then(E=>T.isCancellationRequested?null:h.protocol2CodeConverter.asTextEdits(E,T),E=>h.handleFailedRequest(qn.DocumentOnTypeFormattingRequest.type,T,E,null))},p=h.middleware;return p.provideOnTypeFormattingEdits?p.provideOnTypeFormattingEdits(s,o,a,u,l,g):g(s,o,a,u,l)}},i=e.moreTriggerCharacter||[];return[mo.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,e.firstTriggerCharacter,...i),r]}};Un.DocumentOnTypeFormattingFeature=jl});var Mp=w(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.RenameFeature=void 0;var ZD=require("vscode"),hr=V(),eR=Te(),Lp=Nt(),Hl=re(),Wl=class extends Hl.TextDocumentLanguageFeature{constructor(e){super(e,hr.RenameRequest.type)}fillClientCapabilities(e){let n=(0,Hl.ensure)((0,Hl.ensure)(e,"textDocument"),"rename");n.dynamicRegistration=!0,n.prepareSupport=!0,n.prepareSupportDefaultBehavior=hr.PrepareSupportDefaultBehavior.Identifier,n.honorsChangeAnnotations=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.renameProvider);!r||(Lp.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:eR.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let n=e.documentSelector,r={provideRenameEdits:(i,s,o,a)=>{let u=this._client,l=(g,p,y,m)=>{let D={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),position:u.code2ProtocolConverter.asPosition(p),newName:y};return u.sendRequest(hr.RenameRequest.type,D,m).then(b=>m.isCancellationRequested?null:u.protocol2CodeConverter.asWorkspaceEdit(b,m),b=>u.handleFailedRequest(hr.RenameRequest.type,m,b,null,!1))},h=u.middleware;return h.provideRenameEdits?h.provideRenameEdits(i,s,o,a,l):l(i,s,o,a)},prepareRename:e.prepareProvider?(i,s,o)=>{let a=this._client,u=(h,g,p)=>{let y={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(h),position:a.code2ProtocolConverter.asPosition(g)};return a.sendRequest(hr.PrepareRenameRequest.type,y,p).then(m=>p.isCancellationRequested?null:hr.Range.is(m)?a.protocol2CodeConverter.asRange(m):this.isDefaultBehavior(m)?m.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):m&&hr.Range.is(m.range)?{range:a.protocol2CodeConverter.asRange(m.range),placeholder:m.placeholder}:Promise.reject(new Error("The element can't be renamed.")),m=>{throw typeof m.message=="string"?new Error(m.message):new Error("The element can't be renamed.")})},l=a.middleware;return l.prepareRename?l.prepareRename(i,s,o,u):u(i,s,o)}:void 0};return[this.registerProvider(n,r),r]}registerProvider(e,n){return ZD.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}isDefaultBehavior(e){let n=e;return n&&Lp.boolean(n.defaultBehavior)}};vo.RenameFeature=Wl});var Ap=w(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.DocumentLinkFeature=void 0;var tR=require("vscode"),Qi=V(),Ul=re(),nR=Te(),zl=class extends Ul.TextDocumentLanguageFeature{constructor(e){super(e,Qi.DocumentLinkRequest.type)}fillClientCapabilities(e){let n=(0,Ul.ensure)((0,Ul.ensure)(e,"textDocument"),"documentLink");n.dynamicRegistration=!0,n.tooltipSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentLinkProvider);!r||this.register({id:nR.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentLinks:(i,s)=>{let o=this._client,a=(l,h)=>o.sendRequest(Qi.DocumentLinkRequest.type,o.code2ProtocolConverter.asDocumentLinkParams(l),h).then(g=>h.isCancellationRequested?null:o.protocol2CodeConverter.asDocumentLinks(g,h),g=>o.handleFailedRequest(Qi.DocumentLinkRequest.type,h,g,null)),u=o.middleware;return u.provideDocumentLinks?u.provideDocumentLinks(i,s,a):a(i,s)},resolveDocumentLink:e.resolveProvider?(i,s)=>{let o=this._client,a=(l,h)=>o.sendRequest(Qi.DocumentLinkResolveRequest.type,o.code2ProtocolConverter.asDocumentLink(l),h).then(g=>h.isCancellationRequested?l:o.protocol2CodeConverter.asDocumentLink(g),g=>o.handleFailedRequest(Qi.DocumentLinkResolveRequest.type,h,g,l)),u=o.middleware;return u.resolveDocumentLink?u.resolveDocumentLink(i,s,a):a(i,s)}:void 0};return[tR.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};yo.DocumentLinkFeature=zl});var $p=w(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.ExecuteCommandFeature=void 0;var rR=require("vscode"),Kl=V(),iR=Te(),jp=re(),Vl=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return Kl.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,jp.ensure)((0,jp.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:iR.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let n=this._client,r=n.middleware,i=(s,o)=>{let a={command:s,arguments:o};return n.sendRequest(Kl.ExecuteCommandRequest.type,a).then(void 0,u=>n.handleFailedRequest(Kl.ExecuteCommandRequest.type,void 0,u,void 0))};if(e.registerOptions.commands){let s=[];for(let o of e.registerOptions.commands)s.push(rR.commands.registerCommand(o,(...a)=>r.executeCommand?r.executeCommand(o,a,i):i(o,a)));this._commands.set(e.id,s)}}unregister(e){let n=this._commands.get(e);n&&n.forEach(r=>r.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(n=>n.dispose())}),this._commands.clear()}};Co.ExecuteCommandFeature=Vl});var Hp=w(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.FileSystemWatcherFeature=void 0;var sR=require("vscode"),pr=V(),_o=re(),Gl=class{constructor(e,n){this._client=e,this._notifyFileEvent=n,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return pr.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,_o.ensure)((0,_o.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,_o.ensure)((0,_o.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,n){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let n=[];for(let r of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(r.globPattern);if(i===void 0)continue;let s=!0,o=!0,a=!0;r.kind!==void 0&&r.kind!==null&&(s=(r.kind&pr.WatchKind.Create)!==0,o=(r.kind&pr.WatchKind.Change)!==0,a=(r.kind&pr.WatchKind.Delete)!==0);let u=sR.workspace.createFileSystemWatcher(i,!s,!o,!a);this.hookListeners(u,s,o,a,n),n.push(u)}this._watchers.set(e.id,n)}registerRaw(e,n){let r=[];for(let i of n)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,n,r,i,s){n&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:pr.FileChangeType.Created}),null,s),r&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:pr.FileChangeType.Changed}),null,s),i&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:pr.FileChangeType.Deleted}),null,s)}unregister(e){let n=this._watchers.get(e);if(n)for(let r of n)r.dispose()}dispose(){this._watchers.forEach(e=>{for(let n of e)n.dispose()}),this._watchers.clear()}};Do.FileSystemWatcherFeature=Gl});var Wp=w(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.ColorProviderFeature=void 0;var oR=require("vscode"),Ji=V(),Bl=re(),Xl=class extends Bl.TextDocumentLanguageFeature{constructor(e){super(e,Ji.DocumentColorRequest.type)}fillClientCapabilities(e){(0,Bl.ensure)((0,Bl.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideColorPresentations:(i,s,o)=>{let a=this._client,u=(h,g,p)=>{let y={color:h,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g.document),range:a.code2ProtocolConverter.asRange(g.range)};return a.sendRequest(Ji.ColorPresentationRequest.type,y,p).then(m=>p.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(m,p),m=>a.handleFailedRequest(Ji.ColorPresentationRequest.type,p,m,null))},l=a.middleware;return l.provideColorPresentations?l.provideColorPresentations(i,s,o,u):u(i,s,o)},provideDocumentColors:(i,s)=>{let o=this._client,a=(l,h)=>{let g={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(l)};return o.sendRequest(Ji.DocumentColorRequest.type,g,h).then(p=>h.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(p,h),p=>o.handleFailedRequest(Ji.DocumentColorRequest.type,h,p,null))},u=o.middleware;return u.provideDocumentColors?u.provideDocumentColors(i,s,a):a(i,s)}};return[oR.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Ro.ColorProviderFeature=Xl});var Up=w(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.ImplementationFeature=void 0;var aR=require("vscode"),Ql=V(),Jl=re(),Yl=class extends Jl.TextDocumentLanguageFeature{constructor(e){super(e,Ql.ImplementationRequest.type)}fillClientCapabilities(e){let n=(0,Jl.ensure)((0,Jl.ensure)(e,"textDocument"),"implementation");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideImplementation:(i,s,o)=>{let a=this._client,u=(h,g,p)=>a.sendRequest(Ql.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(h,g),p).then(y=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(y,p),y=>a.handleFailedRequest(Ql.ImplementationRequest.type,p,y,null)),l=a.middleware;return l.provideImplementation?l.provideImplementation(i,s,o,u):u(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return aR.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};bo.ImplementationFeature=Yl});var zp=w(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.TypeDefinitionFeature=void 0;var cR=require("vscode"),Zl=V(),Yi=re(),ed=class extends Yi.TextDocumentLanguageFeature{constructor(e){super(e,Zl.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,Yi.ensure)((0,Yi.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let n=(0,Yi.ensure)((0,Yi.ensure)(e,"textDocument"),"typeDefinition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideTypeDefinition:(i,s,o)=>{let a=this._client,u=(h,g,p)=>a.sendRequest(Zl.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(h,g),p).then(y=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(y,p),y=>a.handleFailedRequest(Zl.TypeDefinitionRequest.type,p,y,null)),l=a.middleware;return l.provideTypeDefinition?l.provideTypeDefinition(i,s,o,u):u(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return cR.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};wo.TypeDefinitionFeature=ed});var Kp=w(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.WorkspaceFoldersFeature=ei.arrayDiff=void 0;var uR=Te(),So=require("vscode"),Zi=V();function td(t,e){if(t!==void 0)return t[e]}function nd(t,e){return t.filter(n=>e.indexOf(n)<0)}ei.arrayDiff=nd;var rd=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Zi.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let n=So.workspace.workspaceFolders;this.initializeWithFolders(n),n===void 0?e.workspaceFolders=null:e.workspaceFolders=n.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let n=this._client;n.onRequest(Zi.WorkspaceFoldersRequest.type,s=>{let o=()=>{let u=So.workspace.workspaceFolders;return u===void 0?null:u.map(h=>this.asProtocol(h))},a=n.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(s,o):o(s)});let r=td(td(td(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=uR.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let n;if(this._initialFolders&&e){let r=nd(this._initialFolders,e),i=nd(e,this._initialFolders);(i.length>0||r.length>0)&&(n=this.doSendEvent(i,r))}else this._initialFolders?n=this.doSendEvent([],this._initialFolders):e&&(n=this.doSendEvent(e,[]));n!==void 0&&n.catch(r=>{this._client.error(`Sending notification ${Zi.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,n){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:n.map(i=>this.asProtocol(i))}};return this._client.sendNotification(Zi.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let n=e.id,r=this._client,i=So.workspace.onDidChangeWorkspaceFolders(s=>{let o=l=>this.doSendEvent(l.added,l.removed),a=r.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(s,o):o(s)).catch(l=>{this._client.error(`Sending notification ${Zi.DidChangeWorkspaceFoldersNotification.type.method} failed`,l)})});this._listeners.set(n,i),this.sendInitialEvent(So.workspace.workspaceFolders)}unregister(e){let n=this._listeners.get(e);n!==void 0&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};ei.WorkspaceFoldersFeature=rd});var Vp=w(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.FoldingRangeFeature=void 0;var lR=require("vscode"),ti=V(),id=re(),sd=class extends id.TextDocumentLanguageFeature{constructor(e){super(e,ti.FoldingRangeRequest.type)}fillClientCapabilities(e){let n=(0,id.ensure)((0,id.ensure)(e,"textDocument"),"foldingRange");n.dynamicRegistration=!0,n.rangeLimit=5e3,n.lineFoldingOnly=!0,n.foldingRangeKind={valueSet:[ti.FoldingRangeKind.Comment,ti.FoldingRangeKind.Imports,ti.FoldingRangeKind.Region]},n.foldingRange={collapsedText:!1}}initialize(e,n){let[r,i]=this.getRegistration(n,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideFoldingRanges:(i,s,o)=>{let a=this._client,u=(h,g,p)=>{let y={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(h)};return a.sendRequest(ti.FoldingRangeRequest.type,y,p).then(m=>p.isCancellationRequested?null:a.protocol2CodeConverter.asFoldingRanges(m,p),m=>a.handleFailedRequest(ti.FoldingRangeRequest.type,p,m,null))},l=a.middleware;return l.provideFoldingRanges?l.provideFoldingRanges(i,s,o,u):u(i,s,o)}};return[lR.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};To.FoldingRangeFeature=sd});var Gp=w(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.DeclarationFeature=void 0;var dR=require("vscode"),od=V(),ad=re(),cd=class extends ad.TextDocumentLanguageFeature{constructor(e){super(e,od.DeclarationRequest.type)}fillClientCapabilities(e){let n=(0,ad.ensure)((0,ad.ensure)(e,"textDocument"),"declaration");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDeclaration:(i,s,o)=>{let a=this._client,u=(h,g,p)=>a.sendRequest(od.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(h,g),p).then(y=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(y,p),y=>a.handleFailedRequest(od.DeclarationRequest.type,p,y,null)),l=a.middleware;return l.provideDeclaration?l.provideDeclaration(i,s,o,u):u(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return dR.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Po.DeclarationFeature=cd});var Bp=w(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.SelectionRangeFeature=void 0;var fR=require("vscode"),ud=V(),ld=re(),dd=class extends ld.TextDocumentLanguageFeature{constructor(e){super(e,ud.SelectionRangeRequest.type)}fillClientCapabilities(e){let n=(0,ld.ensure)((0,ld.ensure)(e,"textDocument"),"selectionRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideSelectionRanges:(i,s,o)=>{let a=this._client,u=async(h,g,p)=>{let y={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(h),positions:await a.code2ProtocolConverter.asPositions(g,p)};return a.sendRequest(ud.SelectionRangeRequest.type,y,p).then(m=>p.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(m,p),m=>a.handleFailedRequest(ud.SelectionRangeRequest.type,p,m,null))},l=a.middleware;return l.provideSelectionRanges?l.provideSelectionRanges(i,s,o,u):u(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return fR.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};xo.SelectionRangeFeature=dd});var Qp=w(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.ProgressFeature=void 0;var Xp=V(),hR=ju();function pR(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var fd=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:Xp.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){pR(e,"window").workDoneProgress=!0}initialize(){let e=this._client,n=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new hR.ProgressPart(this._client,i.token,n))};e.onRequest(Xp.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};qo.ProgressFeature=fd});var Jp=w(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.CallHierarchyFeature=void 0;var gR=require("vscode"),gr=V(),hd=re(),pd=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,n,r){let i=this.client,s=this.middleware,o=(a,u,l)=>{let h=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(gr.CallHierarchyPrepareRequest.type,h,l).then(g=>l.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(g,l),g=>i.handleFailedRequest(gr.CallHierarchyPrepareRequest.type,l,g,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,n,r,o):o(e,n,r)}provideCallHierarchyIncomingCalls(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(gr.CallHierarchyIncomingCallsRequest.type,u,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyIncomingCalls(l,a),l=>r.handleFailedRequest(gr.CallHierarchyIncomingCallsRequest.type,a,l,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,n,s):s(e,n)}provideCallHierarchyOutgoingCalls(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(gr.CallHierarchyOutgoingCallsRequest.type,u,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(l,a),l=>r.handleFailedRequest(gr.CallHierarchyOutgoingCallsRequest.type,a,l,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,n,s):s(e,n)}},gd=class extends hd.TextDocumentLanguageFeature{constructor(e){super(e,gr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=e,r=(0,hd.ensure)((0,hd.ensure)(n,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=this._client,r=new pd(n);return[gR.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};Eo.CallHierarchyFeature=gd});var Yp=w(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.SemanticTokensFeature=void 0;var ko=require("vscode"),G=V(),es=re(),mR=Nt(),md=class extends es.TextDocumentLanguageFeature{constructor(e){super(e,G.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let n=(0,es.ensure)((0,es.ensure)(e,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[G.SemanticTokenTypes.namespace,G.SemanticTokenTypes.type,G.SemanticTokenTypes.class,G.SemanticTokenTypes.enum,G.SemanticTokenTypes.interface,G.SemanticTokenTypes.struct,G.SemanticTokenTypes.typeParameter,G.SemanticTokenTypes.parameter,G.SemanticTokenTypes.variable,G.SemanticTokenTypes.property,G.SemanticTokenTypes.enumMember,G.SemanticTokenTypes.event,G.SemanticTokenTypes.function,G.SemanticTokenTypes.method,G.SemanticTokenTypes.macro,G.SemanticTokenTypes.keyword,G.SemanticTokenTypes.modifier,G.SemanticTokenTypes.comment,G.SemanticTokenTypes.string,G.SemanticTokenTypes.number,G.SemanticTokenTypes.regexp,G.SemanticTokenTypes.operator,G.SemanticTokenTypes.decorator],n.tokenModifiers=[G.SemanticTokenModifiers.declaration,G.SemanticTokenModifiers.definition,G.SemanticTokenModifiers.readonly,G.SemanticTokenModifiers.static,G.SemanticTokenModifiers.deprecated,G.SemanticTokenModifiers.abstract,G.SemanticTokenModifiers.async,G.SemanticTokenModifiers.modification,G.SemanticTokenModifiers.documentation,G.SemanticTokenModifiers.defaultLibrary],n.formats=[G.TokenFormat.Relative],n.requests={range:!0,full:{delta:!0}},n.multilineTokenSupport=!1,n.overlappingTokenSupport=!1,n.serverCancelSupport=!0,n.augmentsSyntaxTokens=!0,(0,es.ensure)((0,es.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,n){this._client.onRequest(G.SemanticTokensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(n,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=e.documentSelector,r=mR.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,s=new ko.EventEmitter,o=r?{onDidChangeSemanticTokens:s.event,provideDocumentSemanticTokens:(y,m)=>{let D=this._client,b=D.middleware,T=(q,E)=>{let I={textDocument:D.code2ProtocolConverter.asTextDocumentIdentifier(q)};return D.sendRequest(G.SemanticTokensRequest.type,I,E).then(K=>E.isCancellationRequested?null:D.protocol2CodeConverter.asSemanticTokens(K,E),K=>D.handleFailedRequest(G.SemanticTokensRequest.type,E,K,null))};return b.provideDocumentSemanticTokens?b.provideDocumentSemanticTokens(y,m,T):T(y,m)},provideDocumentSemanticTokensEdits:i?(y,m,D)=>{let b=this._client,T=b.middleware,q=(E,I,K)=>{let Ne={textDocument:b.code2ProtocolConverter.asTextDocumentIdentifier(E),previousResultId:I};return b.sendRequest(G.SemanticTokensDeltaRequest.type,Ne,K).then(async De=>K.isCancellationRequested?null:G.SemanticTokens.is(De)?await b.protocol2CodeConverter.asSemanticTokens(De,K):await b.protocol2CodeConverter.asSemanticTokensEdits(De,K),De=>b.handleFailedRequest(G.SemanticTokensDeltaRequest.type,K,De,null))};return T.provideDocumentSemanticTokensEdits?T.provideDocumentSemanticTokensEdits(y,m,D,q):q(y,m,D)}:void 0}:void 0,u=e.range===!0?{provideDocumentRangeSemanticTokens:(y,m,D)=>{let b=this._client,T=b.middleware,q=(E,I,K)=>{let Ne={textDocument:b.code2ProtocolConverter.asTextDocumentIdentifier(E),range:b.code2ProtocolConverter.asRange(I)};return b.sendRequest(G.SemanticTokensRangeRequest.type,Ne,K).then(De=>K.isCancellationRequested?null:b.protocol2CodeConverter.asSemanticTokens(De,K),De=>b.handleFailedRequest(G.SemanticTokensRangeRequest.type,K,De,null))};return T.provideDocumentRangeSemanticTokens?T.provideDocumentRangeSemanticTokens(y,m,D,q):q(y,m,D)}}:void 0,l=[],h=this._client,g=h.protocol2CodeConverter.asSemanticTokensLegend(e.legend),p=h.protocol2CodeConverter.asDocumentSelector(n);return o!==void 0&&l.push(ko.languages.registerDocumentSemanticTokensProvider(p,o,g)),u!==void 0&&l.push(ko.languages.registerDocumentRangeSemanticTokensProvider(p,u,g)),[new ko.Disposable(()=>l.forEach(y=>y.dispose())),{range:u,full:o,onDidChangeSemanticTokensEmitter:s}]}};Oo.SemanticTokensFeature=md});var tg=w(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.WillDeleteFilesFeature=wt.WillRenameFilesFeature=wt.WillCreateFilesFeature=wt.DidDeleteFilesFeature=wt.DidRenameFilesFeature=wt.DidCreateFilesFeature=void 0;var Ht=require("vscode"),vR=to(),kn=V(),yR=Te();function Zp(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function CR(t,e){return t[e]}function eg(t,e,n){t[e]=n}var On=class{constructor(e,n,r,i,s){this._client=e,this._event=n,this._registrationType=r,this._clientCapability=i,this._serverCapability=s,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let n=Zp(Zp(e,"workspace"),"fileOperations");eg(n,"dynamicRegistration",!0),eg(n,this._clientCapability,!0)}initialize(e){let n=e.workspace?.fileOperations,r=n!==void 0?CR(n,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:yR.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let n=e.registerOptions.filters.map(r=>{let i=new vR.Minimatch(r.pattern.glob,On.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,n)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return On.getFileType(e)}async filter(e,n){let r=await Promise.all(e.files.map(async s=>{let o=n(s),a=o.fsPath.replace(/\\/g,"/");for(let u of this._filters.values())for(let l of u)if(!(l.scheme!==void 0&&l.scheme!==o.scheme)){if(l.matcher.match(a)){if(l.kind===void 0)return!0;let h=await this.getFileType(o);if(h===void 0)return this._client.error(`Failed to determine file type for ${o.toString()}.`),!0;if(h===Ht.FileType.File&&l.kind===kn.FileOperationPatternKind.file||h===Ht.FileType.Directory&&l.kind===kn.FileOperationPatternKind.folder)return!0}else if(l.kind===kn.FileOperationPatternKind.folder&&await On.getFileType(o)===Ht.FileType.Directory&&l.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((s,o)=>r[o]);return{...e,files:i}}static async getFileType(e){try{return(await Ht.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},Io=class extends On{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s),this._notificationType=r,this._accessUri=o,this._createParams=a}async send(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(n,r)}}},Fo=class extends Io{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let n=e.fsPath;if(this._fsPathFileTypes.has(n))return this._fsPathFileTypes.get(n);let r=await On.getFileType(e);return r&&this._fsPathFileTypes.set(n,r),r}async cacheFileTypes(e,n){await this.filter(e,n)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},vd=class extends Io{constructor(e){super(e,Ht.workspace.onDidCreateFiles,kn.DidCreateFilesNotification.type,"didCreate","didCreate",n=>n,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.didCreateFiles?r.didCreateFiles(e,n):n(e)}};wt.DidCreateFilesFeature=vd;var yd=class extends Fo{constructor(e){super(e,Ht.workspace.onDidRenameFiles,kn.DidRenameFilesNotification.type,"didRename","didRename",n=>n.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=Ht.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,n=>n.oldUri))}doSend(e,n){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didRenameFiles?r.didRenameFiles(e,n):n(e)}};wt.DidRenameFilesFeature=yd;var Cd=class extends Fo{constructor(e){super(e,Ht.workspace.onDidDeleteFiles,kn.DidDeleteFilesNotification.type,"didDelete","didDelete",n=>n,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=Ht.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,n=>n))}doSend(e,n){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,n):n(e)}};wt.DidDeleteFilesFeature=Cd;var ts=class extends On{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s),this._requestType=r,this._accessUri=o,this._createParams=a}async send(e){let n=this.waitUntil(e);e.waitUntil(n)}async waitUntil(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(n,r)}else return}},_d=class extends ts{constructor(e){super(e,Ht.workspace.onWillCreateFiles,kn.WillCreateFilesRequest.type,"willCreate","willCreate",n=>n,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.willCreateFiles?r.willCreateFiles(e,n):n(e)}};wt.WillCreateFilesFeature=_d;var Dd=class extends ts{constructor(e){super(e,Ht.workspace.onWillRenameFiles,kn.WillRenameFilesRequest.type,"willRename","willRename",n=>n.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.willRenameFiles?r.willRenameFiles(e,n):n(e)}};wt.WillRenameFilesFeature=Dd;var Rd=class extends ts{constructor(e){super(e,Ht.workspace.onWillDeleteFiles,kn.WillDeleteFilesRequest.type,"willDelete","willDelete",n=>n,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,n):n(e)}};wt.WillDeleteFilesFeature=Rd});var ng=w(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.LinkedEditingFeature=void 0;var _R=require("vscode"),bd=V(),wd=re(),Sd=class extends wd.TextDocumentLanguageFeature{constructor(e){super(e,bd.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let n=(0,wd.ensure)((0,wd.ensure)(e,"textDocument"),"linkedEditingRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideLinkedEditingRanges:(i,s,o)=>{let a=this._client,u=(h,g,p)=>a.sendRequest(bd.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(h,g),p).then(y=>p.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(y,p),y=>a.handleFailedRequest(bd.LinkedEditingRangeRequest.type,p,y,null)),l=a.middleware;return l.provideLinkedEditingRange?l.provideLinkedEditingRange(i,s,o,u):u(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return _R.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};No.LinkedEditingFeature=Sd});var rg=w(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.TypeHierarchyFeature=void 0;var DR=require("vscode"),mr=V(),Td=re(),Pd=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,n,r){let i=this.client,s=this.middleware,o=(a,u,l)=>{let h=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(mr.TypeHierarchyPrepareRequest.type,h,l).then(g=>l.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(g,l),g=>i.handleFailedRequest(mr.TypeHierarchyPrepareRequest.type,l,g,null))};return s.prepareTypeHierarchy?s.prepareTypeHierarchy(e,n,r,o):o(e,n,r)}provideTypeHierarchySupertypes(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(o)};return r.sendRequest(mr.TypeHierarchySupertypesRequest.type,u,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(l,a),l=>r.handleFailedRequest(mr.TypeHierarchySupertypesRequest.type,a,l,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,n,s):s(e,n)}provideTypeHierarchySubtypes(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(o)};return r.sendRequest(mr.TypeHierarchySubtypesRequest.type,u,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(l,a),l=>r.handleFailedRequest(mr.TypeHierarchySubtypesRequest.type,a,l,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,n,s):s(e,n)}},xd=class extends Td.TextDocumentLanguageFeature{constructor(e){super(e,mr.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=(0,Td.ensure)((0,Td.ensure)(e,"textDocument"),"typeHierarchy");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=this._client,r=new Pd(n);return[DR.languages.registerTypeHierarchyProvider(n.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};Lo.TypeHierarchyFeature=xd});var sg=w(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.InlineValueFeature=void 0;var ig=require("vscode"),Mo=V(),ns=re(),qd=class extends ns.TextDocumentLanguageFeature{constructor(e){super(e,Mo.InlineValueRequest.type)}fillClientCapabilities(e){(0,ns.ensure)((0,ns.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,ns.ensure)((0,ns.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,n){this._client.onRequest(Mo.InlineValueRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(n,e.inlineValueProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new ig.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(s,o,a,u)=>{let l=this._client,h=(p,y,m,D)=>{let b={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(p),range:l.code2ProtocolConverter.asRange(y),context:l.code2ProtocolConverter.asInlineValueContext(m)};return l.sendRequest(Mo.InlineValueRequest.type,b,D).then(T=>D.isCancellationRequested?null:l.protocol2CodeConverter.asInlineValues(T,D),T=>l.handleFailedRequest(Mo.InlineValueRequest.type,D,T,null))},g=l.middleware;return g.provideInlineValues?g.provideInlineValues(s,o,a,u,h):h(s,o,a,u)}};return[this.registerProvider(n,i),{provider:i,onDidChangeInlineValues:r}]}registerProvider(e,n){return ig.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Ao.InlineValueFeature=qd});var ag=w(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.InlayHintsFeature=void 0;var og=require("vscode"),ni=V(),rs=re(),Ed=class extends rs.TextDocumentLanguageFeature{constructor(e){super(e,ni.InlayHintRequest.type)}fillClientCapabilities(e){let n=(0,rs.ensure)((0,rs.ensure)(e,"textDocument"),"inlayHint");n.dynamicRegistration=!0,n.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,rs.ensure)((0,rs.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,n){this._client.onRequest(ni.InlayHintRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlayHints.fire()});let[r,i]=this.getRegistration(n,e.inlayHintProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new og.EventEmitter,i={onDidChangeInlayHints:r.event,provideInlayHints:(s,o,a)=>{let u=this._client,l=async(g,p,y)=>{let m={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),range:u.code2ProtocolConverter.asRange(p)};try{let D=await u.sendRequest(ni.InlayHintRequest.type,m,y);return y.isCancellationRequested?null:u.protocol2CodeConverter.asInlayHints(D,y)}catch(D){return u.handleFailedRequest(ni.InlayHintRequest.type,y,D,null)}},h=u.middleware;return h.provideInlayHints?h.provideInlayHints(s,o,a,l):l(s,o,a)}};return i.resolveInlayHint=e.resolveProvider===!0?(s,o)=>{let a=this._client,u=async(h,g)=>{try{let p=await a.sendRequest(ni.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(h),g);if(g.isCancellationRequested)return null;let y=a.protocol2CodeConverter.asInlayHint(p,g);return g.isCancellationRequested?null:y}catch(p){return a.handleFailedRequest(ni.InlayHintResolveRequest.type,g,p,null)}},l=a.middleware;return l.resolveInlayHint?l.resolveInlayHint(s,o,u):u(s,o)}:void 0,[this.registerProvider(n,i),{provider:i,onDidChangeInlayHints:r}]}registerProvider(e,n){return og.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};jo.InlayHintsFeature=Ed});var Fd=w(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.ProposedFeatures=_e.BaseLanguageClient=_e.MessageTransports=_e.SuspendMode=_e.State=_e.CloseAction=_e.ErrorAction=_e.RevealOutputChannelOn=void 0;var pe=require("vscode"),F=V(),RR=Hh(),bR=zh(),Wt=Nt(),cg=$i(),ug=Te(),wR=ju(),rn=re(),SR=rl(),lg=Cp(),dg=Dp(),ri=Rp(),TR=bp(),PR=wp(),xR=Sp(),qR=Pp(),ER=xp(),kR=xl(),OR=Ep(),IR=kp(),FR=Op(),NR=Fp(),kd=Np(),LR=Mp(),MR=Ap(),AR=$p(),jR=Hp(),$R=Wp(),HR=Up(),WR=zp(),UR=Kp(),zR=Vp(),KR=Gp(),VR=Bp(),GR=Qp(),BR=Jp(),XR=Yp(),ii=tg(),QR=ng(),JR=rg(),YR=sg(),ZR=ag(),is;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(is=_e.RevealOutputChannelOn||(_e.RevealOutputChannelOn={}));var Ho;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(Ho=_e.ErrorAction||(_e.ErrorAction={}));var vr;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(vr=_e.CloseAction||(_e.CloseAction={}));var $o;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})($o=_e.State||(_e.State={}));var eb;(function(t){t.off="off",t.on="on"})(eb=_e.SuspendMode||(_e.SuspendMode={}));var Od=class{constructor(e,n){this.client=e,this.maxRestartCount=n,this.restarts=[]}error(e,n,r){return r&&r<=3?{action:Ho.Continue}:{action:Ho.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:vr.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:vr.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:vr.Restart})}},Z;(function(t){t.Initial="initial",t.Starting="starting",t.StartFailed="startFailed",t.Running="running",t.Stopping="stopping",t.Stopped="stopped"})(Z||(Z={}));var tb;(function(t){function e(n){return n&&F.MessageReader.is(n.reader)&&F.MessageWriter.is(n.writer)}t.is=e})(tb=_e.MessageTransports||(_e.MessageTransports={}));var yr=class{constructor(e,n,r){this._traceFormat=F.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new cg.Semaphore(1),this._id=e,this._name=n,r=r||{};let i={isTrusted:!1,supportHtml:!1};r.markdown!==void 0&&(i.isTrusted=r.markdown.isTrusted===!0,i.supportHtml=r.markdown.supportHtml===!0),this._clientOptions={documentSelector:r.documentSelector??[],synchronize:r.synchronize??{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName??this._name,revealOutputChannelOn:r.revealOutputChannelOn??is.Error,stdioEncoding:r.stdioEncoding??"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler??this.createDefaultErrorHandler(r.connectionOptions?.maxRestartCount),middleware:r.middleware??{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:i,diagnosticPullOptions:r.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:r.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Z.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new cg.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new F.Emitter,this._stateChangeEmitter=new F.Emitter,this._trace=F.Trace.Off,this._tracer={log:(s,o)=>{Wt.string(s)?this.logTrace(s,o):this.logObjectTrace(s)}},this._c2p=RR.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=bR.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=pe.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let n=this.getPublicState();this._state=e;let r=this.getPublicState();r!==n&&this._stateChangeEmitter.fire({oldState:n,newState:r})}getPublicState(){switch(this.$state){case Z.Starting:return $o.Starting;case Z.Running:return $o.Running;default:return $o.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...n){if(this.$state===Z.StartFailed||this.$state===Z.Stopping||this.$state===Z.Stopped)return Promise.reject(new F.ResponseError(F.ErrorCodes.ConnectionInactive,"Client is not running"));try{let r=await this.$start();return await this.forceDocumentSync(),r.sendRequest(e,...n)}catch(r){throw this.error(`Sending request ${Wt.string(e)?e:e.method} failed.`,r),r}}onRequest(e,n){let r=typeof e=="string"?e:e.method;this._requestHandlers.set(r,n);let i=this.activeConnection(),s;return i!==void 0?(this._requestDisposables.set(r,i.onRequest(e,n)),s={dispose:()=>{let o=this._requestDisposables.get(r);o!==void 0&&(o.dispose(),this._requestDisposables.delete(r))}}):(this._pendingRequestHandlers.set(r,n),s={dispose:()=>{this._pendingRequestHandlers.delete(r);let o=this._requestDisposables.get(r);o!==void 0&&(o.dispose(),this._requestDisposables.delete(r))}}),{dispose:()=>{this._requestHandlers.delete(r),s.dispose()}}}async sendNotification(e,n){if(this.$state===Z.StartFailed||this.$state===Z.Stopping||this.$state===Z.Stopped)return Promise.reject(new F.ResponseError(F.ErrorCodes.ConnectionInactive,"Client is not running"));try{let r=await this.$start();return await this.forceDocumentSync(),r.sendNotification(e,n)}catch(r){throw this.error(`Sending notification ${Wt.string(e)?e:e.method} failed.`,r),r}}onNotification(e,n){let r=typeof e=="string"?e:e.method;this._notificationHandlers.set(r,n);let i=this.activeConnection(),s;return i!==void 0?(this._notificationDisposables.set(r,i.onNotification(e,n)),s={dispose:()=>{let o=this._notificationDisposables.get(r);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(r))}}):(this._pendingNotificationHandlers.set(r,n),s={dispose:()=>{this._pendingNotificationHandlers.delete(r);let o=this._notificationDisposables.get(r);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(r))}}),{dispose:()=>{this._notificationHandlers.delete(r),s.dispose()}}}async sendProgress(e,n,r){if(this.$state===Z.StartFailed||this.$state===Z.Stopping||this.$state===Z.Stopped)return Promise.reject(new F.ResponseError(F.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,n,r)}catch(i){throw this.error(`Sending progress for token ${n} failed.`,i),i}}onProgress(e,n,r){this._progressHandlers.set(n,{type:e,handler:r});let i=this.activeConnection(),s,o=this._clientOptions.middleware?.handleWorkDoneProgress,a=F.WorkDoneProgress.is(e)&&o!==void 0?u=>{o(n,u,()=>r(u))}:r;return i!==void 0?(this._progressDisposables.set(n,i.onProgress(e,n,a)),s={dispose:()=>{let u=this._progressDisposables.get(n);u!==void 0&&(u.dispose(),this._progressDisposables.delete(n))}}):(this._pendingProgressHandlers.set(n,{type:e,handler:r}),s={dispose:()=>{this._pendingProgressHandlers.delete(n);let u=this._progressDisposables.get(n);u!==void 0&&(u.dispose(),this._progressDisposables.delete(n))}}),{dispose:()=>{this._progressHandlers.delete(n),s.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new Od(this,e??4)}async setTrace(e){this._trace=e;let n=this.activeConnection();n!==void 0&&await n.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof F.ResponseError){let n=e;return`  Message: ${n.message}
  Code: ${n.code} ${n.data?`
`+n.data.toString():""}`}return e instanceof Error?Wt.string(e.stack)?e.stack:e.message:Wt.string(e)?e:e.toString()}info(e,n,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=is.Info&&this.showNotificationMessage(F.MessageType.Info,e)}warn(e,n,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=is.Warn&&this.showNotificationMessage(F.MessageType.Warning,e)}error(e,n,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),(r==="force"||r&&this._clientOptions.revealOutputChannelOn<=is.Error)&&this.showNotificationMessage(F.MessageType.Error,e)}showNotificationMessage(e,n){n=n??"A request has failed. See the output for more information.",(e===F.MessageType.Error?pe.window.showErrorMessage:e===F.MessageType.Warning?pe.window.showWarningMessage:pe.window.showInformationMessage)(n,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,n){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.traceOutputChannel.appendLine(this.data2String(n))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===Z.Initial||this.$state===Z.Stopping||this.$state===Z.Stopped}needsStop(){return this.$state===Z.Starting||this.$state===Z.Running}activeConnection(){return this.$state===Z.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===Z.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===Z.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,n,r]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?pe.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):pe.languages.createDiagnosticCollection());for(let[i,s]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,s);for(let[i,s]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,s);for(let[i,s]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,s);this.$state=Z.Starting;try{let i=await this.createConnection();i.onNotification(F.LogMessageNotification.type,s=>{switch(s.type){case F.MessageType.Error:this.error(s.message,void 0,!1);break;case F.MessageType.Warning:this.warn(s.message,void 0,!1);break;case F.MessageType.Info:this.info(s.message,void 0,!1);break;default:this.outputChannel.appendLine(s.message)}}),i.onNotification(F.ShowMessageNotification.type,s=>{switch(s.type){case F.MessageType.Error:pe.window.showErrorMessage(s.message);break;case F.MessageType.Warning:pe.window.showWarningMessage(s.message);break;case F.MessageType.Info:pe.window.showInformationMessage(s.message);break;default:pe.window.showInformationMessage(s.message)}}),i.onRequest(F.ShowMessageRequest.type,s=>{let o;switch(s.type){case F.MessageType.Error:o=pe.window.showErrorMessage;break;case F.MessageType.Warning:o=pe.window.showWarningMessage;break;case F.MessageType.Info:o=pe.window.showInformationMessage;break;default:o=pe.window.showInformationMessage}let a=s.actions||[];return o(s.message,...a)}),i.onNotification(F.TelemetryEventNotification.type,s=>{this._telemetryEmitter.fire(s)}),i.onRequest(F.ShowDocumentRequest.type,async s=>{let o=async u=>{let l=this.protocol2CodeConverter.asUri(u.uri);try{if(u.external===!0)return{success:await pe.env.openExternal(l)};{let h={};return u.selection!==void 0&&(h.selection=this.protocol2CodeConverter.asRange(u.selection)),u.takeFocus===void 0||u.takeFocus===!1?h.preserveFocus=!0:u.takeFocus===!0&&(h.preserveFocus=!1),await pe.window.showTextDocument(l,h),{success:!0}}}catch{return{success:!1}}},a=this._clientOptions.middleware.window?.showDocument;return a!==void 0?a(s,o):o(s)}),i.listen(),await this.initialize(i),n()}catch(i){this.$state=Z.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),r(i)}return this._onStart}createOnStartPromise(){let e,n;return[new Promise((i,s)=>{e=i,n=s}),e,n]}async initialize(e){this.refreshTrace(e,!1);let n=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],s={processId:null,clientInfo:{name:pe.env.appName,version:pe.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(pe.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Wt.func(n)?n():n,trace:F.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(s),this._clientOptions.progressOnInitialization){let o=ug.generateUuid(),a=new wR.ProgressPart(e,o);s.workDoneToken=o;try{let u=await this.doInitialize(e,s);return a.done(),u}catch(u){throw a.cancel(),u}}else return this.doInitialize(e,s)}async doInitialize(e,n){try{let r=await e.initialize(n);if(r.capabilities.positionEncoding!==void 0&&r.capabilities.positionEncoding!==F.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${r.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=r,this.$state=Z.Running;let i;Wt.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===F.TextDocumentSyncKind.None?i={openClose:!1,change:F.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(F.PublishDiagnosticsNotification.type,s=>this.handleDiagnostics(s)),e.onRequest(F.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(F.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(F.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s));for(let[s,o]of this._pendingNotificationHandlers)this._notificationDisposables.set(s,e.onNotification(s,o));this._pendingNotificationHandlers.clear();for(let[s,o]of this._pendingRequestHandlers)this._requestDisposables.set(s,e.onRequest(s,o));this._pendingRequestHandlers.clear();for(let[s,o]of this._pendingProgressHandlers)this._progressDisposables.set(s,e.onProgress(o.type,s,o.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(F.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),r}catch(r){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):this.stop():r instanceof F.ResponseError&&r.data&&r.data.retry?pe.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(r&&r.message&&pe.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop()),r}}_clientGetRootPath(){let e=pe.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,n){if(this.$state===Z.Stopped||this.$state===Z.Initial)return;if(this.$state===Z.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let r=this.activeConnection();if(r===void 0||this.$state!==Z.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=Z.Stopping,this.cleanUp(e);let i=new Promise(o=>{(0,F.RAL)().timer.setTimeout(o,n)}),s=(async o=>(await o.shutdown(),await o.exit(),o))(r);return this._onStop=Promise.race([i,s]).then(o=>{if(o!==void 0)o.end(),o.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},o=>{throw this.error("Stopping server failed",o,!1),o}).finally(()=>{this.$state=Z.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let n=this._listeners.splice(0,this._listeners.length);for(let r of n)r.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=>i[1]).reverse())r.dispose();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let n=this;async function r(s){return n._fileEvents.push(s),n._fileEventDelayer.trigger(async()=>{let o=await n.$start();await n.forceDocumentSync();let a=o.sendNotification(F.DidChangeWatchedFilesNotification.type,{changes:n._fileEvents});return n._fileEvents=[],a})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(s=>{n.error("Notify file events failed.",s)})}async forceDocumentSync(){return this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(F.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let n=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===n&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,F.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[n,r]=e.value;this._diagnosticQueue.delete(n);let i=new pe.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:n,tokenSource:i},this._p2c.asDiagnostics(r,i.token).then(s=>{if(!i.token.isCancellationRequested){let o=this._p2c.asUri(n),a=this.clientOptions.middleware;a.handleDiagnostics?a.handleDiagnostics(o,s,(u,l)=>this.setDiagnostics(u,l)):this.setDiagnostics(o,s)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,n){!this._diagnostics||this._diagnostics.set(e,n)}async $start(){if(this.$state===Z.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,s,o)=>{this.handleConnectionError(i,s,o)},n=()=>{this.handleConnectionClosed()},r=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=nb(r.reader,r.writer,e,n,this._clientOptions.connectionOptions),this._connection}handleConnectionClosed(){if(this.$state===Z.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:vr.DoNotRestart};if(this.$state!==Z.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===vr.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,"force"),this.cleanUp("stop"),this.$state===Z.Starting?this.$state=Z.StartFailed:this.$state=Z.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===vr.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart."),this.cleanUp("restart"),this.$state=Z.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(n=>this.error("Restarting server failed",n,"force")))}handleConnectionError(e,n,r){let i=this._clientOptions.errorHandler.error(e,n,r);i.action===Ho.Shutdown&&(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,"force"),this.stop().catch(s=>{this.error("Stopping server failed",s,!1)}))}hookConfigurationChanged(e){this._listeners.push(pe.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,n=!1){let r=pe.workspace.getConfiguration(this._id),i=F.Trace.Off,s=F.TraceFormat.Text;if(r){let o=r.get("trace.server","off");typeof o=="string"?i=F.Trace.fromString(o):(i=F.Trace.fromString(r.get("trace.server.verbosity","off")),s=F.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:n,traceFormat:this._traceFormat}).catch(o=>{this.error("Updating trace failed with error",o,!1)})}hookFileEvents(e){let n=this._clientOptions.synchronize.fileEvents;if(!n)return;let r;Wt.array(n)?r=n:r=[n],r&&this._dynamicFeatures.get(F.DidChangeWatchedFilesNotification.type.method).registerRaw(ug.generateUuid(),r)}registerFeatures(e){for(let n of e)this.registerFeature(n)}registerFeature(e){if(this._features.push(e),rn.DynamicFeature.is(e)){let n=e.registrationType;this._dynamicFeatures.set(n.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let n=this.getFeature(F.NotebookDocumentSyncRegistrationType.method);return n===void 0||!(n instanceof lg.NotebookDocumentSyncFeature)?!1:n.handles(e)}registerBuiltinFeatures(){this.registerFeature(new dg.ConfigurationFeature(this)),this.registerFeature(new ri.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new ri.DidChangeTextDocumentFeature(this)),this.registerFeature(new ri.WillSaveFeature(this)),this.registerFeature(new ri.WillSaveWaitUntilFeature(this)),this.registerFeature(new ri.DidSaveTextDocumentFeature(this)),this.registerFeature(new ri.DidCloseTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new jR.FileSystemWatcherFeature(this,e=>this.notifyFileEvent(e))),this.registerFeature(new TR.CompletionItemFeature(this)),this.registerFeature(new PR.HoverFeature(this)),this.registerFeature(new qR.SignatureHelpFeature(this)),this.registerFeature(new xR.DefinitionFeature(this)),this.registerFeature(new IR.ReferencesFeature(this)),this.registerFeature(new ER.DocumentHighlightFeature(this)),this.registerFeature(new kR.DocumentSymbolFeature(this)),this.registerFeature(new OR.WorkspaceSymbolFeature(this)),this.registerFeature(new FR.CodeActionFeature(this)),this.registerFeature(new NR.CodeLensFeature(this)),this.registerFeature(new kd.DocumentFormattingFeature(this)),this.registerFeature(new kd.DocumentRangeFormattingFeature(this)),this.registerFeature(new kd.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new LR.RenameFeature(this)),this.registerFeature(new MR.DocumentLinkFeature(this)),this.registerFeature(new AR.ExecuteCommandFeature(this)),this.registerFeature(new dg.SyncConfigurationFeature(this)),this.registerFeature(new WR.TypeDefinitionFeature(this)),this.registerFeature(new HR.ImplementationFeature(this)),this.registerFeature(new $R.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new UR.WorkspaceFoldersFeature(this)),this.registerFeature(new zR.FoldingRangeFeature(this)),this.registerFeature(new KR.DeclarationFeature(this)),this.registerFeature(new VR.SelectionRangeFeature(this)),this.registerFeature(new GR.ProgressFeature(this)),this.registerFeature(new BR.CallHierarchyFeature(this)),this.registerFeature(new XR.SemanticTokensFeature(this)),this.registerFeature(new QR.LinkedEditingFeature(this)),this.registerFeature(new ii.DidCreateFilesFeature(this)),this.registerFeature(new ii.DidRenameFilesFeature(this)),this.registerFeature(new ii.DidDeleteFilesFeature(this)),this.registerFeature(new ii.WillCreateFilesFeature(this)),this.registerFeature(new ii.WillRenameFilesFeature(this)),this.registerFeature(new ii.WillDeleteFilesFeature(this)),this.registerFeature(new JR.TypeHierarchyFeature(this)),this.registerFeature(new YR.InlineValueFeature(this)),this.registerFeature(new ZR.InlayHintsFeature(this)),this.registerFeature(new SR.DiagnosticFeature(this)),this.registerFeature(new lg.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(fg.createAll(this))}fillInitializeParams(e){for(let n of this._features)Wt.func(n.fillInitializeParams)&&n.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,rn.ensure)(e,"workspace").applyEdit=!0;let n=(0,rn.ensure)((0,rn.ensure)(e,"workspace"),"workspaceEdit");n.documentChanges=!0,n.resourceOperations=[F.ResourceOperationKind.Create,F.ResourceOperationKind.Rename,F.ResourceOperationKind.Delete],n.failureHandling=F.FailureHandlingKind.TextOnlyTransactional,n.normalizesLineEndings=!0,n.changeAnnotationSupport={groupsOnLabel:!0};let r=(0,rn.ensure)((0,rn.ensure)(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[F.DiagnosticTag.Unnecessary,F.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=(0,rn.ensure)(e,"window"),s=(0,rn.ensure)(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let o=(0,rn.ensure)(i,"showDocument");o.support=!0;let a=(0,rn.ensure)(e,"general");a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(yr.RequestsToCancelOnContentModified)},a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"},a.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(a.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let u of this._features)u.fillClientCapabilities(e);return e}initializeFeatures(e){let n=this._clientOptions.documentSelector;for(let r of this._features)Wt.func(r.preInitialize)&&r.preInitialize(this._capabilities,n);for(let r of this._features)r.initialize(this._capabilities,n)}async handleRegistrationRequest(e){if(!this.isRunning()){for(let n of e.registrations)this._ignoredRegistrations.add(n.id);return}for(let n of e.registrations){let r=this._dynamicFeatures.get(n.method);if(r===void 0)return Promise.reject(new Error(`No feature implementation for ${n.method} found. Registration failed.`));let i=n.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let s={id:n.id,registerOptions:i};try{r.register(s)}catch(o){return Promise.reject(o)}}}async handleUnregistrationRequest(e){for(let n of e.unregisterations){if(this._ignoredRegistrations.has(n.id))continue;let r=this._dynamicFeatures.get(n.method);if(!r)return Promise.reject(new Error(`No feature implementation for ${n.method} found. Unregistration failed.`));r.unregister(n.id)}}async handleApplyWorkspaceEdit(e){let n=e.edit,r=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(n)),i=new Map;pe.workspace.textDocuments.forEach(o=>i.set(o.uri.toString(),o));let s=!1;if(n.documentChanges){for(let o of n.documentChanges)if(F.TextDocumentEdit.is(o)&&o.textDocument.version&&o.textDocument.version>=0){let a=i.get(o.textDocument.uri);if(a&&a.version!==o.textDocument.version){s=!0;break}}}return s?Promise.resolve({applied:!1}):Wt.asPromise(pe.workspace.applyEdit(r).then(o=>({applied:o})))}handleFailedRequest(e,n,r,i,s=!0){if(r instanceof F.ResponseError){if(r.code===F.ErrorCodes.PendingResponseRejected||r.code===F.ErrorCodes.ConnectionInactive)return i;if(r.code===F.LSPErrorCodes.RequestCancelled||r.code===F.LSPErrorCodes.ServerCancelled){if(n!==void 0&&n.isCancellationRequested)return i;throw r.data!==void 0?new rn.LSPCancellationError(r.data):new pe.CancellationError}else if(r.code===F.LSPErrorCodes.ContentModified){if(yr.RequestsToCancelOnContentModified.has(e.method))throw new pe.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,s),r}};_e.BaseLanguageClient=yr;yr.RequestsToCancelOnContentModified=new Set([F.SemanticTokensRequest.method,F.SemanticTokensRangeRequest.method,F.SemanticTokensDeltaRequest.method]);var Id=class{error(e){(0,F.RAL)().console.error(e)}warn(e){(0,F.RAL)().console.warn(e)}info(e){(0,F.RAL)().console.info(e)}log(e){(0,F.RAL)().console.log(e)}};function nb(t,e,n,r,i){let s=-1,o=new Id,a=(0,F.createProtocolConnection)(t,e,o,i);return a.onError(l=>{n(l[0],l[1],l[2])}),a.onClose(r),{get lastUsed(){return s},resetLastUsed:()=>{s=-1},listen:()=>a.listen(),sendRequest:(l,...h)=>(s=Date.now(),a.sendRequest(l,...h)),onRequest:(l,h)=>a.onRequest(l,h),hasPendingResponse:()=>a.hasPendingResponse(),sendNotification:(l,h)=>(s=Date.now(),a.sendNotification(l,h)),onNotification:(l,h)=>a.onNotification(l,h),onProgress:a.onProgress,sendProgress:a.sendProgress,trace:(l,h,g)=>{let p={sendNotification:!1,traceFormat:F.TraceFormat.Text};return g===void 0?a.trace(l,h,p):(Wt.boolean(g),a.trace(l,h,g))},initialize:l=>(s=Date.now(),a.sendRequest(F.InitializeRequest.type,l)),shutdown:()=>(s=Date.now(),a.sendRequest(F.ShutdownRequest.type,void 0)),exit:()=>(s=Date.now(),a.sendNotification(F.ExitNotification.type)),end:()=>a.end(),dispose:()=>a.dispose()}}var fg;(function(t){function e(n){return[]}t.createAll=e})(fg=_e.ProposedFeatures||(_e.ProposedFeatures={}))});var pg=w(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.terminate=void 0;var hg=require("child_process"),rb=require("path"),ib=process.platform==="win32",sb=process.platform==="darwin",ob=process.platform==="linux";function ab(t,e){if(ib)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),hg.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch{return!1}else if(ob||sb)try{var n=(0,rb.join)(__dirname,"terminateProcess.sh"),r=hg.spawnSync(n,[t.pid.toString()]);return!r.error}catch{return!1}else return t.kill("SIGKILL"),!0}Wo.terminate=ab});var Nd=w((_T,gg)=>{"use strict";gg.exports=V()});var Uo=w((DT,mg)=>{var cb="2.0.0",ub=Number.MAX_SAFE_INTEGER||9007199254740991,lb=16;mg.exports={SEMVER_SPEC_VERSION:cb,MAX_LENGTH:256,MAX_SAFE_INTEGER:ub,MAX_SAFE_COMPONENT_LENGTH:lb}});var ss=w((RT,vg)=>{var db=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};vg.exports=db});var os=w((zn,yg)=>{var{MAX_SAFE_COMPONENT_LENGTH:Ld}=Uo(),fb=ss();zn=yg.exports={};var hb=zn.re=[],A=zn.src=[],j=zn.t={},pb=0,Q=(t,e,n)=>{let r=pb++;fb(t,r,e),j[t]=r,A[r]=e,hb[r]=new RegExp(e,n?"g":void 0)};Q("NUMERICIDENTIFIER","0|[1-9]\\d*");Q("NUMERICIDENTIFIERLOOSE","[0-9]+");Q("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");Q("MAINVERSION",`(${A[j.NUMERICIDENTIFIER]})\\.(${A[j.NUMERICIDENTIFIER]})\\.(${A[j.NUMERICIDENTIFIER]})`);Q("MAINVERSIONLOOSE",`(${A[j.NUMERICIDENTIFIERLOOSE]})\\.(${A[j.NUMERICIDENTIFIERLOOSE]})\\.(${A[j.NUMERICIDENTIFIERLOOSE]})`);Q("PRERELEASEIDENTIFIER",`(?:${A[j.NUMERICIDENTIFIER]}|${A[j.NONNUMERICIDENTIFIER]})`);Q("PRERELEASEIDENTIFIERLOOSE",`(?:${A[j.NUMERICIDENTIFIERLOOSE]}|${A[j.NONNUMERICIDENTIFIER]})`);Q("PRERELEASE",`(?:-(${A[j.PRERELEASEIDENTIFIER]}(?:\\.${A[j.PRERELEASEIDENTIFIER]})*))`);Q("PRERELEASELOOSE",`(?:-?(${A[j.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${A[j.PRERELEASEIDENTIFIERLOOSE]})*))`);Q("BUILDIDENTIFIER","[0-9A-Za-z-]+");Q("BUILD",`(?:\\+(${A[j.BUILDIDENTIFIER]}(?:\\.${A[j.BUILDIDENTIFIER]})*))`);Q("FULLPLAIN",`v?${A[j.MAINVERSION]}${A[j.PRERELEASE]}?${A[j.BUILD]}?`);Q("FULL",`^${A[j.FULLPLAIN]}$`);Q("LOOSEPLAIN",`[v=\\s]*${A[j.MAINVERSIONLOOSE]}${A[j.PRERELEASELOOSE]}?${A[j.BUILD]}?`);Q("LOOSE",`^${A[j.LOOSEPLAIN]}$`);Q("GTLT","((?:<|>)?=?)");Q("XRANGEIDENTIFIERLOOSE",`${A[j.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Q("XRANGEIDENTIFIER",`${A[j.NUMERICIDENTIFIER]}|x|X|\\*`);Q("XRANGEPLAIN",`[v=\\s]*(${A[j.XRANGEIDENTIFIER]})(?:\\.(${A[j.XRANGEIDENTIFIER]})(?:\\.(${A[j.XRANGEIDENTIFIER]})(?:${A[j.PRERELEASE]})?${A[j.BUILD]}?)?)?`);Q("XRANGEPLAINLOOSE",`[v=\\s]*(${A[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${A[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${A[j.XRANGEIDENTIFIERLOOSE]})(?:${A[j.PRERELEASELOOSE]})?${A[j.BUILD]}?)?)?`);Q("XRANGE",`^${A[j.GTLT]}\\s*${A[j.XRANGEPLAIN]}$`);Q("XRANGELOOSE",`^${A[j.GTLT]}\\s*${A[j.XRANGEPLAINLOOSE]}$`);Q("COERCE",`(^|[^\\d])(\\d{1,${Ld}})(?:\\.(\\d{1,${Ld}}))?(?:\\.(\\d{1,${Ld}}))?(?:$|[^\\d])`);Q("COERCERTL",A[j.COERCE],!0);Q("LONETILDE","(?:~>?)");Q("TILDETRIM",`(\\s*)${A[j.LONETILDE]}\\s+`,!0);zn.tildeTrimReplace="$1~";Q("TILDE",`^${A[j.LONETILDE]}${A[j.XRANGEPLAIN]}$`);Q("TILDELOOSE",`^${A[j.LONETILDE]}${A[j.XRANGEPLAINLOOSE]}$`);Q("LONECARET","(?:\\^)");Q("CARETTRIM",`(\\s*)${A[j.LONECARET]}\\s+`,!0);zn.caretTrimReplace="$1^";Q("CARET",`^${A[j.LONECARET]}${A[j.XRANGEPLAIN]}$`);Q("CARETLOOSE",`^${A[j.LONECARET]}${A[j.XRANGEPLAINLOOSE]}$`);Q("COMPARATORLOOSE",`^${A[j.GTLT]}\\s*(${A[j.LOOSEPLAIN]})$|^$`);Q("COMPARATOR",`^${A[j.GTLT]}\\s*(${A[j.FULLPLAIN]})$|^$`);Q("COMPARATORTRIM",`(\\s*)${A[j.GTLT]}\\s*(${A[j.LOOSEPLAIN]}|${A[j.XRANGEPLAIN]})`,!0);zn.comparatorTrimReplace="$1$2$3";Q("HYPHENRANGE",`^\\s*(${A[j.XRANGEPLAIN]})\\s+-\\s+(${A[j.XRANGEPLAIN]})\\s*$`);Q("HYPHENRANGELOOSE",`^\\s*(${A[j.XRANGEPLAINLOOSE]})\\s+-\\s+(${A[j.XRANGEPLAINLOOSE]})\\s*$`);Q("STAR","(<|>)?=?\\s*\\*");Q("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Q("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var as=w((bT,Cg)=>{var gb=["includePrerelease","loose","rtl"],mb=t=>t?typeof t!="object"?{loose:!0}:gb.filter(e=>t[e]).reduce((e,n)=>(e[n]=!0,e),{}):{};Cg.exports=mb});var bg=w((wT,Rg)=>{var _g=/^[0-9]+$/,Dg=(t,e)=>{let n=_g.test(t),r=_g.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},vb=(t,e)=>Dg(e,t);Rg.exports={compareIdentifiers:Dg,rcompareIdentifiers:vb}});var cs=w((ST,Pg)=>{var zo=ss(),{MAX_LENGTH:wg,MAX_SAFE_INTEGER:Ko}=Uo(),{re:Sg,t:Tg}=os(),yb=as(),{compareIdentifiers:si}=bg(),Et=class{constructor(e,n){if(n=yb(n),e instanceof Et){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>wg)throw new TypeError(`version is longer than ${wg} characters`);zo("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?Sg[Tg.LOOSE]:Sg[Tg.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Ko||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ko||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ko||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Ko)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(zo("SemVer.compare",this.version,this.options,e),!(e instanceof Et)){if(typeof e=="string"&&e===this.version)return 0;e=new Et(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Et||(e=new Et(e,this.options)),si(this.major,e.major)||si(this.minor,e.minor)||si(this.patch,e.patch)}comparePre(e){if(e instanceof Et||(e=new Et(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if(zo("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return si(r,i)}while(++n)}compareBuild(e){e instanceof Et||(e=new Et(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if(zo("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return si(r,i)}while(++n)}inc(e,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}n&&(si(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};Pg.exports=Et});var Og=w((TT,kg)=>{var{MAX_LENGTH:Cb}=Uo(),{re:xg,t:qg}=os(),Eg=cs(),_b=as(),Db=(t,e)=>{if(e=_b(e),t instanceof Eg)return t;if(typeof t!="string"||t.length>Cb||!(e.loose?xg[qg.LOOSE]:xg[qg.FULL]).test(t))return null;try{return new Eg(t,e)}catch{return null}};kg.exports=Db});var Fg=w((PT,Ig)=>{"use strict";Ig.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Lg=w((xT,Ng)=>{"use strict";Ng.exports=se;se.Node=Cr;se.create=se;function se(t){var e=this;if(e instanceof se||(e=new se),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}se.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};se.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};se.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};se.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)bb(this,arguments[t]);return this.length};se.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)wb(this,arguments[t]);return this.length};se.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};se.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};se.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};se.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};se.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};se.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};se.prototype.map=function(t,e){e=e||this;for(var n=new se,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};se.prototype.mapReverse=function(t,e){e=e||this;for(var n=new se,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};se.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=t(n,r.value,i),r=r.next;return n};se.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=t(n,r.value,i),r=r.prev;return n};se.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};se.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};se.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new se;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)n.push(i.value);return n};se.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new se;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>t;r--,i=i.prev)n.push(i.value);return n};se.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(var s=[],r=0;i&&r<e;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Rb(this,i,n[r]);return s};se.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function Rb(t,e,n){var r=e===t.head?new Cr(n,null,e,t):new Cr(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function bb(t,e){t.tail=new Cr(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function wb(t,e){t.head=new Cr(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Cr(t,e,n,r){if(!(this instanceof Cr))return new Cr(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Fg()(se)}catch{}});var Hg=w((qT,$g)=>{"use strict";var Sb=Lg(),_r=Symbol("max"),Fn=Symbol("length"),oi=Symbol("lengthCalculator"),ls=Symbol("allowStale"),Dr=Symbol("maxAge"),In=Symbol("dispose"),Mg=Symbol("noDisposeOnSet"),Ge=Symbol("lruList"),sn=Symbol("cache"),jg=Symbol("updateAgeOnGet"),Md=()=>1,jd=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let n=this[_r]=e.max||1/0,r=e.length||Md;if(this[oi]=typeof r!="function"?Md:r,this[ls]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Dr]=e.maxAge||0,this[In]=e.dispose,this[Mg]=e.noDisposeOnSet||!1,this[jg]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[_r]=e||1/0,us(this)}get max(){return this[_r]}set allowStale(e){this[ls]=!!e}get allowStale(){return this[ls]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Dr]=e,us(this)}get maxAge(){return this[Dr]}set lengthCalculator(e){typeof e!="function"&&(e=Md),e!==this[oi]&&(this[oi]=e,this[Fn]=0,this[Ge].forEach(n=>{n.length=this[oi](n.value,n.key),this[Fn]+=n.length})),us(this)}get lengthCalculator(){return this[oi]}get length(){return this[Fn]}get itemCount(){return this[Ge].length}rforEach(e,n){n=n||this;for(let r=this[Ge].tail;r!==null;){let i=r.prev;Ag(this,e,r,n),r=i}}forEach(e,n){n=n||this;for(let r=this[Ge].head;r!==null;){let i=r.next;Ag(this,e,r,n),r=i}}keys(){return this[Ge].toArray().map(e=>e.key)}values(){return this[Ge].toArray().map(e=>e.value)}reset(){this[In]&&this[Ge]&&this[Ge].length&&this[Ge].forEach(e=>this[In](e.key,e.value)),this[sn]=new Map,this[Ge]=new Sb,this[Fn]=0}dump(){return this[Ge].map(e=>Vo(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Ge]}set(e,n,r){if(r=r||this[Dr],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,s=this[oi](n,e);if(this[sn].has(e)){if(s>this[_r])return ai(this,this[sn].get(e)),!1;let u=this[sn].get(e).value;return this[In]&&(this[Mg]||this[In](e,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Fn]+=s-u.length,u.length=s,this.get(e),us(this),!0}let o=new $d(e,n,s,i,r);return o.length>this[_r]?(this[In]&&this[In](e,n),!1):(this[Fn]+=o.length,this[Ge].unshift(o),this[sn].set(e,this[Ge].head),us(this),!0)}has(e){if(!this[sn].has(e))return!1;let n=this[sn].get(e).value;return!Vo(this,n)}get(e){return Ad(this,e,!0)}peek(e){return Ad(this,e,!1)}pop(){let e=this[Ge].tail;return e?(ai(this,e),e.value):null}del(e){ai(this,this[sn].get(e))}load(e){this.reset();let n=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[sn].forEach((e,n)=>Ad(this,n,!1))}},Ad=(t,e,n)=>{let r=t[sn].get(e);if(r){let i=r.value;if(Vo(t,i)){if(ai(t,r),!t[ls])return}else n&&(t[jg]&&(r.value.now=Date.now()),t[Ge].unshiftNode(r));return i.value}},Vo=(t,e)=>{if(!e||!e.maxAge&&!t[Dr])return!1;let n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[Dr]&&n>t[Dr]},us=t=>{if(t[Fn]>t[_r])for(let e=t[Ge].tail;t[Fn]>t[_r]&&e!==null;){let n=e.prev;ai(t,e),e=n}},ai=(t,e)=>{if(e){let n=e.value;t[In]&&t[In](n.key,n.value),t[Fn]-=n.length,t[sn].delete(n.key),t[Ge].removeNode(e)}},$d=class{constructor(e,n,r,i,s){this.key=e,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}},Ag=(t,e,n,r)=>{let i=n.value;Vo(t,i)&&(ai(t,n),t[ls]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};$g.exports=jd});var Rr=w((ET,Ug)=>{var Wg=cs(),Tb=(t,e,n)=>new Wg(t,n).compare(new Wg(e,n));Ug.exports=Tb});var Kg=w((kT,zg)=>{var Pb=Rr(),xb=(t,e,n)=>Pb(t,e,n)===0;zg.exports=xb});var Gg=w((OT,Vg)=>{var qb=Rr(),Eb=(t,e,n)=>qb(t,e,n)!==0;Vg.exports=Eb});var Xg=w((IT,Bg)=>{var kb=Rr(),Ob=(t,e,n)=>kb(t,e,n)>0;Bg.exports=Ob});var Jg=w((FT,Qg)=>{var Ib=Rr(),Fb=(t,e,n)=>Ib(t,e,n)>=0;Qg.exports=Fb});var Zg=w((NT,Yg)=>{var Nb=Rr(),Lb=(t,e,n)=>Nb(t,e,n)<0;Yg.exports=Lb});var tm=w((LT,em)=>{var Mb=Rr(),Ab=(t,e,n)=>Mb(t,e,n)<=0;em.exports=Ab});var rm=w((MT,nm)=>{var jb=Kg(),$b=Gg(),Hb=Xg(),Wb=Jg(),Ub=Zg(),zb=tm(),Kb=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return jb(t,n,r);case"!=":return $b(t,n,r);case">":return Hb(t,n,r);case">=":return Wb(t,n,r);case"<":return Ub(t,n,r);case"<=":return zb(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};nm.exports=Kb});var um=w((AT,cm)=>{var ds=Symbol("SemVer ANY"),ci=class{static get ANY(){return ds}constructor(e,n){if(n=Vb(n),e instanceof ci){if(e.loose===!!n.loose)return e;e=e.value}Wd("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===ds?this.value="":this.value=this.operator+this.semver.version,Wd("comp",this)}parse(e){let n=this.options.loose?im[sm.COMPARATORLOOSE]:im[sm.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new om(r[2],this.options.loose):this.semver=ds}toString(){return this.value}test(e){if(Wd("Comparator.test",e,this.options.loose),this.semver===ds||e===ds)return!0;if(typeof e=="string")try{e=new om(e,this.options)}catch{return!1}return Hd(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof ci))throw new TypeError("a Comparator is required");if((!n||typeof n!="object")&&(n={loose:!!n,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new am(e.value,n).test(this.value);if(e.operator==="")return e.value===""?!0:new am(this.value,n).test(e.semver);let r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=Hd(this.semver,"<",e.semver,n)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),u=Hd(this.semver,">",e.semver,n)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||s&&o||a||u}};cm.exports=ci;var Vb=as(),{re:im,t:sm}=os(),Hd=rm(),Wd=ss(),om=cs(),am=Ud()});var Ud=w((jT,hm)=>{var br=class{constructor(e,n){if(n=Bb(n),e instanceof br)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new br(e.raw,n);if(e instanceof zd)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e,this.set=e.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!dm(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Zb(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=lm.get(r);if(i)return i;let s=this.options.loose,o=s?St[mt.HYPHENRANGELOOSE]:St[mt.HYPHENRANGE];e=e.replace(o,uw(this.options.includePrerelease)),xe("hyphen replace",e),e=e.replace(St[mt.COMPARATORTRIM],Qb),xe("comparator trim",e),e=e.replace(St[mt.TILDETRIM],Jb),e=e.replace(St[mt.CARETTRIM],Yb),e=e.split(/\s+/).join(" ");let a=e.split(" ").map(g=>ew(g,this.options)).join(" ").split(/\s+/).map(g=>cw(g,this.options));s&&(a=a.filter(g=>(xe("loose invalid filter",g,this.options),!!g.match(St[mt.COMPARATORLOOSE])))),xe("range list",a);let u=new Map,l=a.map(g=>new zd(g,this.options));for(let g of l){if(dm(g))return[g];u.set(g.value,g)}u.size>1&&u.has("")&&u.delete("");let h=[...u.values()];return lm.set(r,h),h}intersects(e,n){if(!(e instanceof br))throw new TypeError("a Range is required");return this.set.some(r=>fm(r,n)&&e.set.some(i=>fm(i,n)&&r.every(s=>i.every(o=>s.intersects(o,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Xb(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(lw(this.set[n],e,this.options))return!0;return!1}};hm.exports=br;var Gb=Hg(),lm=new Gb({max:1e3}),Bb=as(),zd=um(),xe=ss(),Xb=cs(),{re:St,t:mt,comparatorTrimReplace:Qb,tildeTrimReplace:Jb,caretTrimReplace:Yb}=os(),dm=t=>t.value==="<0.0.0-0",Zb=t=>t.value==="",fm=(t,e)=>{let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(s=>i.intersects(s,e)),i=r.pop();return n},ew=(t,e)=>(xe("comp",t,e),t=rw(t,e),xe("caret",t),t=tw(t,e),xe("tildes",t),t=sw(t,e),xe("xrange",t),t=aw(t,e),xe("stars",t),t),vt=t=>!t||t.toLowerCase()==="x"||t==="*",tw=(t,e)=>t.trim().split(/\s+/).map(n=>nw(n,e)).join(" "),nw=(t,e)=>{let n=e.loose?St[mt.TILDELOOSE]:St[mt.TILDE];return t.replace(n,(r,i,s,o,a)=>{xe("tilde",t,r,i,s,o,a);let u;return vt(i)?u="":vt(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:vt(o)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(xe("replaceTilde pr",a),u=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,xe("tilde return",u),u})},rw=(t,e)=>t.trim().split(/\s+/).map(n=>iw(n,e)).join(" "),iw=(t,e)=>{xe("caret",t,e);let n=e.loose?St[mt.CARETLOOSE]:St[mt.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(i,s,o,a,u)=>{xe("caret",t,i,s,o,a,u);let l;return vt(s)?l="":vt(o)?l=`>=${s}.0.0${r} <${+s+1}.0.0-0`:vt(a)?s==="0"?l=`>=${s}.${o}.0${r} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.0${r} <${+s+1}.0.0-0`:u?(xe("replaceCaret pr",u),s==="0"?o==="0"?l=`>=${s}.${o}.${a}-${u} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}-${u} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a}-${u} <${+s+1}.0.0-0`):(xe("no pr"),s==="0"?o==="0"?l=`>=${s}.${o}.${a}${r} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}${r} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),xe("caret return",l),l})},sw=(t,e)=>(xe("replaceXRanges",t,e),t.split(/\s+/).map(n=>ow(n,e)).join(" ")),ow=(t,e)=>{t=t.trim();let n=e.loose?St[mt.XRANGELOOSE]:St[mt.XRANGE];return t.replace(n,(r,i,s,o,a,u)=>{xe("xRange",t,r,i,s,o,a,u);let l=vt(s),h=l||vt(o),g=h||vt(a),p=g;return i==="="&&p&&(i=""),u=e.includePrerelease?"-0":"",l?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&p?(h&&(o=0),a=0,i===">"?(i=">=",h?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",h?s=+s+1:o=+o+1),i==="<"&&(u="-0"),r=`${i+s}.${o}.${a}${u}`):h?r=`>=${s}.0.0${u} <${+s+1}.0.0-0`:g&&(r=`>=${s}.${o}.0${u} <${s}.${+o+1}.0-0`),xe("xRange return",r),r})},aw=(t,e)=>(xe("replaceStars",t,e),t.trim().replace(St[mt.STAR],"")),cw=(t,e)=>(xe("replaceGTE0",t,e),t.trim().replace(St[e.includePrerelease?mt.GTE0PRE:mt.GTE0],"")),uw=t=>(e,n,r,i,s,o,a,u,l,h,g,p,y)=>(vt(r)?n="":vt(i)?n=`>=${r}.0.0${t?"-0":""}`:vt(s)?n=`>=${r}.${i}.0${t?"-0":""}`:o?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,vt(l)?u="":vt(h)?u=`<${+l+1}.0.0-0`:vt(g)?u=`<${l}.${+h+1}.0-0`:p?u=`<=${l}.${h}.${g}-${p}`:t?u=`<${l}.${h}.${+g+1}-0`:u=`<=${u}`,`${n} ${u}`.trim()),lw=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(xe(t[r].semver),t[r].semver!==zd.ANY&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var gm=w(($T,pm)=>{var dw=Ud(),fw=(t,e,n)=>{try{e=new dw(e,n)}catch{return!1}return e.test(t)};pm.exports=fw});var vm=w(kt=>{"use strict";var hw=kt&&kt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Kd=kt&&kt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&hw(e,t,n)};Object.defineProperty(kt,"__esModule",{value:!0});kt.DiagnosticPullMode=kt.vsdiag=void 0;Kd(V(),kt);Kd(re(),kt);var mm=rl();Object.defineProperty(kt,"vsdiag",{enumerable:!0,get:function(){return mm.vsdiag}});Object.defineProperty(kt,"DiagnosticPullMode",{enumerable:!0,get:function(){return mm.DiagnosticPullMode}});Kd(Fd(),kt)});var ef=w(yt=>{"use strict";var pw=yt&&yt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),_m=yt&&yt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&pw(e,t,n)};Object.defineProperty(yt,"__esModule",{value:!0});yt.SettingMonitor=yt.LanguageClient=yt.TransportKind=void 0;var Nn=require("child_process"),Vd=require("fs"),Gd=require("path"),Vn=require("vscode"),Re=Nt(),ym=Fd(),gw=pg(),qe=Nd(),mw=Og(),vw=gm();_m(Nd(),yt);_m(vm(),yt);var Cm="^1.67.0",Fe;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(Fe=yt.TransportKind||(yt.TransportKind={}));var Kn;(function(t){function e(n){let r=n;return r&&r.kind===Fe.socket&&Re.number(r.port)}t.isSocket=e})(Kn||(Kn={}));var Bd;(function(t){function e(n){return Re.string(n.command)}t.is=e})(Bd||(Bd={}));var Xd;(function(t){function e(n){return Re.string(n.module)}t.is=e})(Xd||(Xd={}));var Qd;(function(t){function e(n){let r=n;return r&&r.writer!==void 0&&r.reader!==void 0}t.is=e})(Qd||(Qd={}));var Jd;(function(t){function e(n){let r=n;return r&&r.process!==void 0&&typeof r.detached=="boolean"}t.is=e})(Jd||(Jd={}));var Yd=class extends ym.BaseLanguageClient{constructor(e,n,r,i,s){let o,a,u,l,h;Re.string(n)?(o=e,a=n,u=r,l=i,h=!!s):(o=e.toLowerCase(),a=e,u=n,l=r,h=i),h===void 0&&(h=!1),super(o,a,l),this._serverOptions=u,this._forceDebug=h,this._isInDebugMode=h;try{this.checkVersion()}catch(g){throw Re.string(g.message)&&this.outputChannel.appendLine(g.message),g}}checkVersion(){let e=mw(Vn.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${Vn.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!vw(e,Cm))throw new Error(`The language client requires VS Code version ${Cm} but received version ${Vn.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let n=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(n),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,gw.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function n(h,g){if(!h&&!g)return;let p=Object.create(null);return Object.keys(process.env).forEach(y=>p[y]=process.env[y]),g&&(p.ELECTRON_RUN_AS_NODE="1",p.ELECTRON_NO_ASAR="1"),h&&Object.keys(h).forEach(y=>p[y]=h[y]),p}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let h=process.execArgv;return h?h.some(g=>r.some(p=>g.startsWith(p))||i.some(p=>g===p)):!1}function o(h){if(h.stdin===null||h.stdout===null||h.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(Re.func(a))return a().then(h=>{if(ym.MessageTransports.is(h))return this._isDetached=!!h.detached,h;if(Qd.is(h))return this._isDetached=!!h.detached,{reader:new qe.StreamMessageReader(h.reader),writer:new qe.StreamMessageWriter(h.writer)};{let g;return Jd.is(h)?(g=h.process,this._isDetached=h.detached):(g=h,this._isDetached=!1),g.stderr.on("data",p=>this.outputChannel.append(Re.string(p)?p:p.toString(e))),{reader:new qe.StreamMessageReader(g.stdout),writer:new qe.StreamMessageWriter(g.stdin)}}});let u,l=a;return l.run||l.debug?this._forceDebug||s()?(u=l.debug,this._isInDebugMode=!0):(u=l.run,this._isInDebugMode=!1):u=a,this._getServerWorkingDir(u.options).then(h=>{if(Xd.is(u)&&u.module){let g=u,p=g.transport||Fe.stdio;if(g.runtime){let y=[],m=g.options??Object.create(null);m.execArgv&&m.execArgv.forEach(q=>y.push(q)),y.push(g.module),g.args&&g.args.forEach(q=>y.push(q));let D=Object.create(null);D.cwd=h,D.env=n(m.env,!1);let b=this._getRuntimePath(g.runtime,h),T;if(p===Fe.ipc?(D.stdio=[null,null,null,"ipc"],y.push("--node-ipc")):p===Fe.stdio?y.push("--stdio"):p===Fe.pipe?(T=(0,qe.generateRandomPipeName)(),y.push(`--pipe=${T}`)):Kn.isSocket(p)&&y.push(`--socket=${p.port}`),y.push(`--clientProcessId=${process.pid.toString()}`),p===Fe.ipc||p===Fe.stdio){let q=Nn.spawn(b,y,D);return!q||!q.pid?ui(q,`Launching server using runtime ${b} failed.`):(this._serverProcess=q,q.stderr.on("data",E=>this.outputChannel.append(Re.string(E)?E:E.toString(e))),p===Fe.ipc?(q.stdout.on("data",E=>this.outputChannel.append(Re.string(E)?E:E.toString(e))),Promise.resolve({reader:new qe.IPCMessageReader(q),writer:new qe.IPCMessageWriter(q)})):Promise.resolve({reader:new qe.StreamMessageReader(q.stdout),writer:new qe.StreamMessageWriter(q.stdin)}))}else{if(p===Fe.pipe)return(0,qe.createClientPipeTransport)(T).then(q=>{let E=Nn.spawn(b,y,D);return!E||!E.pid?ui(E,`Launching server using runtime ${b} failed.`):(this._serverProcess=E,E.stderr.on("data",I=>this.outputChannel.append(Re.string(I)?I:I.toString(e))),E.stdout.on("data",I=>this.outputChannel.append(Re.string(I)?I:I.toString(e))),q.onConnected().then(I=>({reader:I[0],writer:I[1]})))});if(Kn.isSocket(p))return(0,qe.createClientSocketTransport)(p.port).then(q=>{let E=Nn.spawn(b,y,D);return!E||!E.pid?ui(E,`Launching server using runtime ${b} failed.`):(this._serverProcess=E,E.stderr.on("data",I=>this.outputChannel.append(Re.string(I)?I:I.toString(e))),E.stdout.on("data",I=>this.outputChannel.append(Re.string(I)?I:I.toString(e))),q.onConnected().then(I=>({reader:I[0],writer:I[1]})))})}}else{let y;return new Promise((m,D)=>{let b=(g.args&&g.args.slice())??[];p===Fe.ipc?b.push("--node-ipc"):p===Fe.stdio?b.push("--stdio"):p===Fe.pipe?(y=(0,qe.generateRandomPipeName)(),b.push(`--pipe=${y}`)):Kn.isSocket(p)&&b.push(`--socket=${p.port}`),b.push(`--clientProcessId=${process.pid.toString()}`);let T=g.options??Object.create(null);if(T.env=n(T.env,!0),T.execArgv=T.execArgv||[],T.cwd=h,T.silent=!0,p===Fe.ipc||p===Fe.stdio){let q=Nn.fork(g.module,b||[],T);o(q),this._serverProcess=q,q.stderr.on("data",E=>this.outputChannel.append(Re.string(E)?E:E.toString(e))),p===Fe.ipc?(q.stdout.on("data",E=>this.outputChannel.append(Re.string(E)?E:E.toString(e))),m({reader:new qe.IPCMessageReader(this._serverProcess),writer:new qe.IPCMessageWriter(this._serverProcess)})):m({reader:new qe.StreamMessageReader(q.stdout),writer:new qe.StreamMessageWriter(q.stdin)})}else p===Fe.pipe?(0,qe.createClientPipeTransport)(y).then(q=>{let E=Nn.fork(g.module,b||[],T);o(E),this._serverProcess=E,E.stderr.on("data",I=>this.outputChannel.append(Re.string(I)?I:I.toString(e))),E.stdout.on("data",I=>this.outputChannel.append(Re.string(I)?I:I.toString(e))),q.onConnected().then(I=>{m({reader:I[0],writer:I[1]})},D)},D):Kn.isSocket(p)&&(0,qe.createClientSocketTransport)(p.port).then(q=>{let E=Nn.fork(g.module,b||[],T);o(E),this._serverProcess=E,E.stderr.on("data",I=>this.outputChannel.append(Re.string(I)?I:I.toString(e))),E.stdout.on("data",I=>this.outputChannel.append(Re.string(I)?I:I.toString(e))),q.onConnected().then(I=>{m({reader:I[0],writer:I[1]})},D)},D)})}}else if(Bd.is(u)&&u.command){let g=u,p=u.args!==void 0?u.args.slice(0):[],y,m=u.transport;if(m===Fe.stdio)p.push("--stdio");else if(m===Fe.pipe)y=(0,qe.generateRandomPipeName)(),p.push(`--pipe=${y}`);else if(Kn.isSocket(m))p.push(`--socket=${m.port}`);else if(m===Fe.ipc)throw new Error("Transport kind ipc is not support for command executable");let D=Object.assign({},g.options);if(D.cwd=D.cwd||h,m===void 0||m===Fe.stdio){let b=Nn.spawn(g.command,p,D);return!b||!b.pid?ui(b,`Launching server using command ${g.command} failed.`):(b.stderr.on("data",T=>this.outputChannel.append(Re.string(T)?T:T.toString(e))),this._serverProcess=b,this._isDetached=!!D.detached,Promise.resolve({reader:new qe.StreamMessageReader(b.stdout),writer:new qe.StreamMessageWriter(b.stdin)}))}else{if(m===Fe.pipe)return(0,qe.createClientPipeTransport)(y).then(b=>{let T=Nn.spawn(g.command,p,D);return!T||!T.pid?ui(T,`Launching server using command ${g.command} failed.`):(this._serverProcess=T,this._isDetached=!!D.detached,T.stderr.on("data",q=>this.outputChannel.append(Re.string(q)?q:q.toString(e))),T.stdout.on("data",q=>this.outputChannel.append(Re.string(q)?q:q.toString(e))),b.onConnected().then(q=>({reader:q[0],writer:q[1]})))});if(Kn.isSocket(m))return(0,qe.createClientSocketTransport)(m.port).then(b=>{let T=Nn.spawn(g.command,p,D);return!T||!T.pid?ui(T,`Launching server using command ${g.command} failed.`):(this._serverProcess=T,this._isDetached=!!D.detached,T.stderr.on("data",q=>this.outputChannel.append(Re.string(q)?q:q.toString(e))),T.stdout.on("data",q=>this.outputChannel.append(Re.string(q)?q:q.toString(e))),b.onConnected().then(q=>({reader:q[0],writer:q[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))})}_getRuntimePath(e,n){if(Gd.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=Gd.join(r,e);if(Vd.existsSync(i))return i}if(n!==void 0){let i=Gd.join(n,e);if(Vd.existsSync(i))return i}return e}_mainGetRootPath(){let e=Vn.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}_getServerWorkingDir(e){let n=e&&e.cwd;return n||(n=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),n?new Promise(r=>{Vd.lstat(n,(i,s)=>{r(!i&&s.isDirectory()?n:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return"en";let n;try{n=JSON.parse(e)}catch{}return n===void 0||typeof n.locale!="string"?"en":n.locale}};yt.LanguageClient=Yd;var Zd=class{constructor(e,n){this._client=e,this._setting=n,this._listeners=[]}start(){return Vn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new Vn.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),n=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?Vn.workspace.getConfiguration(n).get(r,!1):Vn.workspace.getConfiguration(n);i&&this._client.needsStart()?this._client.start().catch(s=>this._client.error("Start failed after configuration change",s,"force")):!i&&this._client.needsStop()&&this._client.stop().catch(s=>this._client.error("Stop failed after configuration change",s,"force"))}};yt.SettingMonitor=Zd;function ui(t,e){return t===null?Promise.reject(e):new Promise((n,r)=>{t.on("error",i=>{r(`${e} ${i}`)}),setImmediate(()=>r(e))})}});var Rm=w((UT,Dm)=>{"use strict";Dm.exports=ef()});var xw={};Xo(xw,{activate:()=>Tw});module.exports=Cs(xw);var Go=Er(require("path")),ps=require("vscode"),Im=Er(ef()),gs=Er(Rm());var of={};Xo(of,{getCurrentTsPaths:()=>hs,onDidChangeConfiguration:()=>Cw,selectVersionCommand:()=>yw});var on=Er(require("fs")),$e=Er(require("path")),Be=Er(require("vscode")),fs="node_modules/typescript/lib";async function yw(t,e){let n=hs(t).isWorkspacePath,r=Sm(),i=r?tf(r.serverPath):void 0,s=Tm(),o=tf(s.serverPath),a=Pm(),u=wm(fs,(Be.workspace.workspaceFolders??[]).map(y=>y.uri.fsPath)),l=u?tf(u):void 0,h={};h[0]={label:(n?"":"\u2022 ")+"Use VS Code's Version",description:o},a&&(h[1]={label:(n?"\u2022 ":"")+"Use Workspace Version",description:i??"Could not load the TypeScript version at this path",detail:a}),a!==fs&&(h[2]={label:(n?"\u2022 ":"")+"Use Workspace Version",description:l??"Could not load the TypeScript version at this path",detail:fs});let g=await _w(h);if(g===void 0)return;g==="2"&&Be.workspace.getConfiguration("typescript").update("tsdk",fs);let p=g!=="0";p!==xm(t)&&(t.workspaceState.update("typescript.useWorkspaceTsdk",p),bm(t,e))}async function Cw(t,e,n){(t.affectsConfiguration("typescript.tsdk")||t.affectsConfiguration("typescript.locale"))&&bm(e,n)}async function bm(t,e){let n=hs(t),r={...e.clientOptions.initializationOptions,typescript:n};e.clientOptions.initializationOptions=r,Be.commands.executeCommand("astro.restartLanguageServer",!1)}function hs(t){if(xm(t)){let e=Sm(!0);if(e)return{...e,isWorkspacePath:!0}}return{...Tm(),isWorkspacePath:!1}}function _w(t,e){return new Promise(n=>{let r=Be.window.createQuickPick(),i=[];for(let s of Array.isArray(t)?t:[t]){let o=Object.values(s);if(o.length){i.length&&i.push({label:"",kind:Be.QuickPickItemKind.Separator});for(let a of o)i.push(a)}}r.items=i,r.placeholder=e,r.onDidChangeSelection(s=>{if(s[0])for(let o of Array.isArray(t)?t:[t])for(let a in o){let u=o[a];if(s[0]===u){n(a),r.hide();break}}}),r.onDidHide(()=>{r.dispose(),n(void 0)}),r.show()})}function tf(t){if(!on.existsSync(t))return;let e=t.split($e.sep);if(e.length<=2)return;let r=e.slice(0,-2).join($e.sep),i=$e.join(r,"package.json");if(on.existsSync(i)||$e.basename(r)==="built"&&(i=$e.join(r,"..","package.json")),!on.existsSync(i))return;let s=on.readFileSync(i).toString(),o=null;try{o=JSON.parse(s)}catch{return}if(!(!o||!o.version))return o.version}function wm(t,e){if($e.isAbsolute(t)){let n=nf(t);if(n)return n}else for(let n of e){let r=nf($e.join(n,t));if(r)return r}}function Dw(t,e,n){if($e.isAbsolute(t)){let r=rf(t,e);if(r)return r}else for(let r of n){let i=rf($e.join(r,t),e);if(i)return i}}function nf(t){let e=$e.join(t,"tsserverlibrary.js"),n=$e.join(t,"typescript.js"),r=$e.join(t,"tsserver.js");if(on.existsSync(e))return e;if(on.existsSync(n))return n;if(on.existsSync(r))return r}function rf(t,e){let n=$e.join(t,e,"diagnosticMessages.generated.json");if(on.existsSync(n))return n}function Rw(t){return $e.join(t,"extensions","node_modules","typescript","lib","typescript.js")}function bw(t,e){let n=$e.join(t,"extensions","node_modules","typescript","lib",e,"diagnosticMessages.generated.json");if(on.existsSync(n))return n}function Sm(t=!1){let e=Pm();if(!e&&t&&(e=fs),e){let n=(Be.workspace.workspaceFolders??[]).map(i=>i.uri.fsPath),r=wm(e,n);if(r)return{serverPath:r,localizedPath:Dw(e,sf(),n)}}}function Tm(){let t=Be.extensions.getExtension("ms-vscode.vscode-typescript-next");if(t){let e=$e.join(t.extensionPath,"node_modules/typescript/lib"),n=nf(e);if(n)return{serverPath:n,localizedPath:rf(e,sf())}}return{serverPath:Rw(Be.env.appRoot),localizedPath:bw(Be.env.appRoot,sf())}}function Pm(){return Be.workspace.getConfiguration("typescript").get("tsdk")}function sf(){let e=Be.workspace.getConfiguration("typescript").get("locale");return e===void 0||e==="auto"?Be.env.language:e}function xm(t){return t.workspaceState.get("typescript.useWorkspaceTsdk",!1)}var tt=require("vscode");function qm(t,e,n){let r=[];tt.workspace.onDidChangeTextDocument(u=>a(u.document,u.contentChanges),null,r);let i=!1;o(),tt.window.onDidChangeActiveTextEditor(o,null,r);let s;function o(){i=!1;let u=tt.window.activeTextEditor;if(!u)return;let l=u.document;!e[l.languageId]||!tt.workspace.getConfiguration(void 0,l.uri).get(n)||(i=!0)}function a(u,l){if(!i)return;let h=tt.window.activeTextEditor&&tt.window.activeTextEditor.document;if(u!==h||l.length===0)return;typeof s<"u"&&clearTimeout(s);let g=l[l.length-1],p=g.text[g.text.length-1];if("range"in g&&(g.rangeLength??0)>0||p!==">"&&p!=="/")return;let y="range"in g?g.range.start:new tt.Position(0,u.getText().length),m=u.version;s=setTimeout(()=>{let D=new tt.Position(y.line,y.character+g.text.length);t(u,D).then(b=>{if(b&&i){let T=tt.window.activeTextEditor;if(T){let q=T.document;if(u===q&&q.version===m){let E=T.selections;E.length&&E.some(I=>I.active.isEqual(D))?T.insertSnippet(new tt.SnippetString(b),E.map(I=>I.active)):T.insertSnippet(new tt.SnippetString(b),D)}}}}),s=void 0},100)}return tt.Disposable.from(...r)}var He=require("vscode");var nt=require("vscode");async function Em(t,e){if(!t||t.scheme!=="file")return;let n=await nt.workspace.openTextDocument(t);await nt.window.withProgress({location:nt.ProgressLocation.Window,title:"Finding file references"},async(r,i)=>{let s=await e.sendRequest("$/getFileReferences",n.uri.toString(),i);if(!s)return;let o=nt.workspace.getConfiguration("references"),a=o.inspect("preferredLocation");await o.update("preferredLocation","view");try{await nt.commands.executeCommand("editor.action.showReferences",t,new nt.Position(0,0),s.map(u=>new nt.Location(nt.Uri.parse(u.uri),new nt.Range(u.range.start.line,u.range.start.character,u.range.end.line,u.range.end.character))))}finally{await o.update("preferredLocation",a?.workspaceFolderValue??a?.workspaceValue)}})}function km(t,e){return{documentSelector:[{scheme:"file",language:"astro"}],synchronize:{fileEvents:He.workspace.createFileSystemWatcher("{**/*.js,**/*.ts}",!1,!1,!1)},initializationOptions:{typescript:e,environment:t,dontFilterIncompleteCompletions:!0,isTrusted:He.workspace.isTrusted}}}function Om(t,e,n){He.workspace.onDidChangeConfiguration(o=>n.onDidChangeConfiguration(o,t,e)),He.workspace.onDidSaveTextDocument(async o=>{let a=o.fileName.split(/\/|\\/).pop()??o.fileName;[/^tsconfig\.json$/,/^jsconfig\.json$/].some(u=>u.test(a))&&await i(!1)}),He.workspace.onDidChangeTextDocument(o=>{if(["vue","svelte","javascript","typescript","javascriptreact","typescriptreact","json","jsonc"].includes(o.document.languageId)){let a=o.document.fileName.split(/\/|\\/).pop()??o.document.fileName;if(["json","jsonc"].includes(o.document.languageId)&&(a.startsWith("tsconfig")||a.startsWith("jsconfig")))return;s().sendNotification("$/onDidChangeNonAstroFile",{uri:o.document.uri.toString(!0),changes:["vue","svelte"].includes(o.document.languageId)?void 0:o.contentChanges.map(u=>({range:{start:{line:u.range.start.line,character:u.range.start.character},end:{line:u.range.end.line,character:u.range.end.character}},text:u.text}))})}}),t.subscriptions.push(He.commands.registerCommand("astro.restartLanguageServer",async(o=!0)=>{await i(o)}),He.commands.registerCommand("astro.showTSXOutput",async()=>{let o=await s().sendRequest("$/getTSXOutput",He.window.activeTextEditor?.document.uri.toString());if(o){let a=await He.workspace.openTextDocument({content:o,language:"typescriptreact"});await He.window.showTextDocument(a,{preview:!0,viewColumn:He.ViewColumn.Beside})}else He.window.showErrorMessage("Could not open the current document's TSX output")}),He.commands.registerCommand("astro.selectTypescriptVersion",()=>n.selectVersionCommand(t,e)),He.commands.registerCommand("astro.findFileReferences",()=>Em(He.window.activeTextEditor?.document.uri,s())));let r=!1;async function i(o){r||(r=!0,await e.stop(),await e.start(),o&&He.window.showInformationMessage("Astro language server restarted."),r=!1)}function s(){return e}}var Sw=new Im.RequestType("html/tag");async function Tw(t){let e=ps.workspace.getConfiguration("astro.language-server"),{workspaceFolders:n}=ps.workspace,r=n?.[0].uri.fsPath,i=e.get("ls-path");typeof i=="string"&&i.trim()!==""&&typeof r=="string"?(i=Go.isAbsolute(i)?i:Go.join(r,i),console.info(`Using language server at ${i}`)):i=void 0;let s=i?require.resolve(i):ps.Uri.joinPath(t.extensionUri,"dist/node/server.js").fsPath,a={execArgv:["--nolazy","--inspect="+6040]},u={run:{module:s,transport:gs.TransportKind.ipc},debug:{module:s,transport:gs.TransportKind.ipc,options:a}},l=e.get("runtime");l&&(u.run.runtime=l,u.debug.runtime=l,console.info(`Using ${l} as runtime`));let h=hs(t),g=km("node",h),p=Pw(u,g);return p.start().then(()=>{let m=qm((D,b)=>{let T=p.code2ProtocolConverter.asTextDocumentPositionParams(D,b);return p.sendRequest(Sw,T)},{astro:!0},"html.autoClosingTags");t.subscriptions.push(m)}).catch(y=>{console.error("Astro, unable to load language server.",y)}),Om(t,p,of),{getLanguageServer:()=>p}}function Pw(t,e){return new gs.LanguageClient("astro","Astro",t,e)}0&&(module.exports={activate});
